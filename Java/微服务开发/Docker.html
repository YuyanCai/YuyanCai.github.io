<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html"><meta property="og:site_name" content="å°è”¡coding"><meta property="og:title" content="Docker"><meta property="og:description" content="ä¸€ã€ç®€ä»‹ 1.1 Dockeræ˜¯ä»€ä¹ˆ Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚ Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯â€œBuildï¼ŒShip and Run Any App,Anywhereâ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°â€œä¸€æ¬¡é•œåƒï¼Œå¤„å¤„è¿è¡Œâ€ã€‚ 1.2 ..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-12-31T12:07:23.000Z"><meta property="og:locale" content="en-US"><meta property="article:modified_time" content="2022-12-31T12:07:23.000Z"><title>Docker | å°è”¡coding</title><meta name="description" content="ä¸€ã€ç®€ä»‹ 1.1 Dockeræ˜¯ä»€ä¹ˆ Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚ Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯â€œBuildï¼ŒShip and Run Any App,Anywhereâ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°â€œä¸€æ¬¡é•œåƒï¼Œå¤„å¤„è¿è¡Œâ€ã€‚ 1.2 ...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-b0136e4c.css" as="style"><link rel="stylesheet" href="/assets/style-b0136e4c.css">
    <link rel="modulepreload" href="/assets/app-59753726.js"><link rel="modulepreload" href="/assets/framework-f12b30cc.js"><link rel="modulepreload" href="/assets/Docker.html-50e0b3dc.js"><link rel="modulepreload" href="/assets/Docker.html-975d5f31.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="å°è”¡coding"><!----><span class="site-name hide-in-pad">å°è”¡coding</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/front/Vue/" class="nav-link" aria-label="å‰ç«¯"><span class="font-icon icon iconfont icon-javascript" style=""></span>å‰ç«¯<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Java/" class="nav-link active" aria-label="åç«¯"><span class="font-icon icon iconfont icon-java" style=""></span>åç«¯<!----></a></div><div class="nav-item hide-in-mobile"><a href="/devops/" class="nav-link" aria-label="è¿ç»´"><span class="font-icon icon iconfont icon-centos" style=""></span>è¿ç»´<!----></a></div><div class="nav-item hide-in-mobile"><a href="/mysql/" class="nav-link" aria-label="Mysql"><span class="font-icon icon iconfont icon-more" style=""></span>Mysql<!----></a></div><div class="nav-item hide-in-mobile"><a href="/redis/" class="nav-link" aria-label="Redis"><span class="font-icon icon iconfont icon-launch" style=""></span>Redis<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¡¹ç›®å®æˆ˜"><span class="title"><span class="font-icon icon iconfont icon-hot" style=""></span>é¡¹ç›®å®æˆ˜</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/study-project/school/" class="nav-link" aria-label="è°·ç²’å­¦é™¢"><!---->è°·ç²’å­¦é™¢<!----></a></li><li class="dropdown-item"><a href="/study-project/mall/" class="nav-link" aria-label="è°·ç²’å•†åŸ"><!---->è°·ç²’å•†åŸ<!----></a></li><li class="dropdown-item"><a href="/study-project/evaluate/" class="nav-link" aria-label="é»‘é©¬ç‚¹è¯„"><!---->é»‘é©¬ç‚¹è¯„<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="æ¢èŠ±äº¤å‹"><!---->æ¢èŠ±äº¤å‹<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="é»‘é©¬å¤´æ¡"><!---->é»‘é©¬å¤´æ¡<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="å“è¾¾ç‰©æµTMS"><!---->å“è¾¾ç‰©æµTMS<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="æ™ºç‰›è‚¡"><!---->æ™ºç‰›è‚¡<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="äº¿å¯æ§"><!---->äº¿å¯æ§<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#" class="router-link-active router-link-exact-active nav-link" aria-label="å¼€æºé¡¹ç›®"><!---->å¼€æºé¡¹ç›®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜"><span class="title"><span class="font-icon icon iconfont icon-linux" style=""></span>å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/mac/idea.html" class="nav-link" aria-label="MACä½¿ç”¨IDEAå°æŠ€å·§"><!---->MACä½¿ç”¨IDEAå°æŠ€å·§<!----></a></li><li class="dropdown-item"><a href="/mac/linux.html" class="nav-link" aria-label="Linuxä½¿ç”¨å°æŠ€å·§"><!---->Linuxä½¿ç”¨å°æŠ€å·§<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Springæ¡†æ¶"><!---->Springæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVCæ¡†æ¶"><!---->SpringMVCæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/Mybatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatisæ¡†æ¶"><!---->Mybatisæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/MybatisPlus.html" class="nav-link sidebar-link sidebar-page" aria-label="MybatisPlusæ¡†æ¶"><!---->MybatisPlusæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/SpringBoot.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringBootæ¡†æ¶"><!---->SpringBootæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/Maven.html" class="nav-link sidebar-link sidebar-page" aria-label="Maven"><!---->Maven<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/Git.html" class="nav-link sidebar-link sidebar-page" aria-label="Git"><!---->Git<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/1.Dubbo.html" class="nav-link sidebar-link sidebar-page" aria-label="Dubbo"><!---->Dubbo<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/RabbitMQ.html" class="nav-link sidebar-link sidebar-page" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="Nginx"><!---->Nginx<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/1.SpringCloud%E5%88%9D%E7%BA%A7.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloudåˆçº§"><!---->SpringCloudåˆçº§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/2.SpringCloud%E4%B8%AD%E7%BA%A7.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloudä¸­çº§"><!---->SpringCloudä¸­çº§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/3.SpringCloud%E9%AB%98%E7%BA%A7.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloudé«˜çº§"><!---->SpringCloudé«˜çº§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Docker"><!---->Docker<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸€ã€ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ã€ç®€ä»‹"><!---->ä¸€ã€ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-1-dockeræ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 Dockeræ˜¯ä»€ä¹ˆ"><!---->1.1 Dockeræ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 ä¸ºä»€ä¹ˆä¼šå‡ºç°Docker"><!---->1.2 ä¸ºä»€ä¹ˆä¼šå‡ºç°Docker<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-3-è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•"><!---->1.3 è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-4-ä¸€å¥è¯æ¦‚æ‹¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4 ä¸€å¥è¯æ¦‚æ‹¬"><!---->1.4 ä¸€å¥è¯æ¦‚æ‹¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-5-èƒ½å¹²å˜›" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5 èƒ½å¹²å˜›"><!---->1.5 èƒ½å¹²å˜›<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#äºŒã€å…¥é—¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€å…¥é—¨"><!---->äºŒã€å…¥é—¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-1-éƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 éƒ¨ç½²"><!---->2.1 éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-2-dockerçš„åŸºæœ¬ç»„æˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 Dockerçš„åŸºæœ¬ç»„æˆ"><!---->2.2 Dockerçš„åŸºæœ¬ç»„æˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-3-æ¶æ„å›¾è§£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 æ¶æ„å›¾è§£"><!---->2.3 æ¶æ„å›¾è§£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸‰ã€å¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ã€å¸¸ç”¨å‘½ä»¤"><!---->ä¸‰ã€å¸¸ç”¨å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤"><!---->3.1 å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-2-é•œåƒå‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 é•œåƒå‘½ä»¤"><!---->3.2 é•œåƒå‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-3-å®¹å™¨å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 å®¹å™¨å‘½ä»¤"><!---->3.3 å®¹å™¨å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å››ã€é•œåƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ã€é•œåƒ"><!---->å››ã€é•œåƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 æ˜¯ä»€ä¹ˆ"><!---->4.1 æ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-2-é•œåƒåŠ è½½åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 é•œåƒåŠ è½½åŸç†"><!---->4.2 é•œåƒåŠ è½½åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-3-ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚"><!---->4.3 ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-4-é‡ç‚¹ç†è§£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4 é‡ç‚¹ç†è§£"><!---->4.4 é‡ç‚¹ç†è§£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-5-æ“ä½œæ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.5 æ“ä½œæ¡ˆä¾‹"><!---->4.5 æ“ä½œæ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-6-å°æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.6 å°æ€»ç»“"><!---->4.6 å°æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#äº”ã€å®¹å™¨å·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº”ã€å®¹å™¨å·"><!---->äº”ã€å®¹å™¨å·<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 æ˜¯ä»€ä¹ˆ"><!---->5.1 æ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-2-èƒ½å¹²å˜›" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 èƒ½å¹²å˜›"><!---->5.2 èƒ½å¹²å˜›<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-3-æ•°æ®å·æ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 æ•°æ®å·æ¡ˆä¾‹"><!---->5.3 æ•°æ®å·æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-4-å·çš„ç»§æ‰¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4 å·çš„ç»§æ‰¿"><!---->5.4 å·çš„ç»§æ‰¿<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…"><!---->å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-1-tomcat" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 Tomcat"><!---->6.1 Tomcat<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-2-mysql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 Mysql"><!---->6.2 Mysql<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-3-redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 Redis"><!---->6.3 Redis<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-4-nginx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4 Nginx"><!---->6.4 Nginx<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸ƒã€å®‰è£…é«˜çº§ç¯‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ƒã€å®‰è£…é«˜çº§ç¯‡"><!---->ä¸ƒã€å®‰è£…é«˜çº§ç¯‡<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-1-mysqä¸»ä»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 Mysqä¸»ä»"><!---->6.1 Mysqä¸»ä»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å…«ã€dockerfile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…«ã€DockerFile"><!---->å…«ã€DockerFile<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->8.1 æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ"><!---->8.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 Dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤"><!---->8.3 Dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-4-dockerfileå®æˆ˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.4 Dockerfileå®æˆ˜"><!---->8.4 Dockerfileå®æˆ˜<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¹ã€å¾®æœåŠ¡å®æˆ˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¹ã€å¾®æœåŠ¡å®æˆ˜"><!---->ä¹ã€å¾®æœåŠ¡å®æˆ˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åã€ç½‘ç»œæ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åã€ç½‘ç»œæ¨¡å¼"><!---->åã€ç½‘ç»œæ¨¡å¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-1-ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1 ç®€ä»‹"><!---->10.1 ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-2-bridge" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2 bridge"><!---->10.2 bridge<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-3-host" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.3 host"><!---->10.3 host<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-4-none" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4 none"><!---->10.4 none<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-5-container" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.5 container"><!---->10.5 container<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-6-è‡ªå®šä¹‰ç½‘ç»œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.6 è‡ªå®šä¹‰ç½‘ç»œ"><!---->10.6 è‡ªå®šä¹‰ç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åä¸€ã€å®¹å™¨ç¼–æ’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸€ã€å®¹å™¨ç¼–æ’"><!---->åä¸€ã€å®¹å™¨ç¼–æ’<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-1-ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.1 ç®€ä»‹"><!---->11.1 ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-2-docker-composeæ ¸å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.2 docker-composeæ ¸å¿ƒ"><!---->11.2 docker-composeæ ¸å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-3-composeå¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.3 Composeå¸¸ç”¨å‘½ä»¤"><!---->11.3 Composeå¸¸ç”¨å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-4-å¿«é€Ÿå…¥é—¨compose" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.4 å¿«é€Ÿå…¥é—¨Compose"><!---->11.4 å¿«é€Ÿå…¥é—¨Compose<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åäºŒã€portainer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åäºŒã€Portainer"><!---->åäºŒã€Portainer<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_12-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.1 æ˜¯ä»€ä¹ˆ"><!---->12.1 æ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_12-2-å®‰è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.2 å®‰è£…"><!---->12.2 å®‰è£…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å®‰è£…nginx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®‰è£…nginx"><!---->å®‰è£…nginx<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åä¸‰ã€cadvisor-influxdb-granfana" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸‰ã€CAdvisor+InfluxDB+Granfana"><!---->åä¸‰ã€CAdvisor+InfluxDB+Granfana<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_13-1-å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.1 å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢"><!---->13.1 å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#bugè®°å½•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="bugè®°å½•"><!---->bugè®°å½•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/ElasticSeach.html" class="nav-link sidebar-link sidebar-page" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Spring%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html" class="nav-link sidebar-link sidebar-page" aria-label="Springæºç "><!---->Springæºç <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Docker</h1><div class="page-info"><span class="author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://xiaocaicoding.cn" target="_blank" rel="noopener noreferrer">xiaocai</a></span><span property="author" content="xiaocai"></span></span><!----><span class="date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-12-31T12:07:23.000Z"></span><!----><!----><span class="reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 68 min</span><meta property="timeRequired" content="PT68M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸€ã€ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€ç®€ä»‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-1-dockeræ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">1.1 Dockeræ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°docker" class="router-link-active router-link-exact-active toc-link level3">1.2 ä¸ºä»€ä¹ˆä¼šå‡ºç°Docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-3-è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•" class="router-link-active router-link-exact-active toc-link level3">1.3 è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-4-ä¸€å¥è¯æ¦‚æ‹¬" class="router-link-active router-link-exact-active toc-link level3">1.4 ä¸€å¥è¯æ¦‚æ‹¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_1-5-èƒ½å¹²å˜›" class="router-link-active router-link-exact-active toc-link level3">1.5 èƒ½å¹²å˜›</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#äºŒã€å…¥é—¨" class="router-link-active router-link-exact-active toc-link level2">äºŒã€å…¥é—¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-1-éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level3">2.1 éƒ¨ç½²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-2-dockerçš„åŸºæœ¬ç»„æˆ" class="router-link-active router-link-exact-active toc-link level3">2.2 Dockerçš„åŸºæœ¬ç»„æˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_2-3-æ¶æ„å›¾è§£" class="router-link-active router-link-exact-active toc-link level3">2.3 æ¶æ„å›¾è§£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸‰ã€å¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€å¸¸ç”¨å‘½ä»¤</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">3.1 å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-2-é•œåƒå‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">3.2 é•œåƒå‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_3-3-å®¹å™¨å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">3.3 å®¹å™¨å‘½ä»¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å››ã€é•œåƒ" class="router-link-active router-link-exact-active toc-link level2">å››ã€é•œåƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">4.1 æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-2-é•œåƒåŠ è½½åŸç†" class="router-link-active router-link-exact-active toc-link level3">4.2 é•œåƒåŠ è½½åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-3-ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚" class="router-link-active router-link-exact-active toc-link level3">4.3 ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-4-é‡ç‚¹ç†è§£" class="router-link-active router-link-exact-active toc-link level3">4.4 é‡ç‚¹ç†è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-5-æ“ä½œæ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">4.5 æ“ä½œæ¡ˆä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_4-6-å°æ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">4.6 å°æ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#äº”ã€å®¹å™¨å·" class="router-link-active router-link-exact-active toc-link level2">äº”ã€å®¹å™¨å·</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">5.1 æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-2-èƒ½å¹²å˜›" class="router-link-active router-link-exact-active toc-link level3">5.2 èƒ½å¹²å˜›</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-3-æ•°æ®å·æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">5.3 æ•°æ®å·æ¡ˆä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_5-4-å·çš„ç»§æ‰¿" class="router-link-active router-link-exact-active toc-link level3">5.4 å·çš„ç»§æ‰¿</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…" class="router-link-active router-link-exact-active toc-link level2">å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-1-tomcat" class="router-link-active router-link-exact-active toc-link level3">6.1 Tomcat</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-2-mysql" class="router-link-active router-link-exact-active toc-link level3">6.2 Mysql</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-3-redis" class="router-link-active router-link-exact-active toc-link level3">6.3 Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-4-nginx" class="router-link-active router-link-exact-active toc-link level3">6.4 Nginx</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¸ƒã€å®‰è£…é«˜çº§ç¯‡" class="router-link-active router-link-exact-active toc-link level2">ä¸ƒã€å®‰è£…é«˜çº§ç¯‡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_6-1-mysqä¸»ä»" class="router-link-active router-link-exact-active toc-link level3">6.1 Mysqä¸»ä»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å…«ã€dockerfile" class="router-link-active router-link-exact-active toc-link level2">å…«ã€DockerFile</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">8.1 æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ" class="router-link-active router-link-exact-active toc-link level3">8.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤" class="router-link-active router-link-exact-active toc-link level3">8.3 Dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_8-4-dockerfileå®æˆ˜" class="router-link-active router-link-exact-active toc-link level3">8.4 Dockerfileå®æˆ˜</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#ä¹ã€å¾®æœåŠ¡å®æˆ˜" class="router-link-active router-link-exact-active toc-link level2">ä¹ã€å¾®æœåŠ¡å®æˆ˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åã€ç½‘ç»œæ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">åã€ç½‘ç»œæ¨¡å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-1-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level3">10.1 ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-2-bridge" class="router-link-active router-link-exact-active toc-link level3">10.2 bridge</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-3-host" class="router-link-active router-link-exact-active toc-link level3">10.3 host</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-4-none" class="router-link-active router-link-exact-active toc-link level3">10.4 none</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-5-container" class="router-link-active router-link-exact-active toc-link level3">10.5 container</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_10-6-è‡ªå®šä¹‰ç½‘ç»œ" class="router-link-active router-link-exact-active toc-link level3">10.6 è‡ªå®šä¹‰ç½‘ç»œ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åä¸€ã€å®¹å™¨ç¼–æ’" class="router-link-active router-link-exact-active toc-link level2">åä¸€ã€å®¹å™¨ç¼–æ’</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-1-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level3">11.1 ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-2-docker-composeæ ¸å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">11.2 docker-composeæ ¸å¿ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-3-composeå¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">11.3 Composeå¸¸ç”¨å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_11-4-å¿«é€Ÿå…¥é—¨compose" class="router-link-active router-link-exact-active toc-link level3">11.4 å¿«é€Ÿå…¥é—¨Compose</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åäºŒã€portainer" class="router-link-active router-link-exact-active toc-link level2">åäºŒã€Portainer</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_12-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">12.1 æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_12-2-å®‰è£…" class="router-link-active router-link-exact-active toc-link level3">12.2 å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#å®‰è£…nginx" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…nginx</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#åä¸‰ã€cadvisor-influxdb-granfana" class="router-link-active router-link-exact-active toc-link level2">åä¸‰ã€CAdvisor+InfluxDB+Granfana</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#_13-1-å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢" class="router-link-active router-link-exact-active toc-link level3">13.1 å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/Docker.html#bugè®°å½•" class="router-link-active router-link-exact-active toc-link level2">bugè®°å½•</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="ä¸€ã€ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç®€ä»‹" aria-hidden="true">#</a> ä¸€ã€ç®€ä»‹</h2><h3 id="_1-1-dockeræ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-1-dockeræ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 1.1 Dockeræ˜¯ä»€ä¹ˆ</h3><p>Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚ Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯â€œBuildï¼ŒShip and Run Any App,Anywhereâ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°â€œä¸€æ¬¡é•œåƒï¼Œå¤„å¤„è¿è¡Œâ€ã€‚</p><h3 id="_1-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°docker" tabindex="-1"><a class="header-anchor" href="#_1-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°docker" aria-hidden="true">#</a> 1.2 ä¸ºä»€ä¹ˆä¼šå‡ºç°Docker</h3><p>ç¯å¢ƒé…ç½®æ²Ÿé€šè¿‡äºç¹çï¼Œç”¨dockerçš„è¯æŠŠè‡ªå·±é…å¥½çš„ç¯å¢ƒå†™å¥½çš„é¡¹ç›®ç›´æ¥æ‰“åŒ…æˆé•œåƒï¼Œåˆ«äººæ‹¿åˆ°é•œåƒåå°±å¯ä»¥è¿è¡Œæˆä¸ºä¸€ä¸ªå®¹å™¨ï¼Œç›´æ¥è¿è¡Œ</p><h3 id="_1-3-è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•" tabindex="-1"><a class="header-anchor" href="#_1-3-è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•" aria-hidden="true">#</a> 1.3 è™šæ‹ŸæœºæŠ€æœ¯çš„å‘å±•</h3><p><strong>ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯</strong></p><p>å®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windows10ç³»ç»Ÿé‡Œé¢è¿è¡ŒLinuxç³»ç»ŸCentOS7ã€‚åº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ï¼Œå› ä¸ºè™šæ‹Ÿæœºçœ‹ä¸Šå»è·ŸçœŸå®ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºåº•å±‚ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å…¶ä»–éƒ¨åˆ†æ¯«æ— å½±å“ã€‚è¿™ç±»è™šæ‹Ÿæœºå®Œç¾çš„è¿è¡Œäº†å¦ä¸€å¥—ç³»ç»Ÿï¼Œèƒ½å¤Ÿä½¿åº”ç”¨ç¨‹åºï¼Œæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ä¸‰è€…ä¹‹é—´çš„é€»è¾‘ä¸å˜ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404090904224.png" alt="image-20220404090904224" tabindex="0" loading="lazy"><figcaption>image-20220404090904224</figcaption></figure><p>è™šæ‹Ÿæœºçš„ç¼ºç‚¹ï¼š 1 èµ„æºå ç”¨å¤š 2 å†—ä½™æ­¥éª¤å¤š 3 å¯åŠ¨æ…¢</p><p><strong>å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯</strong></p><p>Linux å®¹å™¨ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æœ‰äº†å®¹å™¨ï¼Œå°±å¯ä»¥å°†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰èµ„æºæ‰“åŒ…åˆ°ä¸€ä¸ªéš”ç¦»çš„å®¹å™¨ä¸­ã€‚å®¹å™¨ä¸è™šæ‹Ÿæœºä¸åŒï¼Œä¸éœ€è¦æ†ç»‘ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼Œåªéœ€è¦è½¯ä»¶å·¥ä½œæ‰€éœ€çš„åº“èµ„æºå’Œè®¾ç½®ã€‚ç³»ç»Ÿå› æ­¤è€Œå˜å¾—é«˜æ•ˆè½»é‡å¹¶ä¿è¯éƒ¨ç½²åœ¨ä»»ä½•ç¯å¢ƒä¸­çš„è½¯ä»¶éƒ½èƒ½å§‹ç»ˆå¦‚ä¸€åœ°è¿è¡Œã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404091031246.png" alt="image-20220404091031246" tabindex="0" loading="lazy"><figcaption>image-20220404091031246</figcaption></figure><p><strong>å¯¹æ¯”</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404091122678.png" alt="image-20220404091122678" tabindex="0" loading="lazy"><figcaption>image-20220404091122678</figcaption></figure><h3 id="_1-4-ä¸€å¥è¯æ¦‚æ‹¬" tabindex="-1"><a class="header-anchor" href="#_1-4-ä¸€å¥è¯æ¦‚æ‹¬" aria-hidden="true">#</a> 1.4 ä¸€å¥è¯æ¦‚æ‹¬</h3><p><mark>è§£å†³äº†è¿è¡Œç¯å¢ƒå’Œé…ç½®é—®é¢˜çš„è½¯ä»¶å®¹å™¨ï¼Œæ–¹ä¾¿åšæŒç»­é›†æˆå¹¶æœ‰åŠ©äºæ•´ä½“å‘å¸ƒçš„å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯</mark></p><h3 id="_1-5-èƒ½å¹²å˜›" tabindex="-1"><a class="header-anchor" href="#_1-5-èƒ½å¹²å˜›" aria-hidden="true">#</a> 1.5 èƒ½å¹²å˜›</h3><p><mark>dockerèƒ½å¤Ÿä¸€æ¬¡æ„å»ºå¤„å¤„è¿è¡Œ</mark></p><p>1.æ›´å¿«é€Ÿçš„åº”ç”¨äº¤ä»˜å’Œéƒ¨ç½²</p><p>ä¼ ç»Ÿçš„åº”ç”¨å¼€å‘å®Œæˆåï¼Œéœ€è¦æä¾›ä¸€å †å®‰è£…ç¨‹åºå’Œé…ç½®è¯´æ˜æ–‡æ¡£ï¼Œå®‰è£…éƒ¨ç½²åéœ€æ ¹æ®é…ç½®æ–‡æ¡£è¿›è¡Œç¹æ‚çš„é…ç½®æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚DockeråŒ–ä¹‹ååªéœ€è¦äº¤ä»˜å°‘é‡å®¹å™¨é•œåƒæ–‡ä»¶ï¼Œåœ¨æ­£å¼ç”Ÿäº§ç¯å¢ƒåŠ è½½é•œåƒå¹¶è¿è¡Œå³å¯ï¼Œåº”ç”¨å®‰è£…é…ç½®åœ¨é•œåƒé‡Œå·²ç»å†…ç½®å¥½ï¼Œå¤§å¤§èŠ‚çœéƒ¨ç½²é…ç½®å’Œæµ‹è¯•éªŒè¯æ—¶é—´ã€‚</p><p>2.æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨</p><p>Dockeræ˜¯å†…æ ¸çº§è™šæ‹ŸåŒ–ï¼Œå…¶ä¸åƒä¼ ç»Ÿçš„è™šæ‹ŸåŒ–æŠ€æœ¯ä¸€æ ·éœ€è¦é¢å¤–çš„Hypervisoræ”¯æŒï¼Œæ‰€ä»¥åœ¨ä¸€å°ç‰©ç†æœºä¸Šå¯ä»¥è¿è¡Œå¾ˆå¤šä¸ªå®¹å™¨å®ä¾‹ï¼Œå¯å¤§å¤§æå‡ç‰©ç†æœåŠ¡å™¨çš„CPUå’Œå†…å­˜çš„åˆ©ç”¨ç‡ã€‚</p><p>3.æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´</p><p>åº”ç”¨å®¹å™¨åŒ–è¿è¡Œåï¼Œç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„åº”ç”¨å¯ä¸å¼€å‘ã€æµ‹è¯•ç¯å¢ƒçš„åº”ç”¨é«˜åº¦ä¸€è‡´ï¼Œå®¹å™¨ä¼šå°†åº”ç”¨ç¨‹åºç›¸å…³çš„ç¯å¢ƒå’ŒçŠ¶æ€å®Œå…¨å°è£…èµ·æ¥ï¼Œä¸ä¼šå› ä¸ºåº•å±‚åŸºç¡€æ¶æ„å’Œæ“ä½œç³»ç»Ÿçš„ä¸ä¸€è‡´æ€§ç»™åº”ç”¨å¸¦æ¥å½±å“ï¼Œäº§ç”Ÿæ–°çš„BUGã€‚å½“å‡ºç°ç¨‹åºå¼‚å¸¸æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æµ‹è¯•ç¯å¢ƒçš„ç›¸åŒå®¹å™¨è¿›è¡Œå¿«é€Ÿå®šä½å’Œä¿®å¤ã€‚</p><p>4.æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹</p><p>éšç€å¾®æœåŠ¡æ¶æ„å’ŒDockerçš„å‘å±•ï¼Œå¤§é‡çš„åº”ç”¨ä¼šé€šè¿‡å¾®æœåŠ¡æ–¹å¼æ¶æ„ï¼Œåº”ç”¨çš„å¼€å‘æ„å»ºå°†å˜æˆæ­ä¹é«˜ç§¯æœ¨ä¸€æ ·ï¼Œæ¯ä¸ªDockerå®¹å™¨å°†å˜æˆä¸€å—â€œç§¯æœ¨â€ï¼Œåº”ç”¨çš„å‡çº§å°†å˜å¾—éå¸¸å®¹æ˜“ã€‚å½“ç°æœ‰çš„å®¹å™¨ä¸è¶³ä»¥æ”¯æ’‘ä¸šåŠ¡å¤„ç†æ—¶ï¼Œå¯é€šè¿‡é•œåƒè¿è¡Œæ–°çš„å®¹å™¨è¿›è¡Œå¿«é€Ÿæ‰©å®¹ï¼Œä½¿åº”ç”¨ç³»ç»Ÿçš„æ‰©å®¹ä»åŸå…ˆçš„å¤©çº§å˜æˆåˆ†é’Ÿçº§ç”šè‡³ç§’çº§ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404091703677.png" alt="image-20220404091703677" tabindex="0" loading="lazy"><figcaption>image-20220404091703677</figcaption></figure><p>Dockerå€Ÿé‰´äº†æ ‡å‡†é›†è£…ç®±çš„æ¦‚å¿µã€‚æ ‡å‡†é›†è£…ç®±å°†è´§ç‰©è¿å¾€ä¸–ç•Œå„åœ°ï¼ŒDockerå°†è¿™ä¸ªæ¨¡å‹è¿ç”¨åˆ°è‡ªå·±çš„è®¾è®¡ä¸­ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯:é›†è£…ç®±è¿è¾“è´§ç‰©ï¼Œè€ŒDockerè¿è¾“è½¯ä»¶ã€‚-</p><h2 id="äºŒã€å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#äºŒã€å…¥é—¨" aria-hidden="true">#</a> äºŒã€å…¥é—¨</h2><h3 id="_2-1-éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_2-1-éƒ¨ç½²" aria-hidden="true">#</a> 2.1 éƒ¨ç½²</h3><p><strong>äº‘æœåŠ¡å™¨éƒ¨ç½²docker</strong></p><blockquote><p>ç›´æ¥ç”¨å¸¦dockerçš„é•œåƒï¼Œå¼€æœºå°±å¯ä»¥ç”¨dockerçš„å‘½ä»¤</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404091938247.png" alt="image-20220404091938247" tabindex="0" loading="lazy"><figcaption>image-20220404091938247</figcaption></figure><p><strong>å‘½ä»¤è¡Œéƒ¨ç½²docker</strong></p><p>ä¿è¯è™šæ‹Ÿæœºèƒ½ç¨³å®šä¸Šç½‘å³å¯</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ç¬¬ä¸€æ­¥
yum -y install gcc &amp;&amp; yum -y install gcc-c++
yum install -y yum-utils
ç¬¬äºŒæ­¥ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo &amp;&amp; yum makecache fast
ç¬¬ä¸‰æ­¥å®‰è£…
yum install docker-ce docker-ce-cli containerd.io
systemctl start docker  &amp;&amp; systemctl enable docker 
docker run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•hello-world</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220402204821446.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_2-1-1-é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ-å¿…é…" tabindex="-1"><a class="header-anchor" href="#_2-1-1-é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ-å¿…é…" aria-hidden="true">#</a> 2.1.1 é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼ˆå¿…é…ï¼‰</h4><blockquote><p>&quot;registry-mirrors&quot;: [&quot;<a href="https://tptpe526.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://tptpe526.mirror.aliyuncs.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;]</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404101840726.png" alt="image-20220404101840726" tabindex="0" loading="lazy"><figcaption>image-20220404101840726</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220413165211950.png" alt="image-20220413165211950" tabindex="0" loading="lazy"><figcaption>image-20220413165211950</figcaption></figure><h3 id="_2-2-dockerçš„åŸºæœ¬ç»„æˆ" tabindex="-1"><a class="header-anchor" href="#_2-2-dockerçš„åŸºæœ¬ç»„æˆ" aria-hidden="true">#</a> 2.2 Dockerçš„åŸºæœ¬ç»„æˆ</h3><h4 id="_2-2-1-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_2-2-1-é•œåƒ" aria-hidden="true">#</a> 2.2.1 é•œåƒ</h4><p><strong>Docker é•œåƒï¼ˆImageï¼‰å°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»º Docker å®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚</strong></p><p>å®ƒä¹Ÿç›¸å½“äºæ˜¯ä¸€ä¸ªrootæ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ centos:7 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— centos:7 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ç›¸å½“äºå®¹å™¨çš„â€œæºä»£ç â€ï¼Œdockeré•œåƒæ–‡ä»¶ç±»ä¼¼äºJavaçš„ç±»æ¨¡æ¿ï¼Œè€Œdockerå®¹å™¨å®ä¾‹ç±»ä¼¼äºjavaä¸­newå‡ºæ¥çš„å®ä¾‹å¯¹è±¡ã€‚</p><h4 id="_2-2-2-å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_2-2-2-å®¹å™¨" aria-hidden="true">#</a> 2.2.2 å®¹å™¨</h4><p>1 ä»é¢å‘å¯¹è±¡è§’åº¦ **Docker åˆ©ç”¨å®¹å™¨ï¼ˆContainerï¼‰ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡è¿è¡Œåœ¨å®¹å™¨é‡Œé¢ï¼Œå®¹å™¨å°±ç±»ä¼¼äºä¸€ä¸ªè™šæ‹ŸåŒ–çš„è¿è¡Œç¯å¢ƒï¼Œå®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚**å°±åƒæ˜¯Javaä¸­çš„ç±»å’Œå®ä¾‹å¯¹è±¡ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨ä¸ºé•œåƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„å’Œéš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œå®ƒå¯ä»¥è¢«å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€ä¿è¯å®‰å…¨çš„å¹³å°</p><p>2 ä»é•œåƒå®¹å™¨è§’åº¦ å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Linux ç¯å¢ƒï¼ˆåŒ…æ‹¬rootç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰å’Œè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºã€‚</p><h4 id="_2-2-3-ä»“åº“" tabindex="-1"><a class="header-anchor" href="#_2-2-3-ä»“åº“" aria-hidden="true">#</a> 2.2.3 ä»“åº“</h4><p><mark>ä»“åº“ï¼ˆRepositoryï¼‰æ˜¯é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚</mark></p><p>ç±»ä¼¼äº <strong>Mavenä»“åº“ï¼Œå­˜æ”¾å„ç§jaråŒ…çš„åœ°æ–¹ï¼›</strong><strong>githubä»“åº“ï¼Œå­˜æ”¾å„ç§gité¡¹ç›®çš„åœ°æ–¹ï¼›</strong><strong>Dockerå…¬å¸æä¾›çš„å®˜æ–¹registryè¢«ç§°ä¸ºDocker Hubï¼Œå­˜æ”¾å„ç§é•œåƒæ¨¡æ¿çš„åœ°æ–¹ã€‚</strong></p><p>ä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“ï¼ˆPublicï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰ä¸¤ç§å½¢å¼ã€‚ æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ Docker Hub(<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)ï¼Œ å­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒä¾›ç”¨æˆ·ä¸‹è½½ã€‚å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬é˜¿é‡Œäº‘ ã€ç½‘æ˜“äº‘ç­‰</p><h4 id="_2-2-4-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_2-2-4-å°æ€»ç»“" aria-hidden="true">#</a> 2.2.4 å°æ€»ç»“</h4><p>Docker æœ¬èº«æ˜¯ä¸€ä¸ªå®¹å™¨è¿è¡Œè½½ä½“æˆ–ç§°ä¹‹ä¸ºç®¡ç†å¼•æ“ã€‚æˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯imageé•œåƒæ–‡ä»¶ã€‚åªæœ‰é€šè¿‡è¿™ä¸ªé•œåƒæ–‡ä»¶æ‰èƒ½ç”ŸæˆDockerå®¹å™¨å®ä¾‹(ç±»ä¼¼Javaä¸­newå‡ºæ¥ä¸€ä¸ªå¯¹è±¡)ã€‚</p><p><strong>imageæ–‡ä»¶å¯ä»¥çœ‹ä½œæ˜¯å®¹å™¨çš„æ¨¡æ¿ã€‚Docker æ ¹æ® image æ–‡ä»¶ç”Ÿæˆå®¹å™¨çš„å®ä¾‹ã€‚åŒä¸€ä¸ª image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚</strong></p><p><strong>é•œåƒæ–‡ä»¶</strong></p><ul><li>image æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºé•œåƒæ–‡ä»¶ã€‚</li></ul><p><strong>å®¹å™¨å®ä¾‹</strong></p><ul><li>ä¸€ä¸ªå®¹å™¨è¿è¡Œä¸€ç§æœåŠ¡ï¼Œå½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡dockerå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„è¿è¡Œå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å®¹å™¨</li></ul><p><strong>ä»“åº“</strong></p><ul><li>å°±æ˜¯æ”¾ä¸€å †é•œåƒçš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé•œåƒå‘å¸ƒåˆ°ä»“åº“ä¸­ï¼Œéœ€è¦çš„æ—¶å€™å†ä»ä»“åº“ä¸­æ‹‰ä¸‹æ¥å°±å¯ä»¥äº†ã€‚</li></ul><h3 id="_2-3-æ¶æ„å›¾è§£" tabindex="-1"><a class="header-anchor" href="#_2-3-æ¶æ„å›¾è§£" aria-hidden="true">#</a> 2.3 æ¶æ„å›¾è§£</h3><h4 id="_2-3-1-è¿è¡Œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-3-1-è¿è¡Œæµç¨‹" aria-hidden="true">#</a> 2.3.1 è¿è¡Œæµç¨‹</h4><ol><li>ç”¨æˆ·æ˜¯ä½¿ç”¨Docker Clientä¸Docker Daemonå»ºç«‹é€šä¿¡ï¼Œå¹¶å‘é€è¯·æ±‚ç»™åè€…</li><li>Docker Daemonä½œä¸ºDockeræ¶æ„ä¸­çš„ä¸»ä½“éƒ¨åˆ†ï¼Œé¦–å…ˆæä¾›Docker Serverçš„åŠŸèƒ½å¯ä»¥æ¥å—Docker Clientè¯·æ±‚</li><li>Docker Engineæ‰§è¡ŒDockerå†…éƒ¨çš„ä¸€äº›åˆ—å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä¸€ä¸ªJobçš„å½¢å¼å­˜åœ¨</li><li>Jobçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦å®¹å™¨é•œåƒæ—¶ï¼Œåˆ™ä»docker registryä¸­ä¸‹è½½é•œåƒï¼Œå¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨Graph driverå°†ä¸‹è½½é•œåƒä»¥graphçš„å½¢å¼å­˜å‚¨</li><li>å½“éœ€dockeråˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶ï¼Œé€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨networkdriveråˆ›å»ºå¹¶é…ç½®Dockerå®¹å™¨ç½‘ç»œç¯å¢ƒ</li><li>å½“éœ€è¦é™åˆ¶dockerå®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶ï¼Œåˆ™é€šè¿‡Exec driveræ¥å®Œæˆ</li><li>Libcontaineræ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…ï¼ŒNetwork driverä»¥åŠExec driveréƒ½æ˜¯é€šè¿‡Libcontaineræ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œã€‚</li></ol><blockquote><p>ä»¥ä¸Šç»™çˆ·ç†è§£ç€èƒŒï¼Œé¢è¯•å¿…è€ƒ</p><p>ä½ å°±æƒ³ç€å®¹å™¨åˆ›å»ºçš„è¿‡ç¨‹ï¼Œé€šè¿‡dockerclientä¸dockerdaemonå»ºç«‹é€šä¿¡</p><p>dockerdaemonæ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒæä¾›çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯ä¸ç”¨æˆ·é€šä¿¡docker server</p><p>docker engineæ‰§è¡Œçš„æ˜¯å®¹å™¨çš„å†…éƒ¨å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä¸€ä¸ªjobçš„å½¢å¼</p><p>ç„¶åjobéœ€è¦é•œåƒï¼Œå»registryæ‹‰ï¼Œæ³¨å†Œè¿›graphï¼Œéœ€è¦ç½‘ç»œæœ‰ç½‘ç»œé©±åŠ¨ç»™åˆ›å»º</p><p>æœ€åéœ€è¦ä¸€äº›ç‰¹æ®Šçš„æŒ‡ä»¤çš„è¯é€šè¿‡exec driveræ¥å®Œæˆ</p><p>Libcontainerå­—å¦‚å…¶å</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404093156122.png" alt="image-20220404093156122" tabindex="0" loading="lazy"><figcaption>image-20220404093156122</figcaption></figure><h4 id="_2-3-2-ä¸ºä»€ä¹ˆdockeræ¯”vmå¿«" tabindex="-1"><a class="header-anchor" href="#_2-3-2-ä¸ºä»€ä¹ˆdockeræ¯”vmå¿«" aria-hidden="true">#</a> 2.3.2 ä¸ºä»€ä¹ˆdockeræ¯”vmå¿«</h4><p>(1)dockeræœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ ç”±äºdockerä¸éœ€è¦Hypervisor(è™šæ‹Ÿæœº)å®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–,è¿è¡Œåœ¨dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨çš„éƒ½æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æºã€‚å› æ­¤åœ¨CPUã€å†…å­˜åˆ©ç”¨ç‡ä¸Šdockerå°†ä¼šåœ¨æ•ˆç‡ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚</p><p>(2)dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸,è€Œä¸éœ€è¦åŠ è½½æ“ä½œç³»ç»ŸOSå†…æ ¸ å½“æ–°å»ºä¸€ä¸ªå®¹å™¨æ—¶,dockerä¸éœ€è¦å’Œè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚è¿›è€Œé¿å…å¼•å¯»ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸è¿”å›ç­‰æ¯”è¾ƒè´¹æ—¶è´¹èµ„æºçš„è¿‡ç¨‹,å½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶,è™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½OS,è¿”å›æ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚è€Œdockerç”±äºç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿ,åˆ™çœç•¥äº†è¿”å›è¿‡ç¨‹,å› æ­¤æ–°å»ºä¸€ä¸ªdockerå®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚</p><h2 id="ä¸‰ã€å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> ä¸‰ã€å¸¸ç”¨å‘½ä»¤</h2><h3 id="_3-1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" aria-hidden="true">#</a> 3.1 å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404102131493.png" alt="image-20220404102131493" tabindex="0" loading="lazy"><figcaption>image-20220404102131493</figcaption></figure><h3 id="_3-2-é•œåƒå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-2-é•œåƒå‘½ä»¤" aria-hidden="true">#</a> 3.2 é•œåƒå‘½ä»¤</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404102433154.png" alt="image-20220404102433154" tabindex="0" loading="lazy"><figcaption>image-20220404102433154</figcaption></figure><h4 id="_3-2-2-è™šæ‚¬é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_3-2-2-è™šæ‚¬é•œåƒ" aria-hidden="true">#</a> 3.2.2 è™šæ‚¬é•œåƒ</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>==ä»“åº“åã€æ ‡ç­¾éƒ½æ˜¯&lt;none&gt;çš„é•œåƒï¼Œä¿—ç§°è™šæ‚¬é•œåƒdangling image==
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-2-1-docker-system-df" tabindex="-1"><a class="header-anchor" href="#_3-2-1-docker-system-df" aria-hidden="true">#</a> 3.2.1 docker system df</h4><p><strong>æŸ¥çœ‹é•œåƒ/å®¹å™¨/æ•°æ®å·æ‰€å çš„ç©ºé—´</strong></p><p>[root@docker ~]## docker system df TYPE TOTAL ACTIVE SIZE RECLAIMABLE Images 2 0 177MB 177MB (100%) Containers 2 0 0B 0B Local Volumes 0 0 0B 0B Build Cache 0 0 0B 0B</p><h3 id="_3-3-å®¹å™¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-3-å®¹å™¨å‘½ä»¤" aria-hidden="true">#</a> 3.3 å®¹å™¨å‘½ä»¤</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404102754006.png" alt="image-20220404102754006" tabindex="0" loading="lazy"><figcaption>image-20220404102754006</figcaption></figure><p><strong>docker run</strong></p><p>--name=&quot;å®¹å™¨æ–°åå­—&quot; ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼› -d: åå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨(åå°è¿è¡Œ)ï¼›</p><p>-iï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼› -tï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› ä¹Ÿå³å¯åŠ¨äº¤äº’å¼å®¹å™¨(å‰å°æœ‰ä¼ªç»ˆç«¯ï¼Œç­‰å¾…äº¤äº’)ï¼›</p><p>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå¤§å†™P -p: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œå°å†™p</p><p><strong>docker run -it centos /bin/bash</strong></p><p>-i: äº¤äº’å¼æ“ä½œã€‚ -t: ç»ˆç«¯ã€‚ centos : centos é•œåƒã€‚ /bin/bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚ è¦é€€å‡ºç»ˆç«¯ï¼Œç›´æ¥è¾“å…¥ exit:</p><p><strong>docker logs</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404103318803.png" alt="image-20220404103318803" tabindex="0" loading="lazy"><figcaption>image-20220404103318803</figcaption></figure><p><strong>docker inspect</strong></p><blockquote><p>æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚ï¼Œå¾ˆé‡è¦ï¼</p><p>èƒ½çœ‹æŒ‚è½½ç›¸å…³ä¿¡æ¯ï¼Œå’Œç½‘ç»œç­‰è¯¦ç»†ä¿¡æ¯</p></blockquote><p><strong>docker cp</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404103517389.png" alt="image-20220404103517389" tabindex="0" loading="lazy"><figcaption>image-20220404103517389</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220402222639429.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_3-3-1-å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-3-1-å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> 3.3.1 å¸¸ç”¨å‘½ä»¤</h4><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404104044643.png" alt="image-20220404104044643" tabindex="0" loading="lazy"><figcaption>image-20220404104044643</figcaption></figure><ul><li>attach Attach to a running container ## å½“å‰ shell ä¸‹ attach è¿æ¥æŒ‡å®šè¿è¡Œé•œåƒ</li><li>build Build an image from a Dockerfile ## é€šè¿‡ Dockerfile å®šåˆ¶é•œåƒ</li><li>commit Create a new image from a container changes ## æäº¤å½“å‰å®¹å™¨ä¸ºæ–°çš„é•œåƒ</li><li>cp Copy files/folders from the containers filesystem to the host path ##ä»å®¹å™¨ä¸­æ‹·è´æŒ‡å®šæ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¿ä¸»æœºä¸­</li><li>create Create a new container ## åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ŒåŒ runï¼Œä½†ä¸å¯åŠ¨å®¹å™¨</li><li>diff Inspect changes on a container&#39;s filesystem ## æŸ¥çœ‹ docker å®¹å™¨å˜åŒ–</li><li>events Get real time events from the server ## ä» docker æœåŠ¡è·å–å®¹å™¨å®æ—¶äº‹ä»¶</li><li>exec Run a command in an existing container ## åœ¨å·²å­˜åœ¨çš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤</li><li>export Stream the contents of a container as a tar archive ## å¯¼å‡ºå®¹å™¨çš„å†…å®¹æµä½œä¸ºä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶[å¯¹åº” import ]</li><li>history Show the history of an image ## å±•ç¤ºä¸€ä¸ªé•œåƒå½¢æˆå†å²</li><li>images List images ## åˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ</li><li>import Create a new filesystem image from the contents of a tarball ## ä»taråŒ…ä¸­çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿæ˜ åƒ[å¯¹åº”export]</li><li>info Display system-wide information ## æ˜¾ç¤ºç³»ç»Ÿç›¸å…³ä¿¡æ¯</li><li>inspect Return low-level information on a container ## æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</li><li>kill Kill a running container ## kill æŒ‡å®š docker å®¹å™¨</li><li>load Load an image from a tar archive ## ä»ä¸€ä¸ª tar åŒ…ä¸­åŠ è½½ä¸€ä¸ªé•œåƒ[å¯¹åº” save]</li><li>login Register or Login to the docker registry server ## æ³¨å†Œæˆ–è€…ç™»é™†ä¸€ä¸ª docker æºæœåŠ¡å™¨</li><li>logout Log out from a Docker registry server ## ä»å½“å‰ Docker registry é€€å‡º</li><li>logs Fetch the logs of a container ## è¾“å‡ºå½“å‰å®¹å™¨æ—¥å¿—ä¿¡æ¯</li><li>port Lookup the public-facing port which is NAT-ed to PRIVATE_PORT ## æŸ¥çœ‹æ˜ å°„ç«¯å£å¯¹åº”çš„å®¹å™¨å†…éƒ¨æºç«¯å£</li><li>pause Pause all processes within a container ## æš‚åœå®¹å™¨</li><li>ps List containers ## åˆ—å‡ºå®¹å™¨åˆ—è¡¨</li><li>pull Pull an image or a repository from the docker registry server ## ä»dockeré•œåƒæºæœåŠ¡å™¨æ‹‰å–æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒ</li><li>push Push an image or a repository to the docker registry server ## æ¨é€æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒè‡³dockeræºæœåŠ¡å™¨</li><li>restart Restart a running container ## é‡å¯è¿è¡Œçš„å®¹å™¨</li><li>rm Remove one or more containers ## ç§»é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨</li><li>rmi Remove one or more images ## ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ[æ— å®¹å™¨ä½¿ç”¨è¯¥é•œåƒæ‰å¯åˆ é™¤ï¼Œå¦åˆ™éœ€åˆ é™¤ç›¸å…³å®¹å™¨æ‰å¯ç»§ç»­æˆ– -f å¼ºåˆ¶åˆ é™¤]</li><li>run Run a command in a new container ## åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</li><li>save Save an image to a tar archive ## ä¿å­˜ä¸€ä¸ªé•œåƒä¸ºä¸€ä¸ª tar åŒ…[å¯¹åº” load]</li><li>search Search for an image on the Docker Hub ## åœ¨ docker hub ä¸­æœç´¢é•œåƒ</li><li>start Start a stopped containers ## å¯åŠ¨å®¹å™¨</li><li>stop Stop a running containers ## åœæ­¢å®¹å™¨</li><li>tag Tag an image into a repository ## ç»™æºä¸­é•œåƒæ‰“æ ‡ç­¾</li><li>top Lookup the running processes of a container ## æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</li><li>unpause Unpause a paused container ## å–æ¶ˆæš‚åœå®¹å™¨</li><li>version Show the docker version information ## æŸ¥çœ‹ docker ç‰ˆæœ¬å·</li><li>wait Block until a container stops, then print its exit code ## æˆªå–å®¹å™¨åœæ­¢æ—¶çš„é€€å‡ºçŠ¶æ€å€¼</li></ul><p>é•œåƒæœåŠ¡çš„å¯†ç å’Œé˜¿é‡Œäº‘è´¦æˆ·çš„å¯†ç ä¸æ˜¯åŒä¸€ä¸ªå¯†ç ï¼Œ</p><p>ä¸Šä¼ æˆåŠŸ</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220403104927237.png" alt="image-20220403104927237" tabindex="0" loading="lazy"><figcaption>image-20220403104927237</figcaption></figure><p>docker exec -it 1f1ed5798baa /bin/bash</p><p>docker commit -m=&quot;ifconfig cmd add&quot; -a=&quot;pyy&quot; 1f1ed5798baa:1.0</p><p>[root@VM-16-8-centos ~]## docker run -d -p 5000:5000 -v /myregistry:/tmp/registry --privileged=true registry</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos ~]## curl -XGET http://124.221.228.148:5000/v2/_catalog
{&quot;repositories&quot;:[&quot;pyyubuntu&quot;]}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å››ã€é•œåƒ" tabindex="-1"><a class="header-anchor" href="#å››ã€é•œåƒ" aria-hidden="true">#</a> å››ã€é•œåƒ</h2><h3 id="_4-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_4-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 4.1 æ˜¯ä»€ä¹ˆ</h3><p><strong>é•œåƒ</strong> æ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒ(åŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶éœ€è¦çš„åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç­‰)ï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯imageé•œåƒæ–‡ä»¶ã€‚</p><p>åªæœ‰é€šè¿‡è¿™ä¸ªé•œåƒæ–‡ä»¶æ‰èƒ½ç”ŸæˆDockerå®¹å™¨å®ä¾‹(ç±»ä¼¼Javaä¸­newå‡ºæ¥ä¸€ä¸ªå¯¹è±¡)ã€‚</p><p><strong>åˆ†å±‚çš„é•œåƒ</strong></p><p>æˆ‘ä»¬æ‹‰å–é•œåƒçš„æ—¶å€™å¥½åƒæ˜¯ä¸€å±‚ä¸€å±‚ä¸‹è½½çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼šUnionæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual filesystem)ã€‚Union æ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•</p><h3 id="_4-2-é•œåƒåŠ è½½åŸç†" tabindex="-1"><a class="header-anchor" href="#_4-2-é•œåƒåŠ è½½åŸç†" aria-hidden="true">#</a> 4.2 é•œåƒåŠ è½½åŸç†</h3><p><strong>Dockeré•œåƒåŠ è½½åŸç†ï¼š</strong> dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernel, bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernel, Linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œ==åœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯å¼•å¯¼æ–‡ä»¶ç³»ç»Ÿbootfsã€‚==è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p><p>rootfs (root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹ Linux ç³»ç»Ÿä¸­çš„ /dev, /proc, /bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404105851911.png" alt="image-20220404105851911" tabindex="0" loading="lazy"><figcaption>image-20220404105851911</figcaption></figure><p><strong>å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSï¼Œrootfså¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…æ‹¬æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ç”¨Hostçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾› rootfs å°±è¡Œäº†ã€‚ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆ, bootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„, rootfsä¼šæœ‰å·®åˆ«, å› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨bootfsã€‚</strong></p><h3 id="_4-3-ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚" tabindex="-1"><a class="header-anchor" href="#_4-3-ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚" aria-hidden="true">#</a> 4.3 ä¸ºä»€ä¹ˆé•œåƒè¦åˆ†å±‚</h3><p>é•œåƒåˆ†å±‚æœ€å¤§çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯å…±äº«èµ„æºï¼Œæ–¹ä¾¿å¤åˆ¶è¿ç§»ï¼Œå°±æ˜¯ä¸ºäº†å¤ç”¨ã€‚</p><p>æ¯”å¦‚è¯´æœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„ base é•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆ Docker Host åªéœ€åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½ base é•œåƒï¼› åŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€åŠ è½½ä¸€ä»½ base é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æœåŠ¡äº†ã€‚è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ã€‚</p><h3 id="_4-4-é‡ç‚¹ç†è§£" tabindex="-1"><a class="header-anchor" href="#_4-4-é‡ç‚¹ç†è§£" aria-hidden="true">#</a> 4.4 é‡ç‚¹ç†è§£</h3><blockquote><p>çœ‹äº†å¥½å‡ édockeräº†ï¼Œè¿™ä¸ªçœŸçš„å¾ˆé‡è¦ï¼</p></blockquote><p><mark>Dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ï¼Œå®¹å™¨å±‚æ˜¯å¯å†™çš„</mark></p><p>å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä½œâ€œå®¹å™¨å±‚â€ï¼Œâ€œå®¹å™¨å±‚â€ä¹‹ä¸‹çš„éƒ½å«â€œé•œåƒå±‚â€ã€‚ æ‰€æœ‰å¯¹å®¹å™¨çš„æ”¹åŠ¨ - æ— è®ºæ·»åŠ ã€åˆ é™¤ã€è¿˜æ˜¯ä¿®æ”¹æ–‡ä»¶éƒ½åªä¼šå‘ç”Ÿåœ¨å®¹å™¨å±‚ä¸­ã€‚åªæœ‰å®¹å™¨å±‚æ˜¯å¯å†™çš„ï¼Œå®¹å™¨å±‚ä¸‹é¢çš„æ‰€æœ‰é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404110213095.png" alt="image-20220404110213095" tabindex="0" loading="lazy"><figcaption>image-20220404110213095</figcaption></figure><h3 id="_4-5-æ“ä½œæ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_4-5-æ“ä½œæ¡ˆä¾‹" aria-hidden="true">#</a> 4.5 æ“ä½œæ¡ˆä¾‹</h3><p>æ–°é•œåƒ</p><p><strong>docker commitæäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ</strong></p><p><strong>docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å]</strong></p><p><mark>ubuntuå®‰è£…vimå‘½ä»¤</mark></p><p>apt-get update apt-get -y install vim</p><p><mark>æœ¬åœ°é•œåƒå‘å¸ƒé˜¿é‡Œäº‘</mark></p><ol><li>ç™»å½•</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> login <span class="token parameter variable">--username</span><span class="token operator">=</span>ç”¨æˆ·å registry.cn-hangzhou.aliyuncs.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç”¨äºç™»å½•çš„ç”¨æˆ·åä¸ºé˜¿é‡Œäº‘è´¦å·å…¨åï¼Œå¯†ç ä¸ºå¼€é€šæœåŠ¡æ—¶è®¾ç½®çš„å¯†ç ã€‚</p><ol start="2"><li>æ¨é€</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/pengyuyan_ubuntu/pengyuyan_repository:[é•œåƒç‰ˆæœ¬å·]
docker push registry.cn-hangzhou.aliyuncs.com/pengyuyan_ubuntu/pengyuyan_repository:[é•œåƒç‰ˆæœ¬å·]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404112028335.png" alt="image-20220404112028335" tabindex="0" loading="lazy"><figcaption>image-20220404112028335</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404111457512.png" alt="image-20220404111457512" tabindex="0" loading="lazy"><figcaption>image-20220404111457512</figcaption></figure><p><mark>ä¸‹è½½é˜¿é‡Œäº‘é•œåƒåˆ°æœ¬åœ°</mark></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull registry.cn-hangzhou.aliyuncs.com/pengyuyan_ubuntu/pengyuyan_repository:<span class="token punctuation">[</span>é•œåƒç‰ˆæœ¬å·<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><mark>æœ¬åœ°é•œåƒå‘å¸ƒåˆ°ç§æœ‰åº“</mark></p><p>ç§æœ‰åº“ï¼š</p><p>1 å®˜æ–¹Docker Hubåœ°å€ï¼š<a href="https://hub.docker.com/%EF%BC%8C%E4%B8%AD%E5%9B%BD%E5%A4%A7%E9%99%86%E8%AE%BF%E9%97%AE%E5%A4%AA%E6%85%A2%E4%BA%86%E4%B8%94%E5%87%86%E5%A4%87%E8%A2%AB%E9%98%BF%E9%87%8C%E4%BA%91%E5%8F%96%E4%BB%A3%E7%9A%84%E8%B6%8B%E5%8A%BF%EF%BC%8C%E4%B8%8D%E5%A4%AA%E4%B8%BB%E6%B5%81%E3%80%82" target="_blank" rel="noopener noreferrer">https://hub.docker.com/ï¼Œä¸­å›½å¤§é™†è®¿é—®å¤ªæ…¢äº†ä¸”å‡†å¤‡è¢«é˜¿é‡Œäº‘å–ä»£çš„è¶‹åŠ¿ï¼Œä¸å¤ªä¸»æµã€‚<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>2 Dockerhubã€é˜¿é‡Œäº‘è¿™æ ·çš„å…¬å…±é•œåƒä»“åº“å¯èƒ½ä¸å¤ªæ–¹ä¾¿ï¼Œæ¶‰åŠæœºå¯†çš„å…¬å¸ä¸å¯èƒ½æä¾›é•œåƒç»™å…¬ç½‘ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªæœ¬åœ°ç§äººä»“åº“ä¾›ç»™å›¢é˜Ÿä½¿ç”¨ï¼ŒåŸºäºå…¬å¸å†…éƒ¨é¡¹ç›®æ„å»ºé•œåƒã€‚</p><pre><code>Docker Registryæ˜¯å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œå¯ä»¥ç”¨äºæ„å»ºç§æœ‰é•œåƒä»“åº“
</code></pre><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404112410838.png" alt="image-20220404112410838" tabindex="0" loading="lazy"><figcaption>image-20220404112410838</figcaption></figure><ol><li>å®‰è£…è¿è¡Œç§æœ‰ä»“åº“</li></ol><p>docker pull registry</p><p>docker run -d -p 5000:5000 -v /myregistry/:/tmp/registry --privileged=true registry</p><p>é»˜è®¤æƒ…å†µï¼Œä»“åº“è¢«åˆ›å»ºåœ¨å®¹å™¨çš„/var/lib/registryç›®å½•ä¸‹ï¼Œå»ºè®®è‡ªè¡Œç”¨å®¹å™¨å·æ˜ å°„ï¼Œæ–¹ä¾¿äºå®¿ä¸»æœºè”è°ƒ</p><ol start="2"><li>ç»™å®¹å™¨å¢åŠ å‘½ä»¤</li></ol><p>docker run -it ubuntu /bin/bash</p><p>apt-get update</p><p>apt-get install net-tools</p><p>å…¬å¼ï¼š docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å] å‘½ä»¤ï¼šåœ¨å®¹å™¨å¤–æ‰§è¡Œï¼Œè®°å¾— docker commit -m=&quot;ifconfig cmd add&quot; -a=&quot;pyy&quot; a69d7c825c4f pyyubuntu:1.2</p><ol start="3"><li>æ‰“æ ‡ç­¾ï¼Œæ”¹é…ç½®</li></ol><p>docker tag pyyubuntu:1.2 192.168.100.10:5000/pyyubuntu:1.2</p><p>vim /etc/docker/daemon.json</p><p>{ &quot;registry-mirrors&quot;: [&quot;<a href="https://pengyuyan227.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://pengyuyan227.mirror.aliyuncs.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot;], &quot;insecure-registries&quot;: [&quot;192.168.100.10:5000&quot;] }</p><ol start="4"><li>ä¸Šä¼ </li></ol><p>docker push 192.168.111.162:5000/zzyyubuntu:1.2</p><h3 id="_4-6-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_4-6-å°æ€»ç»“" aria-hidden="true">#</a> 4.6 å°æ€»ç»“</h3><p>Dockerä¸­çš„é•œåƒåˆ†å±‚ï¼Œæ”¯æŒé€šè¿‡æ‰©å±•ç°æœ‰é•œåƒï¼Œåˆ›å»ºæ–°çš„é•œåƒã€‚ç±»ä¼¼Javaç»§æ‰¿äºä¸€ä¸ªBaseåŸºç¡€ç±»ï¼Œè‡ªå·±å†æŒ‰éœ€æ‰©å±•ã€‚ æ–°é•œåƒæ˜¯ä» base é•œåƒä¸€å±‚ä¸€å±‚å åŠ ç”Ÿæˆçš„ã€‚æ¯å®‰è£…ä¸€ä¸ªè½¯ä»¶ï¼Œå°±åœ¨ç°æœ‰é•œåƒçš„åŸºç¡€ä¸Šå¢åŠ ä¸€å±‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404110700038.png" alt="image-20220404110700038" tabindex="0" loading="lazy"><figcaption>image-20220404110700038</figcaption></figure><h2 id="äº”ã€å®¹å™¨å·" tabindex="-1"><a class="header-anchor" href="#äº”ã€å®¹å™¨å·" aria-hidden="true">#</a> äº”ã€å®¹å™¨å·</h2><blockquote><p>--privileged=true</p><p><strong>DockeræŒ‚è½½ä¸»æœºç›®å½•è®¿é—®å¦‚æœå‡ºç°cannot open directory .: Permission denied</strong><strong>è§£å†³åŠæ³•ï¼šåœ¨æŒ‚è½½ç›®å½•åå¤šåŠ ä¸€ä¸ª--privileged=trueå‚æ•°å³å¯</strong></p></blockquote><h3 id="_5-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_5-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 5.1 æ˜¯ä»€ä¹ˆ</h3><p>ä¸€å¥è¯ï¼šæœ‰ç‚¹ç±»ä¼¼æˆ‘ä»¬Redisé‡Œé¢çš„rdbå’Œaofæ–‡ä»¶</p><p>å°†dockerå®¹å™¨å†…çš„æ•°æ®ä¿å­˜è¿›å®¿ä¸»æœºçš„ç£ç›˜ä¸­</p><p>è¿è¡Œä¸€ä¸ªå¸¦æœ‰å®¹å™¨å·å­˜å‚¨åŠŸèƒ½çš„å®¹å™¨å®ä¾‹</p><p>docker run -it --privileged=true -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:/å®¹å™¨å†…ç›®å½• é•œåƒå</p><h3 id="_5-2-èƒ½å¹²å˜›" tabindex="-1"><a class="header-anchor" href="#_5-2-èƒ½å¹²å˜›" aria-hidden="true">#</a> 5.2 èƒ½å¹²å˜›</h3><p>*å°†è¿ç”¨ä¸è¿è¡Œçš„ç¯å¢ƒæ‰“åŒ…é•œåƒï¼Œrunåå½¢æˆå®¹å™¨å®ä¾‹è¿è¡Œ ï¼Œä½†æ˜¯<mark>æˆ‘ä»¬å¯¹æ•°æ®çš„è¦æ±‚å¸Œæœ›æ˜¯æŒä¹…åŒ–çš„</mark></p><p>Dockerå®¹å™¨äº§ç”Ÿçš„æ•°æ®ï¼Œå¦‚æœä¸å¤‡ä»½ï¼Œé‚£ä¹ˆå½“å®¹å™¨å®ä¾‹åˆ é™¤åï¼Œå®¹å™¨å†…çš„æ•°æ®è‡ªç„¶ä¹Ÿå°±æ²¡æœ‰äº†ã€‚ ä¸ºäº†èƒ½ä¿å­˜æ•°æ®åœ¨dockerä¸­æˆ‘ä»¬ä½¿ç”¨å·ã€‚</p><p>ç‰¹ç‚¹ï¼š <strong>1ï¼šæ•°æ®å·å¯åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</strong><strong>2ï¼šå·ä¸­çš„æ›´æ”¹å¯ä»¥ç›´æ¥å®æ—¶ç”Ÿæ•ˆï¼Œçˆ½</strong><strong>3ï¼šæ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­</strong><strong>4ï¼šæ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢</strong></p><h3 id="_5-3-æ•°æ®å·æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_5-3-æ•°æ®å·æ¡ˆä¾‹" aria-hidden="true">#</a> 5.3 æ•°æ®å·æ¡ˆä¾‹</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos ~]## docker run -it --privileged=true -v /tmp/host_data:/tmp/docker_data --name=u1 ubuntu
root@2e431ba4f3bf:/## cd /tmp/docker_data/  
root@2e431ba4f3bf:/tmp/docker_data## mkdir test_docker.txt


[root@VM-16-8-centos ~]## cd /tmp/host_data/
[root@VM-16-8-centos host_data]## ll
total 4
drwxr-xr-x 2 root root 4096 Apr  3 16:10 test_docker.txt


[root@VM-16-8-centos host_data]## mkdir test_host.txt
root@2e431ba4f3bf:/tmp/docker_data##  ll
total 16
drwxr-xr-x 4 root root 4096 Apr  3 08:13 ./
drwxrwxrwt 1 root root 4096 Apr  3 08:10 ../
drwxr-xr-x 2 root root 4096 Apr  3 08:10 test_docker.txt/
drwxr-xr-x 2 root root 4096 Apr  3 08:13 test_host.txt/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥å‘ç°ï¼Œå®¹å™¨å·å’ŒæŒ‚è½½åœ¨æœ¬åœ°çš„ç›®å½•å†…å®¹æ˜¯ä¸€è‡´çš„</p><p>æŸ¥çœ‹æ”¹å®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼Œä¹Ÿèƒ½æŸ¥çœ‹åˆ°</p><p>docker inspect imageID</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220403161747230.png" alt="image-20220403161747230" tabindex="0" loading="lazy"><figcaption>image-20220403161747230</figcaption></figure><h3 id="_5-4-å·çš„ç»§æ‰¿" tabindex="-1"><a class="header-anchor" href="#_5-4-å·çš„ç»§æ‰¿" aria-hidden="true">#</a> 5.4 å·çš„ç»§æ‰¿</h3><p>--volumes-from <code>è¦ç»§æ‰¿çš„å®¹å™¨å</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos ~]## docker run -it --privileged=true --volumes-from u1  --name u2 ubuntu
root@de0f937528ac:/## cd /tmp
root@de0f937528ac:/tmp## cd docker_data/
root@de0f937528ac:/tmp/docker_data## ll
total 16
drwxr-xr-x 4 root root 4096 Apr  3 08:13 ./
drwxrwxrwt 1 root root 4096 Apr  3 08:26 ../
drwxr-xr-x 2 root root 4096 Apr  3 08:10 test_docker.txt/
drwxr-xr-x 2 root root 4096 Apr  3 08:13 test_host.txt/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…" aria-hidden="true">#</a> å…­ã€å¸¸ç”¨è½¯ä»¶å®‰è£…</h2><h3 id="_6-1-tomcat" tabindex="-1"><a class="header-anchor" href="#_6-1-tomcat" aria-hidden="true">#</a> 6.1 Tomcat</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos ~]## docker pull tomcat
Using default tag: latest
latest: Pulling from library/tomcat
dbba69284b27: Pull complete 
9baf437a1bad: Pull complete 
6ade5c59e324: Pull complete 
b19a994f6d4c: Pull complete 
43c0aceedb57: Pull complete 
24e7c71ec633: Pull complete 
612cf131e488: Pull complete 
dc655e69dd90: Pull complete 
efe57b7441f6: Pull complete 
8db51a0119f4: Pull complete 
Digest: sha256:263f93ac29cb2dbba4275a4e647b448cb39a66334a6340b94da8bf13bde770aa
Status: Downloaded newer image for tomcat:latest
docker.io/library/tomcat:latest
[root@VM-16-8-centos ~]## docker images
REPOSITORY                       TAG       IMAGE ID       CREATED             SIZE
124.221.228.148:5000/pyyubuntu   1.1       138c010d2c99   About an hour ago   109MB
ubuntu                           1.0       138c010d2c99   About an hour ago   109MB
tomcat                           latest    b00440a36b99   37 hours ago        680MB
registry                         latest    d3241e050fc9   4 days ago          24.2MB
ubuntu                           latest    ff0fea8310f3   2 weeks ago         72.8MB



å¯åŠ¨å¤šä¸ªtomcatå®ä¾‹
docker run -d -p 8081:8080 tomcat
docker run -d -p 8082:8080 tomcat
cp -rf webapps.dist/* webapps

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°ç‰ˆtomcatï¼Œé¦–é¡µä¸åœ¨webappä¸‹äº†</p><blockquote><p>æŠŠwebapps.distç›®å½•æ¢æˆwebapps</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220403164902673.png" alt="image-20220403164902673" tabindex="0" loading="lazy"><figcaption>image-20220403164902673</figcaption></figure><p>å½“ç„¶æˆ‘ä»¬ä¸ä¿®æ”¹ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªéœ€è¦ä¸‹è½½tomcat8å³å¯</p><h4 id="_6-1-1" tabindex="-1"><a class="header-anchor" href="#_6-1-1" aria-hidden="true">#</a> 6.1.1</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">13245</span>:8080  <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span>  /mydata/tomcat/webapps:/usr/local/tomcat/webapps <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> tomcat tomcat:8.5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-mysql" tabindex="-1"><a class="header-anchor" href="#_6-2-mysql" aria-hidden="true">#</a> 6.2 Mysql</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-8-centos ~<span class="token punctuation">]</span><span class="token comment">##  docker run -d -p 3306:3306 --privileged=true -v /pyy/mysql/log:/var/log/mysql -v /pyy/mysql/data:/var/lib/mysql -v /pyy/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=a  --name mysql mysql:5.7</span>
b0fbfe45fce1ef90b4caf946efacbef0e50a425a25dec1d8e15902244e43747b
<span class="token punctuation">[</span>root@VM-16-8-centos ~<span class="token punctuation">]</span><span class="token comment">## docker ps</span>
CONTAINER ID   IMAGE       COMMAND                  CREATED             STATUS             PORTS                    NAMES
b0fbfe45fce1   mysql:5.7   <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">8</span> seconds ago       Up <span class="token number">7</span> seconds       <span class="token number">3306</span>/tcp, <span class="token number">33060</span>/tcp      test-mysql
ce89351d51ec   tomcat      <span class="token string">&quot;catalina.sh run&quot;</span>        <span class="token number">16</span> minutes ago      Up <span class="token number">16</span> minutes      <span class="token number">0.0</span>.0.0:8080-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp   funny_bose
de0f937528ac   ubuntu      <span class="token string">&quot;bash&quot;</span>                   <span class="token number">29</span> minutes ago      Up <span class="token number">29</span> minutes                               u2
2e431ba4f3bf   ubuntu      <span class="token string">&quot;bash&quot;</span>                   <span class="token number">45</span> minutes ago      Up <span class="token number">45</span> minutes                               u1
9dabfdf1b57d   registry    <span class="token string">&quot;/entrypoint.sh /etcâ€¦&quot;</span>   About an hour ago   Up About an hour   <span class="token number">0.0</span>.0.0:5000-<span class="token operator">&gt;</span><span class="token number">5000</span>/tcp   sharp_brown
1f1ed5798baa   ubuntu      <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">6</span> hours ago         Up <span class="token number">47</span> minutes                               vigorous_dewdney
<span class="token punctuation">[</span>root@VM-16-8-centos ~<span class="token punctuation">]</span><span class="token comment">## docker exec -it b0fbfe45fce1 /bin/bash</span>
root@b0fbfe45fce1:/<span class="token comment">## mysql -uroot -pa</span>
mysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> Using a password on the <span class="token builtin class-name">command</span> line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">2</span>
Server version: <span class="token number">5.7</span>.37 MySQL Community Server <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span>

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2022</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">&#39;help;&#39;</span> or <span class="token string">&#39;\h&#39;</span> <span class="token keyword">for</span> help. Type <span class="token string">&#39;\c&#39;</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> create database test_mysql<span class="token punctuation">;</span>
Query OK, <span class="token number">1</span> row affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> use test_mysql<span class="token punctuation">;</span>
Database changed
mysql<span class="token operator">&gt;</span> create table docker_mysql <span class="token punctuation">(</span>id int,name varchar<span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> insert into docker_mysql values<span class="token punctuation">(</span><span class="token number">1</span>,<span class="token string">&#39;zs&#39;</span><span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token number">2</span>,<span class="token string">&#39;ls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">2</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">2</span>  Duplicates: <span class="token number">0</span>  Warnings: <span class="token number">0</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> count<span class="token punctuation">(</span>*<span class="token punctuation">)</span> Sum  from docker_mysql<span class="token punctuation">;</span>
+-----+
<span class="token operator">|</span> Sum <span class="token operator">|</span>
+-----+
<span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>
+-----+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> SHOW VARIABLES LIKE <span class="token string">&#39;character%&#39;</span><span class="token punctuation">;</span>
+--------------------------+----------------------------+
<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> Value                      <span class="token operator">|</span>
+--------------------------+----------------------------+
<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_connection <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_database   <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> binary                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_results    <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_server     <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8                       <span class="token operator">|</span>
<span class="token operator">|</span> character_sets_dir       <span class="token operator">|</span> /usr/share/mysql/charsets/ <span class="token operator">|</span>
+--------------------------+----------------------------+
<span class="token number">8</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>navicatæµ‹è¯•è¿æ¥</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220403171241962.png" alt="image-20220403171241962" tabindex="0" loading="lazy"><figcaption>image-20220403171241962</figcaption></figure><h4 id="_6-2-1-ç¼–ç é—®é¢˜çš„è§£å†³" tabindex="-1"><a class="header-anchor" href="#_6-2-1-ç¼–ç é—®é¢˜çš„è§£å†³" aria-hidden="true">#</a> 6.2.1 ç¼–ç é—®é¢˜çš„è§£å†³</h4><p><strong>æ’å…¥ä¸­æ–‡ä¼šæŠ¥é”™</strong></p><p>åœ¨æœ¬åœ°å†™å¥½my.cnfæ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos conf]## cat my.cnf 
[client]
default_character_set=utf-8
[mysqld]
collation_server=utf8_general_ci
character_set_server=utf8
[root@VM-16-8-centos conf]## pwd
/pyy/mysql/conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°å¯åŠ¨mysqlå®¹å™¨å®ä¾‹å†é‡æ–°è¿›å…¥å¹¶æŸ¥çœ‹å­—ç¬¦ç¼–ç </p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404143900870.png" alt="image-20220404143900870" tabindex="0" loading="lazy"><figcaption>image-20220404143900870</figcaption></figure><h3 id="_6-3-redis" tabindex="-1"><a class="header-anchor" href="#_6-3-redis" aria-hidden="true">#</a> 6.3 Redis</h3><p>å¤åˆ¶ä¸€ä»½å¥½çš„redisé…ç½®æ–‡ä»¶ï¼Œ</p><h4 id="_6-3-1-redisé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_6-3-1-redisé…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 6.3.1 Redisé…ç½®æ–‡ä»¶</h4><blockquote><p>å¼€å¯rediséªŒè¯ å¯é€‰ requirepass 123</p><p>å…è®¸rediså¤–åœ°è¿æ¥ å¿…é¡» æ³¨é‡Šæ‰ ## bind 127.0.0.1</p><p>daemonize no å°†daemonize yesæ³¨é‡Šèµ·æ¥æˆ–è€… daemonize noè®¾ç½®ï¼Œå› ä¸ºè¯¥é…ç½®å’Œdocker runä¸­-då‚æ•°å†²çªï¼Œä¼šå¯¼è‡´å®¹å™¨ä¸€ç›´å¯åŠ¨å¤±è´¥</p><p>å¼€å¯redisæ•°æ®æŒä¹…åŒ– appendonly yes å¯é€‰</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-8-centos ~<span class="token punctuation">]</span><span class="token comment">## cat /app/redis/redis.conf </span>
<span class="token comment">## redis configuration file example.</span>
 
<span class="token comment">####### Main configuration start #######</span>
 
<span class="token comment">##æ³¨é‡Šæ‰bind 127.0.0.1ï¼Œä½¿rediså¯ä»¥å¤–éƒ¨è®¿é—®</span>
<span class="token comment">##bind 127.0.0.1</span>
 
<span class="token comment">## ç«¯å£å·</span>
port <span class="token number">6379</span>
 
<span class="token comment">##ç»™redisè®¾ç½®å¯†ç </span>
requirepass redis123
 
<span class="token comment">###redisæŒä¹…åŒ–ã€€ã€€é»˜è®¤æ˜¯no</span>
appendonly <span class="token function">yes</span>
 
<span class="token comment">##å¼€å¯protected-modeä¿æŠ¤æ¨¡å¼ï¼Œéœ€é…ç½®bind ipæˆ–è€…è®¾ç½®è®¿é—®å¯†ç </span>
<span class="token comment">##å…³é—­protected-modeæ¨¡å¼ï¼Œæ­¤æ—¶å¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æ¥è®¿é—®</span>
protected-mode no
 
<span class="token comment">##æ˜¯å¦å¼€å¯é›†ç¾¤</span>
<span class="token comment">##cluster-enabled no</span>
 
<span class="token comment">##é›†ç¾¤çš„é…ç½®æ–‡ä»¶,è¯¥æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ</span>
<span class="token comment">##cluster-config-file nodes.conf</span>
 
<span class="token comment">##é›†ç¾¤çš„è¶…æ—¶æ—¶é—´</span>
<span class="token comment">##cluster-node-timeout 5000</span>
 
<span class="token comment">##ç”¨å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨</span>
daemonize no   
 
<span class="token comment">##é˜²æ­¢å‡ºç°è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥çš„é”™è¯¯ é»˜è®¤æ˜¯300</span>
tcp-keepalive <span class="token number">300</span>
 
<span class="token comment">####### Main configuration end #######</span>
 
<span class="token function">timeout</span> <span class="token number">0</span>
 
tcp-backlog <span class="token number">511</span>
 
<span class="token comment">## Note: these supervision methods only signal &quot;process is ready.&quot;</span>
<span class="token comment">##       They do not enable continuous liveness pings back to your supervisor.</span>
supervised no
 
<span class="token comment">## If a pid file is specified, Redis writes it where specified at startup</span>
<span class="token comment">## and removes it at exit.</span>
<span class="token comment">##</span>
<span class="token comment">## When the server runs non daemonized, no pid file is created if none is</span>
<span class="token comment">## specified in the configuration. When the server is daemonized, the pid file</span>
<span class="token comment">## is used even if not specified, defaulting to &quot;/var/run/redis.pid&quot;.</span>
<span class="token comment">##</span>
<span class="token comment">## Creating a pid file is best effort: if Redis is not able to create it</span>
<span class="token comment">## nothing bad happens, the server will start and run normally.</span>
pidfile /var/run/redis_6379.pid
 
<span class="token comment">## Specify the server verbosity level.</span>
<span class="token comment">## This can be one of:</span>
<span class="token comment">## debug (a lot of information, useful for development/testing)</span>
<span class="token comment">## verbose (many rarely useful info, but not a mess like the debug level)</span>
<span class="token comment">## notice (moderately verbose, what you want in production probably)</span>
<span class="token comment">## warning (only very important / critical messages are logged)</span>
loglevel notice
 
<span class="token comment">## Specify the log file name. Also the empty string can be used to force</span>
<span class="token comment">## Redis to log on the standard output. Note that if you use standard</span>
<span class="token comment">## output for logging but daemonize, logs will be sent to /dev/null</span>
logfile <span class="token string">&quot;&quot;</span>
 
<span class="token comment">## To enable logging to the system logger, just set &#39;syslog-enabled&#39; to yes,</span>
<span class="token comment">## and optionally update the other syslog parameters to suit your needs.</span>
<span class="token comment">## syslog-enabled no</span>
 
<span class="token comment">## Specify the syslog identity.</span>
<span class="token comment">## syslog-ident redis</span>
 
<span class="token comment">## Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span>
<span class="token comment">## syslog-facility local0</span>
 
<span class="token comment">## Set the number of databases. The default database is DB 0, you can select</span>
<span class="token comment">## a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span>
<span class="token comment">## dbid is a number between 0 and &#39;databases&#39;-1</span>
databases <span class="token number">16</span>
 
<span class="token comment">## By default Redis shows an ASCII art logo only when started to log to the</span>
<span class="token comment">## standard output and if the standard output is a TTY. Basically this means</span>
<span class="token comment">## that normally a logo is displayed only in interactive sessions.</span>
<span class="token comment">##</span>
<span class="token comment">## However it is possible to force the pre-4.0 behavior and always show a</span>
<span class="token comment">## ASCII art logo in startup logs by setting the following option to yes.</span>
always-show-logo <span class="token function">yes</span>
 
<span class="token comment">################################ SNAPSHOTTING  ################################</span>
<span class="token comment">##</span>
<span class="token comment">## Save the DB on disk:</span>
<span class="token comment">##</span>
<span class="token comment">##   save &lt;seconds&gt; &lt;changes&gt;</span>
<span class="token comment">##</span>
<span class="token comment">##   Will save the DB if both the given number of seconds and the given</span>
<span class="token comment">##   number of write operations against the DB occurred.</span>
<span class="token comment">##</span>
<span class="token comment">##   In the example below the behaviour will be to save:</span>
<span class="token comment">##   after 900 sec (15 min) if at least 1 key changed</span>
<span class="token comment">##   after 300 sec (5 min) if at least 10 keys changed</span>
<span class="token comment">##   after 60 sec if at least 10000 keys changed</span>
<span class="token comment">##</span>
<span class="token comment">##   Note: you can disable saving completely by commenting out all &quot;save&quot; lines.</span>
<span class="token comment">##</span>
<span class="token comment">##   It is also possible to remove all the previously configured save</span>
<span class="token comment">##   points by adding a save directive with a single empty string argument</span>
<span class="token comment">##   like in the following example:</span>
<span class="token comment">##</span>
<span class="token comment">##   save &quot;&quot;</span>
 
save <span class="token number">900</span> <span class="token number">1</span>
save <span class="token number">300</span> <span class="token number">10</span>
save <span class="token number">60</span> <span class="token number">10000</span>
 
<span class="token comment">## By default Redis will stop accepting writes if RDB snapshots are enabled</span>
<span class="token comment">## (at least one save point) and the latest background save failed.</span>
<span class="token comment">## This will make the user aware (in a hard way) that data is not persisting</span>
<span class="token comment">## on disk properly, otherwise chances are that no one will notice and some</span>
<span class="token comment">## disaster will happen.</span>
<span class="token comment">##</span>
<span class="token comment">## If the background saving process will start working again Redis will</span>
<span class="token comment">## automatically allow writes again.</span>
<span class="token comment">##</span>
<span class="token comment">## However if you have setup your proper monitoring of the Redis server</span>
<span class="token comment">## and persistence, you may want to disable this feature so that Redis will</span>
<span class="token comment">## continue to work as usual even if there are problems with disk,</span>
<span class="token comment">## permissions, and so forth.</span>
stop-writes-on-bgsave-error <span class="token function">yes</span>
 
<span class="token comment">## Compress string objects using LZF when dump .rdb databases?</span>
<span class="token comment">## For default that&#39;s set to &#39;yes&#39; as it&#39;s almost always a win.</span>
<span class="token comment">## If you want to save some CPU in the saving child set it to &#39;no&#39; but</span>
<span class="token comment">## the dataset will likely be bigger if you have compressible values or keys.</span>
rdbcompression <span class="token function">yes</span>
 
<span class="token comment">## Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</span>
<span class="token comment">## This makes the format more resistant to corruption but there is a performance</span>
<span class="token comment">## hit to pay (around 10%) when saving and loading RDB files, so you can disable it</span>
<span class="token comment">## for maximum performances.</span>
<span class="token comment">##</span>
<span class="token comment">## RDB files created with checksum disabled have a checksum of zero that will</span>
<span class="token comment">## tell the loading code to skip the check.</span>
rdbchecksum <span class="token function">yes</span>
 
<span class="token comment">## The filename where to dump the DB</span>
dbfilename dump.rdb
 
<span class="token comment">## Remove RDB files used by replication in instances without persistence</span>
<span class="token comment">## enabled. By default this option is disabled, however there are environments</span>
<span class="token comment">## where for regulations or other security concerns, RDB files persisted on</span>
<span class="token comment">## disk by masters in order to feed replicas, or stored on disk by replicas</span>
<span class="token comment">## in order to load them for the initial synchronization, should be deleted</span>
<span class="token comment">## ASAP. Note that this option ONLY WORKS in instances that have both AOF</span>
<span class="token comment">## and RDB persistence disabled, otherwise is completely ignored.</span>
<span class="token comment">##</span>
<span class="token comment">## An alternative (and sometimes better) way to obtain the same effect is</span>
<span class="token comment">## to use diskless replication on both master and replicas instances. However</span>
<span class="token comment">## in the case of replicas, diskless is not always an option.</span>
rdb-del-sync-files no
 
<span class="token comment">## The working directory.</span>
<span class="token comment">##</span>
<span class="token comment">## The DB will be written inside this directory, with the filename specified</span>
<span class="token comment">## above using the &#39;dbfilename&#39; configuration directive.</span>
<span class="token comment">##</span>
<span class="token comment">## The Append Only File will also be created inside this directory.</span>
<span class="token comment">##</span>
<span class="token comment">## Note that you must specify a directory here, not a file name.</span>
<span class="token function">dir</span> ./
 
 
<span class="token comment">## When a replica loses its connection with the master, or when the replication</span>
<span class="token comment">## is still in progress, the replica can act in two different ways:</span>
<span class="token comment">##</span>
<span class="token comment">## 1) if replica-serve-stale-data is set to &#39;yes&#39; (the default) the replica will</span>
<span class="token comment">##    still reply to client requests, possibly with out of date data, or the</span>
<span class="token comment">##    data set may just be empty if this is the first synchronization.</span>
<span class="token comment">##</span>
<span class="token comment">## 2) if replica-serve-stale-data is set to &#39;no&#39; the replica will reply with</span>
<span class="token comment">##    an error &quot;SYNC with master in progress&quot; to all the kind of commands</span>
<span class="token comment">##    but to INFO, replicaOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG,</span>
<span class="token comment">##    SUBSCRIBE, UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB,</span>
<span class="token comment">##    COMMAND, POST, HOST: and LATENCY.</span>
<span class="token comment">##</span>
replica-serve-stale-data <span class="token function">yes</span>
 
<span class="token comment">## You can configure a replica instance to accept writes or not. Writing against</span>
<span class="token comment">## a replica instance may be useful to store some ephemeral data (because data</span>
<span class="token comment">## written on a replica will be easily deleted after resync with the master) but</span>
<span class="token comment">## may also cause problems if clients are writing to it because of a</span>
<span class="token comment">## misconfiguration.</span>
<span class="token comment">##</span>
<span class="token comment">## Since Redis 2.6 by default replicas are read-only.</span>
<span class="token comment">##</span>
<span class="token comment">## Note: read only replicas are not designed to be exposed to untrusted clients</span>
<span class="token comment">## on the internet. It&#39;s just a protection layer against misuse of the instance.</span>
<span class="token comment">## Still a read only replica exports by default all the administrative commands</span>
<span class="token comment">## such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span>
<span class="token comment">## security of read only replicas using &#39;rename-command&#39; to shadow all the</span>
<span class="token comment">## administrative / dangerous commands.</span>
replica-read-only <span class="token function">yes</span>
 
 
<span class="token comment">## When diskless replication is used, the master waits a configurable amount of</span>
<span class="token comment">## time (in seconds) before starting the transfer in the hope that multiple</span>
<span class="token comment">## replicas will arrive and the transfer can be parallelized.</span>
<span class="token comment">##</span>
<span class="token comment">## With slow disks and fast (large bandwidth) networks, diskless replication</span>
<span class="token comment">## works better.</span>
repl-diskless-sync no
 
<span class="token comment">## When diskless replication is enabled, it is possible to configure the delay</span>
<span class="token comment">## the server waits in order to spawn the child that transfers the RDB via socket</span>
<span class="token comment">## to the replicas.</span>
<span class="token comment">##</span>
<span class="token comment">## This is important since once the transfer starts, it is not possible to serve</span>
<span class="token comment">## new replicas arriving, that will be queued for the next RDB transfer, so the</span>
<span class="token comment">## server waits a delay in order to let more replicas arrive.</span>
<span class="token comment">##</span>
<span class="token comment">## The delay is specified in seconds, and by default is 5 seconds. To disable</span>
<span class="token comment">## it entirely just set it to 0 seconds and the transfer will start ASAP.</span>
repl-diskless-sync-delay <span class="token number">5</span>
 
 
<span class="token comment">## In many cases the disk is slower than the network, and storing and loading</span>
<span class="token comment">## the RDB file may increase replication time (and even increase the master&#39;s</span>
<span class="token comment">## Copy on Write memory and salve buffers).</span>
<span class="token comment">## However, parsing the RDB file directly from the socket may mean that we have</span>
<span class="token comment">## to flush the contents of the current database before the full rdb was</span>
<span class="token comment">## received. For this reason we have the following options:</span>
<span class="token comment">##</span>
<span class="token comment">## &quot;disabled&quot;    - Don&#39;t use diskless load (store the rdb file to the disk first)</span>
<span class="token comment">## &quot;on-empty-db&quot; - Use diskless load only when it is completely safe.</span>
<span class="token comment">## &quot;swapdb&quot;      - Keep a copy of the current db contents in RAM while parsing</span>
<span class="token comment">##                 the data directly from the socket. note that this requires</span>
<span class="token comment">##                 sufficient memory, if you don&#39;t have it, you risk an OOM kill.</span>
repl-diskless-load disabled
 
 
<span class="token comment">## Disable TCP_NODELAY on the replica socket after SYNC?</span>
<span class="token comment">##</span>
<span class="token comment">## If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span>
<span class="token comment">## less bandwidth to send data to replicas. But this can add a delay for</span>
<span class="token comment">## the data to appear on the replica side, up to 40 milliseconds with</span>
<span class="token comment">## Linux kernels using a default configuration.</span>
<span class="token comment">##</span>
<span class="token comment">## If you select &quot;no&quot; the delay for data to appear on the replica side will</span>
<span class="token comment">## be reduced but more bandwidth will be used for replication.</span>
<span class="token comment">##</span>
<span class="token comment">## By default we optimize for low latency, but in very high traffic conditions</span>
<span class="token comment">## or when the master and replicas are many hops away, turning this to &quot;yes&quot; may</span>
<span class="token comment">## be a good idea.</span>
repl-disable-tcp-nodelay no
 
 
<span class="token comment">## The replica priority is an integer number published by Redis in the INFO</span>
<span class="token comment">## output. It is used by Redis Sentinel in order to select a replica to promote</span>
<span class="token comment">## into a master if the master is no longer working correctly.</span>
<span class="token comment">##</span>
<span class="token comment">## A replica with a low priority number is considered better for promotion, so</span>
<span class="token comment">## for instance if there are three replicas with priority 10, 100, 25 Sentinel</span>
<span class="token comment">## will pick the one with priority 10, that is the lowest.</span>
<span class="token comment">##</span>
<span class="token comment">## However a special priority of 0 marks the replica as not able to perform the</span>
<span class="token comment">## role of master, so a replica with priority of 0 will never be selected by</span>
<span class="token comment">## Redis Sentinel for promotion.</span>
<span class="token comment">##</span>
<span class="token comment">## By default the priority is 100.</span>
replica-priority <span class="token number">100</span>
 
 
<span class="token comment">## ACL LOG</span>
<span class="token comment">##</span>
<span class="token comment">## The ACL Log tracks failed commands and authentication events associated</span>
<span class="token comment">## with ACLs. The ACL Log is useful to troubleshoot failed commands blocked </span>
<span class="token comment">## by ACLs. The ACL Log is stored in memory. You can reclaim memory with </span>
<span class="token comment">## ACL LOG RESET. Define the maximum entry length of the ACL Log below.</span>
acllog-max-len <span class="token number">128</span>
 
<span class="token comment">## Using an external ACL file</span>
<span class="token comment">##</span>
<span class="token comment">## Instead of configuring users here in this file, it is possible to use</span>
<span class="token comment">## a stand-alone file just listing users. The two methods cannot be mixed:</span>
<span class="token comment">## if you configure users here and at the same time you activate the exteranl</span>
<span class="token comment">## ACL file, the server will refuse to start.</span>
<span class="token comment">##</span>
<span class="token comment">## The format of the external ACL user file is exactly the same as the</span>
<span class="token comment">## format that is used inside redis.conf to describe users.</span>
<span class="token comment">##</span>
<span class="token comment">## aclfile /etc/redis/users.acl</span>
 
 
<span class="token comment">## Command renaming (DEPRECATED).</span>
<span class="token comment">##</span>
<span class="token comment">## ------------------------------------------------------------------------</span>
<span class="token comment">## WARNING: avoid using this option if possible. Instead use ACLs to remove</span>
<span class="token comment">## commands from the default user, and put them only in some admin user you</span>
<span class="token comment">## create for administrative purposes.</span>
<span class="token comment">## ------------------------------------------------------------------------</span>
<span class="token comment">##</span>
<span class="token comment">## It is possible to change the name of dangerous commands in a shared</span>
<span class="token comment">## environment. For instance the CONFIG command may be renamed into something</span>
<span class="token comment">## hard to guess so that it will still be available for internal-use tools</span>
<span class="token comment">## but not available for general clients.</span>
<span class="token comment">##</span>
<span class="token comment">## Example:</span>
<span class="token comment">##</span>
<span class="token comment">## rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>
<span class="token comment">##</span>
<span class="token comment">## It is also possible to completely kill a command by renaming it into</span>
<span class="token comment">## an empty string:</span>
<span class="token comment">##</span>
<span class="token comment">## rename-command CONFIG &quot;&quot;</span>
<span class="token comment">##</span>
<span class="token comment">## Please note that changing the name of commands that are logged into the</span>
<span class="token comment">## AOF file or transmitted to replicas may cause problems.</span>
 
<span class="token comment">################################### CLIENTS ####################################</span>
 
<span class="token comment">## Set the max number of connected clients at the same time. By default</span>
<span class="token comment">## this limit is set to 10000 clients, however if the Redis server is not</span>
<span class="token comment">## able to configure the process file limit to allow for the specified limit</span>
<span class="token comment">## the max number of allowed clients is set to the current file limit</span>
<span class="token comment">## minus 32 (as Redis reserves a few file descriptors for internal uses).</span>
<span class="token comment">##</span>
<span class="token comment">## Once the limit is reached Redis will close all the new connections sending</span>
<span class="token comment">## an error &#39;max number of clients reached&#39;.</span>
<span class="token comment">##</span>
<span class="token comment">## IMPORTANT: When Redis Cluster is used, the max number of connections is also</span>
<span class="token comment">## shared with the cluster bus: every node in the cluster will use two</span>
<span class="token comment">## connections, one incoming and another outgoing. It is important to size the</span>
<span class="token comment">## limit accordingly in case of very large clusters.</span>
<span class="token comment">##</span>
<span class="token comment">## maxclients 10000</span>
 
<span class="token comment">############################## MEMORY MANAGEMENT ################################</span>
 
<span class="token comment">## Set a memory usage limit to the specified amount of bytes.</span>
<span class="token comment">## When the memory limit is reached Redis will try to remove keys</span>
<span class="token comment">## according to the eviction policy selected (see maxmemory-policy).</span>
<span class="token comment">##</span>
<span class="token comment">## If Redis can&#39;t remove keys according to the policy, or if the policy is</span>
<span class="token comment">## set to &#39;noeviction&#39;, Redis will start to reply with errors to commands</span>
<span class="token comment">## that would use more memory, like SET, LPUSH, and so on, and will continue</span>
<span class="token comment">## to reply to read-only commands like GET.</span>
<span class="token comment">##</span>
<span class="token comment">## This option is usually useful when using Redis as an LRU or LFU cache, or to</span>
<span class="token comment">## set a hard memory limit for an instance (using the &#39;noeviction&#39; policy).</span>
<span class="token comment">##</span>
<span class="token comment">## WARNING: If you have replicas attached to an instance with maxmemory on,</span>
<span class="token comment">## the size of the output buffers needed to feed the replicas are subtracted</span>
<span class="token comment">## from the used memory count, so that network problems / resyncs will</span>
<span class="token comment">## not trigger a loop where keys are evicted, and in turn the output</span>
<span class="token comment">## buffer of replicas is full with DELs of keys evicted triggering the deletion</span>
<span class="token comment">## of more keys, and so forth until the database is completely emptied.</span>
<span class="token comment">##</span>
<span class="token comment">## In short... if you have replicas attached it is suggested that you set a lower</span>
<span class="token comment">## limit for maxmemory so that there is some free RAM on the system for replica</span>
<span class="token comment">## output buffers (but this is not needed if the policy is &#39;noeviction&#39;).</span>
<span class="token comment">##</span>
<span class="token comment">## maxmemory &lt;bytes&gt;</span>
 
<span class="token comment">## MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span>
<span class="token comment">## is reached. You can select one from the following behaviors:</span>
<span class="token comment">##</span>
<span class="token comment">## volatile-lru -&gt; Evict using approximated LRU, only keys with an expire set.</span>
<span class="token comment">## allkeys-lru -&gt; Evict any key using approximated LRU.</span>
<span class="token comment">## volatile-lfu -&gt; Evict using approximated LFU, only keys with an expire set.</span>
<span class="token comment">## allkeys-lfu -&gt; Evict any key using approximated LFU.</span>
<span class="token comment">## volatile-random -&gt; Remove a random key having an expire set.</span>
<span class="token comment">## allkeys-random -&gt; Remove a random key, any key.</span>
<span class="token comment">## volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)</span>
<span class="token comment">## noeviction -&gt; Don&#39;t evict anything, just return an error on write operations.</span>
<span class="token comment">##</span>
<span class="token comment">## LRU means Least Recently Used</span>
<span class="token comment">## LFU means Least Frequently Used</span>
<span class="token comment">##</span>
<span class="token comment">## Both LRU, LFU and volatile-ttl are implemented using approximated</span>
<span class="token comment">## randomized algorithms.</span>
<span class="token comment">##</span>
<span class="token comment">## Note: with any of the above policies, Redis will return an error on write</span>
<span class="token comment">##       operations, when there are no suitable keys for eviction.</span>
<span class="token comment">##</span>
<span class="token comment">##       At the date of writing these commands are: set setnx setex append</span>
<span class="token comment">##       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span>
<span class="token comment">##       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span>
<span class="token comment">##       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span>
<span class="token comment">##       getset mset msetnx exec sort</span>
<span class="token comment">##</span>
<span class="token comment">## The default is:</span>
<span class="token comment">##</span>
<span class="token comment">## maxmemory-policy noeviction</span>
 
<span class="token comment">## LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated</span>
<span class="token comment">## algorithms (in order to save memory), so you can tune it for speed or</span>
<span class="token comment">## accuracy. For default Redis will check five keys and pick the one that was</span>
<span class="token comment">## used less recently, you can change the sample size using the following</span>
<span class="token comment">## configuration directive.</span>
<span class="token comment">##</span>
<span class="token comment">## The default of 5 produces good enough results. 10 Approximates very closely</span>
<span class="token comment">## true LRU but costs more CPU. 3 is faster but not very accurate.</span>
<span class="token comment">##</span>
<span class="token comment">## maxmemory-samples 5</span>
 
<span class="token comment">## Starting from Redis 5, by default a replica will ignore its maxmemory setting</span>
<span class="token comment">## (unless it is promoted to master after a failover or manually). It means</span>
<span class="token comment">## that the eviction of keys will be just handled by the master, sending the</span>
<span class="token comment">## DEL commands to the replica as keys evict in the master side.</span>
<span class="token comment">##</span>
<span class="token comment">## This behavior ensures that masters and replicas stay consistent, and is usually</span>
<span class="token comment">## what you want, however if your replica is writable, or you want the replica</span>
<span class="token comment">## to have a different memory setting, and you are sure all the writes performed</span>
<span class="token comment">## to the replica are idempotent, then you may change this default (but be sure</span>
<span class="token comment">## to understand what you are doing).</span>
<span class="token comment">##</span>
<span class="token comment">## Note that since the replica by default does not evict, it may end using more</span>
<span class="token comment">## memory than the one set via maxmemory (there are certain buffers that may</span>
<span class="token comment">## be larger on the replica, or data structures may sometimes take more memory</span>
<span class="token comment">## and so forth). So make sure you monitor your replicas and make sure they</span>
<span class="token comment">## have enough memory to never hit a real out-of-memory condition before the</span>
<span class="token comment">## master hits the configured maxmemory setting.</span>
<span class="token comment">##</span>
<span class="token comment">## replica-ignore-maxmemory yes</span>
 
<span class="token comment">## Redis reclaims expired keys in two ways: upon access when those keys are</span>
<span class="token comment">## found to be expired, and also in background, in what is called the</span>
<span class="token comment">## &quot;active expire key&quot;. The key space is slowly and interactively scanned</span>
<span class="token comment">## looking for expired keys to reclaim, so that it is possible to free memory</span>
<span class="token comment">## of keys that are expired and will never be accessed again in a short time.</span>
<span class="token comment">##</span>
<span class="token comment">## The default effort of the expire cycle will try to avoid having more than</span>
<span class="token comment">## ten percent of expired keys still in memory, and will try to avoid consuming</span>
<span class="token comment">## more than 25% of total memory and to add latency to the system. However</span>
<span class="token comment">## it is possible to increase the expire &quot;effort&quot; that is normally set to</span>
<span class="token comment">## &quot;1&quot;, to a greater value, up to the value &quot;10&quot;. At its maximum value the</span>
<span class="token comment">## system will use more CPU, longer cycles (and technically may introduce</span>
<span class="token comment">## more latency), and will tollerate less already expired keys still present</span>
<span class="token comment">## in the system. It&#39;s a tradeoff betweeen memory, CPU and latecy.</span>
<span class="token comment">##</span>
<span class="token comment">## active-expire-effort 1</span>
 
<span class="token comment">############################# LAZY FREEING ####################################</span>
 
<span class="token comment">## Redis has two primitives to delete keys. One is called DEL and is a blocking</span>
<span class="token comment">## deletion of the object. It means that the server stops processing new commands</span>
<span class="token comment">## in order to reclaim all the memory associated with an object in a synchronous</span>
<span class="token comment">## way. If the key deleted is associated with a small object, the time needed</span>
<span class="token comment">## in order to execute the DEL command is very small and comparable to most other</span>
<span class="token comment">## O(1) or O(log_N) commands in Redis. However if the key is associated with an</span>
<span class="token comment">## aggregated value containing millions of elements, the server can block for</span>
<span class="token comment">## a long time (even seconds) in order to complete the operation.</span>
<span class="token comment">##</span>
<span class="token comment">## For the above reasons Redis also offers non blocking deletion primitives</span>
<span class="token comment">## such as UNLINK (non blocking DEL) and the ASYNC option of FLUSHALL and</span>
<span class="token comment">## FLUSHDB commands, in order to reclaim memory in background. Those commands</span>
<span class="token comment">## are executed in constant time. Another thread will incrementally free the</span>
<span class="token comment">## object in the background as fast as possible.</span>
<span class="token comment">##</span>
<span class="token comment">## DEL, UNLINK and ASYNC option of FLUSHALL and FLUSHDB are user-controlled.</span>
<span class="token comment">## It&#39;s up to the design of the application to understand when it is a good</span>
<span class="token comment">## idea to use one or the other. However the Redis server sometimes has to</span>
<span class="token comment">## delete keys or flush the whole database as a side effect of other operations.</span>
<span class="token comment">## Specifically Redis deletes objects independently of a user call in the</span>
<span class="token comment">## following scenarios:</span>
<span class="token comment">##</span>
<span class="token comment">## 1) On eviction, because of the maxmemory and maxmemory policy configurations,</span>
<span class="token comment">##    in order to make room for new data, without going over the specified</span>
<span class="token comment">##    memory limit.</span>
<span class="token comment">## 2) Because of expire: when a key with an associated time to live (see the</span>
<span class="token comment">##    EXPIRE command) must be deleted from memory.</span>
<span class="token comment">## 3) Because of a side effect of a command that stores data on a key that may</span>
<span class="token comment">##    already exist. For example the RENAME command may delete the old key</span>
<span class="token comment">##    content when it is replaced with another one. Similarly SUNIONSTORE</span>
<span class="token comment">##    or SORT with STORE option may delete existing keys. The SET command</span>
<span class="token comment">##    itself removes any old content of the specified key in order to replace</span>
<span class="token comment">##    it with the specified string.</span>
<span class="token comment">## 4) During replication, when a replica performs a full resynchronization with</span>
<span class="token comment">##    its master, the content of the whole database is removed in order to</span>
<span class="token comment">##    load the RDB file just transferred.</span>
<span class="token comment">##</span>
<span class="token comment">## In all the above cases the default is to delete objects in a blocking way,</span>
<span class="token comment">## like if DEL was called. However you can configure each case specifically</span>
<span class="token comment">## in order to instead release memory in a non-blocking way like if UNLINK</span>
<span class="token comment">## was called, using the following configuration directives.</span>
 
lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
replica-lazy-flush no
 
<span class="token comment">## It is also possible, for the case when to replace the user code DEL calls</span>
<span class="token comment">## with UNLINK calls is not easy, to modify the default behavior of the DEL</span>
<span class="token comment">## command to act exactly like UNLINK, using the following configuration</span>
<span class="token comment">## directive:</span>
 
lazyfree-lazy-user-del no
 
 
 
<span class="token comment">## The name of the append only file (default: &quot;appendonly.aof&quot;)</span>
 
appendfilename <span class="token string">&quot;appendonly.aof&quot;</span>
 
<span class="token comment">## The fsync() call tells the Operating System to actually write data on disk</span>
<span class="token comment">## instead of waiting for more data in the output buffer. Some OS will really flush</span>
<span class="token comment">## data on disk, some other OS will just try to do it ASAP.</span>
<span class="token comment">##</span>
<span class="token comment">## Redis supports three different modes:</span>
<span class="token comment">##</span>
<span class="token comment">## no: don&#39;t fsync, just let the OS flush the data when it wants. Faster.</span>
<span class="token comment">## always: fsync after every write to the append only log. Slow, Safest.</span>
<span class="token comment">## everysec: fsync only one time every second. Compromise.</span>
<span class="token comment">##</span>
<span class="token comment">## The default is &quot;everysec&quot;, as that&#39;s usually the right compromise between</span>
<span class="token comment">## speed and data safety. It&#39;s up to you to understand if you can relax this to</span>
<span class="token comment">## &quot;no&quot; that will let the operating system flush the output buffer when</span>
<span class="token comment">## it wants, for better performances (but if you can live with the idea of</span>
<span class="token comment">## some data loss consider the default persistence mode that&#39;s snapshotting),</span>
<span class="token comment">## or on the contrary, use &quot;always&quot; that&#39;s very slow but a bit safer than</span>
<span class="token comment">## everysec.</span>
<span class="token comment">##</span>
<span class="token comment">## More details please check the following article:</span>
<span class="token comment">## http://antirez.com/post/redis-persistence-demystified.html</span>
<span class="token comment">##</span>
<span class="token comment">## If unsure, use &quot;everysec&quot;.</span>
 
<span class="token comment">## appendfsync always</span>
appendfsync everysec
<span class="token comment">## appendfsync no</span>
 
<span class="token comment">## When the AOF fsync policy is set to always or everysec, and a background</span>
<span class="token comment">## saving process (a background save or AOF log background rewriting) is</span>
<span class="token comment">## performing a lot of I/O against the disk, in some Linux configurations</span>
<span class="token comment">## Redis may block too long on the fsync() call. Note that there is no fix for</span>
<span class="token comment">## this currently, as even performing fsync in a different thread will block</span>
<span class="token comment">## our synchronous write(2) call.</span>
<span class="token comment">##</span>
<span class="token comment">## In order to mitigate this problem it&#39;s possible to use the following option</span>
<span class="token comment">## that will prevent fsync() from being called in the main process while a</span>
<span class="token comment">## BGSAVE or BGREWRITEAOF is in progress.</span>
<span class="token comment">##</span>
<span class="token comment">## This means that while another child is saving, the durability of Redis is</span>
<span class="token comment">## the same as &quot;appendfsync none&quot;. In practical terms, this means that it is</span>
<span class="token comment">## possible to lose up to 30 seconds of log in the worst scenario (with the</span>
<span class="token comment">## default Linux settings).</span>
<span class="token comment">##</span>
<span class="token comment">## If you have latency problems turn this to &quot;yes&quot;. Otherwise leave it as</span>
<span class="token comment">## &quot;no&quot; that is the safest pick from the point of view of durability.</span>
 
no-appendfsync-on-rewrite no
 
<span class="token comment">## Automatic rewrite of the append only file.</span>
<span class="token comment">## Redis is able to automatically rewrite the log file implicitly calling</span>
<span class="token comment">## BGREWRITEAOF when the AOF log size grows by the specified percentage.</span>
<span class="token comment">##</span>
<span class="token comment">## This is how it works: Redis remembers the size of the AOF file after the</span>
<span class="token comment">## latest rewrite (if no rewrite has happened since the restart, the size of</span>
<span class="token comment">## the AOF at startup is used).</span>
<span class="token comment">##</span>
<span class="token comment">## This base size is compared to the current size. If the current size is</span>
<span class="token comment">## bigger than the specified percentage, the rewrite is triggered. Also</span>
<span class="token comment">## you need to specify a minimal size for the AOF file to be rewritten, this</span>
<span class="token comment">## is useful to avoid rewriting the AOF file even if the percentage increase</span>
<span class="token comment">## is reached but it is still pretty small.</span>
<span class="token comment">##</span>
<span class="token comment">## Specify a percentage of zero in order to disable the automatic AOF</span>
<span class="token comment">## rewrite feature.</span>
 
auto-aof-rewrite-percentage <span class="token number">100</span>
auto-aof-rewrite-min-size 64mb
 
<span class="token comment">## An AOF file may be found to be truncated at the end during the Redis</span>
<span class="token comment">## startup process, when the AOF data gets loaded back into memory.</span>
<span class="token comment">## This may happen when the system where Redis is running</span>
<span class="token comment">## crashes, especially when an ext4 filesystem is mounted without the</span>
<span class="token comment">## data=ordered option (however this can&#39;t happen when Redis itself</span>
<span class="token comment">## crashes or aborts but the operating system still works correctly).</span>
<span class="token comment">##</span>
<span class="token comment">## Redis can either exit with an error when this happens, or load as much</span>
<span class="token comment">## data as possible (the default now) and start if the AOF file is found</span>
<span class="token comment">## to be truncated at the end. The following option controls this behavior.</span>
<span class="token comment">##</span>
<span class="token comment">## If aof-load-truncated is set to yes, a truncated AOF file is loaded and</span>
<span class="token comment">## the Redis server starts emitting a log to inform the user of the event.</span>
<span class="token comment">## Otherwise if the option is set to no, the server aborts with an error</span>
<span class="token comment">## and refuses to start. When the option is set to no, the user requires</span>
<span class="token comment">## to fix the AOF file using the &quot;redis-check-aof&quot; utility before to restart</span>
<span class="token comment">## the server.</span>
<span class="token comment">##</span>
<span class="token comment">## Note that if the AOF file will be found to be corrupted in the middle</span>
<span class="token comment">## the server will still exit with an error. This option only applies when</span>
<span class="token comment">## Redis will try to read more data from the AOF file but not enough bytes</span>
<span class="token comment">## will be found.</span>
aof-load-truncated <span class="token function">yes</span>
 
<span class="token comment">## When rewriting the AOF file, Redis is able to use an RDB preamble in the</span>
<span class="token comment">## AOF file for faster rewrites and recoveries. When this option is turned</span>
<span class="token comment">## on the rewritten AOF file is composed of two different stanzas:</span>
<span class="token comment">##</span>
<span class="token comment">##   [RDB file][AOF tail]</span>
<span class="token comment">##</span>
<span class="token comment">## When loading Redis recognizes that the AOF file starts with the &quot;REDIS&quot;</span>
<span class="token comment">## string and loads the prefixed RDB file, and continues loading the AOF</span>
<span class="token comment">## tail.</span>
aof-use-rdb-preamble <span class="token function">yes</span>
 
<span class="token comment">################################ LUA SCRIPTING  ###############################</span>
 
<span class="token comment">## Max execution time of a Lua script in milliseconds.</span>
<span class="token comment">##</span>
<span class="token comment">## If the maximum execution time is reached Redis will log that a script is</span>
<span class="token comment">## still in execution after the maximum allowed time and will start to</span>
<span class="token comment">## reply to queries with an error.</span>
<span class="token comment">##</span>
<span class="token comment">## When a long running script exceeds the maximum execution time only the</span>
<span class="token comment">## SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span>
<span class="token comment">## used to stop a script that did not yet called write commands. The second</span>
<span class="token comment">## is the only way to shut down the server in the case a write command was</span>
<span class="token comment">## already issued by the script but the user doesn&#39;t want to wait for the natural</span>
<span class="token comment">## termination of the script.</span>
<span class="token comment">##</span>
<span class="token comment">## Set it to 0 or a negative value for unlimited execution without warnings.</span>
lua-time-limit <span class="token number">5000</span>
 
<span class="token comment">################################ REDIS CLUSTER  ###############################</span>
 
<span class="token comment">## Normal Redis instances can&#39;t be part of a Redis Cluster; only nodes that are</span>
<span class="token comment">## started as cluster nodes can. In order to start a Redis instance as a</span>
<span class="token comment">## cluster node enable the cluster support uncommenting the following:</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-enabled yes</span>
 
<span class="token comment">## Every cluster node has a cluster configuration file. This file is not</span>
<span class="token comment">## intended to be edited by hand. It is created and updated by Redis nodes.</span>
<span class="token comment">## Every Redis Cluster node requires a different cluster configuration file.</span>
<span class="token comment">## Make sure that instances running in the same system do not have</span>
<span class="token comment">## overlapping cluster configuration file names.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-config-file nodes-6379.conf</span>
 
<span class="token comment">## Cluster node timeout is the amount of milliseconds a node must be unreachable</span>
<span class="token comment">## for it to be considered in failure state.</span>
<span class="token comment">## Most other internal time limits are multiple of the node timeout.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-node-timeout 15000</span>
 
<span class="token comment">## A replica of a failing master will avoid to start a failover if its data</span>
<span class="token comment">## looks too old.</span>
<span class="token comment">##</span>
<span class="token comment">## There is no simple way for a replica to actually have an exact measure of</span>
<span class="token comment">## its &quot;data age&quot;, so the following two checks are performed:</span>
<span class="token comment">##</span>
<span class="token comment">## 1) If there are multiple replicas able to failover, they exchange messages</span>
<span class="token comment">##    in order to try to give an advantage to the replica with the best</span>
<span class="token comment">##    replication offset (more data from the master processed).</span>
<span class="token comment">##    Replicas will try to get their rank by offset, and apply to the start</span>
<span class="token comment">##    of the failover a delay proportional to their rank.</span>
<span class="token comment">##</span>
<span class="token comment">## 2) Every single replica computes the time of the last interaction with</span>
<span class="token comment">##    its master. This can be the last ping or command received (if the master</span>
<span class="token comment">##    is still in the &quot;connected&quot; state), or the time that elapsed since the</span>
<span class="token comment">##    disconnection with the master (if the replication link is currently down).</span>
<span class="token comment">##    If the last interaction is too old, the replica will not try to failover</span>
<span class="token comment">##    at all.</span>
<span class="token comment">##</span>
<span class="token comment">## The point &quot;2&quot; can be tuned by user. Specifically a replica will not perform</span>
<span class="token comment">## the failover if, since the last interaction with the master, the time</span>
<span class="token comment">## elapsed is greater than:</span>
<span class="token comment">##</span>
<span class="token comment">##   (node-timeout * replica-validity-factor) + repl-ping-replica-period</span>
<span class="token comment">##</span>
<span class="token comment">## So for example if node-timeout is 30 seconds, and the replica-validity-factor</span>
<span class="token comment">## is 10, and assuming a default repl-ping-replica-period of 10 seconds, the</span>
<span class="token comment">## replica will not try to failover if it was not able to talk with the master</span>
<span class="token comment">## for longer than 310 seconds.</span>
<span class="token comment">##</span>
<span class="token comment">## A large replica-validity-factor may allow replicas with too old data to failover</span>
<span class="token comment">## a master, while a too small value may prevent the cluster from being able to</span>
<span class="token comment">## elect a replica at all.</span>
<span class="token comment">##</span>
<span class="token comment">## For maximum availability, it is possible to set the replica-validity-factor</span>
<span class="token comment">## to a value of 0, which means, that replicas will always try to failover the</span>
<span class="token comment">## master regardless of the last time they interacted with the master.</span>
<span class="token comment">## (However they&#39;ll always try to apply a delay proportional to their</span>
<span class="token comment">## offset rank).</span>
<span class="token comment">##</span>
<span class="token comment">## Zero is the only value able to guarantee that when all the partitions heal</span>
<span class="token comment">## the cluster will always be able to continue.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-replica-validity-factor 10</span>
 
<span class="token comment">## Cluster replicas are able to migrate to orphaned masters, that are masters</span>
<span class="token comment">## that are left without working replicas. This improves the cluster ability</span>
<span class="token comment">## to resist to failures as otherwise an orphaned master can&#39;t be failed over</span>
<span class="token comment">## in case of failure if it has no working replicas.</span>
<span class="token comment">##</span>
<span class="token comment">## Replicas migrate to orphaned masters only if there are still at least a</span>
<span class="token comment">## given number of other working replicas for their old master. This number</span>
<span class="token comment">## is the &quot;migration barrier&quot;. A migration barrier of 1 means that a replica</span>
<span class="token comment">## will migrate only if there is at least 1 other working replica for its master</span>
<span class="token comment">## and so forth. It usually reflects the number of replicas you want for every</span>
<span class="token comment">## master in your cluster.</span>
<span class="token comment">##</span>
<span class="token comment">## Default is 1 (replicas migrate only if their masters remain with at least</span>
<span class="token comment">## one replica). To disable migration just set it to a very large value.</span>
<span class="token comment">## A value of 0 can be set but is useful only for debugging and dangerous</span>
<span class="token comment">## in production.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-migration-barrier 1</span>
 
<span class="token comment">## By default Redis Cluster nodes stop accepting queries if they detect there</span>
<span class="token comment">## is at least an hash slot uncovered (no available node is serving it).</span>
<span class="token comment">## This way if the cluster is partially down (for example a range of hash slots</span>
<span class="token comment">## are no longer covered) all the cluster becomes, eventually, unavailable.</span>
<span class="token comment">## It automatically returns available as soon as all the slots are covered again.</span>
<span class="token comment">##</span>
<span class="token comment">## However sometimes you want the subset of the cluster which is working,</span>
<span class="token comment">## to continue to accept queries for the part of the key space that is still</span>
<span class="token comment">## covered. In order to do so, just set the cluster-require-full-coverage</span>
<span class="token comment">## option to no.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-require-full-coverage yes</span>
 
<span class="token comment">## This option, when set to yes, prevents replicas from trying to failover its</span>
<span class="token comment">## master during master failures. However the master can still perform a</span>
<span class="token comment">## manual failover, if forced to do so.</span>
<span class="token comment">##</span>
<span class="token comment">## This is useful in different scenarios, especially in the case of multiple</span>
<span class="token comment">## data center operations, where we want one side to never be promoted if not</span>
<span class="token comment">## in the case of a total DC failure.</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-replica-no-failover no</span>
 
<span class="token comment">## This option, when set to yes, allows nodes to serve read traffic while the</span>
<span class="token comment">## the cluster is in a down state, as long as it believes it owns the slots. </span>
<span class="token comment">##</span>
<span class="token comment">## This is useful for two cases.  The first case is for when an application </span>
<span class="token comment">## doesn&#39;t require consistency of data during node failures or network partitions.</span>
<span class="token comment">## One example of this is a cache, where as long as the node has the data it</span>
<span class="token comment">## should be able to serve it. </span>
<span class="token comment">##</span>
<span class="token comment">## The second use case is for configurations that don&#39;t meet the recommended  </span>
<span class="token comment">## three shards but want to enable cluster mode and scale later. A </span>
<span class="token comment">## master outage in a 1 or 2 shard configuration causes a read/write outage to the</span>
<span class="token comment">## entire cluster without this option set, with it set there is only a write outage.</span>
<span class="token comment">## Without a quorum of masters, slot ownership will not change automatically. </span>
<span class="token comment">##</span>
<span class="token comment">## cluster-allow-reads-when-down no</span>
 
<span class="token comment">## In order to setup your cluster make sure to read the documentation</span>
<span class="token comment">## available at http://redis.io web site.</span>
 
<span class="token comment">########################## CLUSTER DOCKER/NAT support  ########################</span>
 
<span class="token comment">## In certain deployments, Redis Cluster nodes address discovery fails, because</span>
<span class="token comment">## addresses are NAT-ted or because ports are forwarded (the typical case is</span>
<span class="token comment">## Docker and other containers).</span>
<span class="token comment">##</span>
<span class="token comment">## In order to make Redis Cluster working in such environments, a static</span>
<span class="token comment">## configuration where each node knows its public address is needed. The</span>
<span class="token comment">## following two options are used for this scope, and are:</span>
<span class="token comment">##</span>
<span class="token comment">## * cluster-announce-ip</span>
<span class="token comment">## * cluster-announce-port</span>
<span class="token comment">## * cluster-announce-bus-port</span>
<span class="token comment">##</span>
<span class="token comment">## Each instruct the node about its address, client port, and cluster message</span>
<span class="token comment">## bus port. The information is then published in the header of the bus packets</span>
<span class="token comment">## so that other nodes will be able to correctly map the address of the node</span>
<span class="token comment">## publishing the information.</span>
<span class="token comment">##</span>
<span class="token comment">## If the above options are not used, the normal Redis Cluster auto-detection</span>
<span class="token comment">## will be used instead.</span>
<span class="token comment">##</span>
<span class="token comment">## Note that when remapped, the bus port may not be at the fixed offset of</span>
<span class="token comment">## clients port + 10000, so you can specify any port and bus-port depending</span>
<span class="token comment">## on how they get remapped. If the bus-port is not set, a fixed offset of</span>
<span class="token comment">## 10000 will be used as usually.</span>
<span class="token comment">##</span>
<span class="token comment">## Example:</span>
<span class="token comment">##</span>
<span class="token comment">## cluster-announce-ip 10.1.1.5</span>
<span class="token comment">## cluster-announce-port 6379</span>
<span class="token comment">## cluster-announce-bus-port 6380</span>
 
<span class="token comment">################################## SLOW LOG ###################################</span>
 
<span class="token comment">## The Redis Slow Log is a system to log queries that exceeded a specified</span>
<span class="token comment">## execution time. The execution time does not include the I/O operations</span>
<span class="token comment">## like talking with the client, sending the reply and so forth,</span>
<span class="token comment">## but just the time needed to actually execute the command (this is the only</span>
<span class="token comment">## stage of command execution where the thread is blocked and can not serve</span>
<span class="token comment">## other requests in the meantime).</span>
<span class="token comment">##</span>
<span class="token comment">## You can configure the slow log with two parameters: one tells Redis</span>
<span class="token comment">## what is the execution time, in microseconds, to exceed in order for the</span>
<span class="token comment">## command to get logged, and the other parameter is the length of the</span>
<span class="token comment">## slow log. When a new command is logged the oldest one is removed from the</span>
<span class="token comment">## queue of logged commands.</span>
 
<span class="token comment">## The following time is expressed in microseconds, so 1000000 is equivalent</span>
<span class="token comment">## to one second. Note that a negative number disables the slow log, while</span>
<span class="token comment">## a value of zero forces the logging of every command.</span>
slowlog-log-slower-than <span class="token number">10000</span>
 
<span class="token comment">## There is no limit to this length. Just be aware that it will consume memory.</span>
<span class="token comment">## You can reclaim memory used by the slow log with SLOWLOG RESET.</span>
slowlog-max-len <span class="token number">128</span>
 
 
<span class="token comment">## By default latency monitoring is disabled since it is mostly not needed</span>
<span class="token comment">## if you don&#39;t have latency issues, and collecting data has a performance</span>
<span class="token comment">## impact, that while very small, can be measured under big load. Latency</span>
<span class="token comment">## monitoring can easily be enabled at runtime using the command</span>
<span class="token comment">## &quot;CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;&quot; if needed.</span>
latency-monitor-threshold <span class="token number">0</span>
 
<span class="token comment">##  By default all notifications are disabled because most users don&#39;t need</span>
<span class="token comment">##  this feature and the feature has some overhead. Note that if you don&#39;t</span>
<span class="token comment">##  specify at least one of K or E, no events will be delivered.</span>
notify-keyspace-events <span class="token string">&quot;&quot;</span>
 
 
 
<span class="token comment">############################### ADVANCED CONFIG ###############################</span>
 
<span class="token comment">## Hashes are encoded using a memory efficient data structure when they have a</span>
<span class="token comment">## small number of entries, and the biggest entry does not exceed a given</span>
<span class="token comment">## threshold. These thresholds can be configured using the following directives.</span>
hash-max-ziplist-entries <span class="token number">512</span>
hash-max-ziplist-value <span class="token number">64</span>
 
<span class="token comment">## Lists are also encoded in a special way to save a lot of space.</span>
<span class="token comment">## The number of entries allowed per internal list node can be specified</span>
<span class="token comment">## as a fixed maximum size or a maximum number of elements.</span>
<span class="token comment">## For a fixed maximum size, use -5 through -1, meaning:</span>
<span class="token comment">## -5: max size: 64 Kb  &lt;-- not recommended for normal workloads</span>
<span class="token comment">## -4: max size: 32 Kb  &lt;-- not recommended</span>
<span class="token comment">## -3: max size: 16 Kb  &lt;-- probably not recommended</span>
<span class="token comment">## -2: max size: 8 Kb   &lt;-- good</span>
<span class="token comment">## -1: max size: 4 Kb   &lt;-- good</span>
<span class="token comment">## Positive numbers mean store up to _exactly_ that number of elements</span>
<span class="token comment">## per list node.</span>
<span class="token comment">## The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</span>
<span class="token comment">## but if your use case is unique, adjust the settings as necessary.</span>
list-max-ziplist-size <span class="token parameter variable">-2</span>
 
<span class="token comment">## Lists may also be compressed.</span>
<span class="token comment">## Compress depth is the number of quicklist ziplist nodes from *each* side of</span>
<span class="token comment">## the list to *exclude* from compression.  The head and tail of the list</span>
<span class="token comment">## are always uncompressed for fast push/pop operations.  Settings are:</span>
<span class="token comment">## 0: disable all list compression</span>
<span class="token comment">## 1: depth 1 means &quot;don&#39;t start compressing until after 1 node into the list,</span>
<span class="token comment">##    going from either the head or tail&quot;</span>
<span class="token comment">##    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]</span>
<span class="token comment">##    [head], [tail] will always be uncompressed; inner nodes will compress.</span>
<span class="token comment">## 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]</span>
<span class="token comment">##    2 here means: don&#39;t compress head or head-&gt;next or tail-&gt;prev or tail,</span>
<span class="token comment">##    but compress all nodes between them.</span>
<span class="token comment">## 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</span>
<span class="token comment">## etc.</span>
list-compress-depth <span class="token number">0</span>
 
<span class="token comment">## Sets have a special encoding in just one case: when a set is composed</span>
<span class="token comment">## of just strings that happen to be integers in radix 10 in the range</span>
<span class="token comment">## of 64 bit signed integers.</span>
<span class="token comment">## The following configuration setting sets the limit in the size of the</span>
<span class="token comment">## set in order to use this special memory saving encoding.</span>
set-max-intset-entries <span class="token number">512</span>
 
<span class="token comment">## Similarly to hashes and lists, sorted sets are also specially encoded in</span>
<span class="token comment">## order to save a lot of space. This encoding is only used when the length and</span>
<span class="token comment">## elements of a sorted set are below the following limits:</span>
zset-max-ziplist-entries <span class="token number">128</span>
zset-max-ziplist-value <span class="token number">64</span>
 
<span class="token comment">## The suggested value is ~ 3000 in order to have the benefits of</span>
<span class="token comment">## the space efficient encoding without slowing down too much PFADD,</span>
<span class="token comment">## which is O(N) with the sparse encoding. The value can be raised to</span>
<span class="token comment">## ~ 10000 when CPU is not a concern, but space is, and the data set is</span>
<span class="token comment">## composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</span>
hll-sparse-max-bytes <span class="token number">3000</span>
 
<span class="token comment">## Streams macro node max size / items. The stream data structure is a radix</span>
<span class="token comment">## tree of big nodes that encode multiple items inside. Using this configuration</span>
<span class="token comment">## it is possible to configure how big a single node can be in bytes, and the</span>
<span class="token comment">## maximum number of items it may contain before switching to a new node when</span>
<span class="token comment">## appending new stream entries. If any of the following settings are set to</span>
<span class="token comment">## zero, the limit is ignored, so for instance it is possible to set just a</span>
<span class="token comment">## max entires limit by setting max-bytes to 0 and max-entries to the desired</span>
<span class="token comment">## value.</span>
stream-node-max-bytes <span class="token number">4096</span>
stream-node-max-entries <span class="token number">100</span>
 
 
<span class="token comment">## use &quot;activerehashing yes&quot; if you don&#39;t have such hard requirements but</span>
<span class="token comment">## want to free memory asap when possible.</span>
activerehashing <span class="token function">yes</span>
 
 
<span class="token comment">## Instead there is a default limit for pubsub and replica clients, since</span>
<span class="token comment">## subscribers and replicas receive data in a push fashion.</span>
<span class="token comment">##</span>
<span class="token comment">## Both the hard or the soft limit can be disabled by setting them to zero.</span>
client-output-buffer-limit normal <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
client-output-buffer-limit replica 256mb 64mb <span class="token number">60</span>
client-output-buffer-limit pubsub 32mb 8mb <span class="token number">60</span>
 
<span class="token comment">## Client query buffers accumulate new commands. They are limited to a fixed</span>
<span class="token comment">## amount by default in order to avoid that a protocol desynchronization (for</span>
<span class="token comment">## instance due to a bug in the client) will lead to unbound memory usage in</span>
<span class="token comment">## the query buffer. However you can configure it here if you have very special</span>
<span class="token comment">## needs, such us huge multi/exec requests or alike.</span>
<span class="token comment">##</span>
<span class="token comment">## client-query-buffer-limit 1gb</span>
 
<span class="token comment">## In the Redis protocol, bulk requests, that are, elements representing single</span>
<span class="token comment">## strings, are normally limited ot 512 mb. However you can change this limit</span>
<span class="token comment">## here.</span>
<span class="token comment">##</span>
<span class="token comment">## proto-max-bulk-len 512mb</span>
 
 
<span class="token comment">## The range is between 1 and 500, however a value over 100 is usually not</span>
<span class="token comment">## a good idea. Most users should use the default of 10 and raise this up to</span>
<span class="token comment">## 100 only in environments where very low latency is required.</span>
hz <span class="token number">10</span>
 
 
<span class="token comment">## When dynamic HZ is enabled, the actual configured HZ will be used</span>
<span class="token comment">## as a baseline, but multiples of the configured HZ value will be actually</span>
<span class="token comment">## used as needed once more clients are connected. In this way an idle</span>
<span class="token comment">## instance will use very little CPU time while a busy instance will be</span>
<span class="token comment">## more responsive.</span>
dynamic-hz <span class="token function">yes</span>
 
<span class="token comment">## When a child rewrites the AOF file, if the following option is enabled</span>
<span class="token comment">## the file will be fsync-ed every 32 MB of data generated. This is useful</span>
<span class="token comment">## in order to commit the file to the disk more incrementally and avoid</span>
<span class="token comment">## big latency spikes.</span>
aof-rewrite-incremental-fsync <span class="token function">yes</span>
 
<span class="token comment">## When redis saves RDB file, if the following option is enabled</span>
<span class="token comment">## the file will be fsync-ed every 32 MB of data generated. This is useful</span>
<span class="token comment">## in order to commit the file to the disk more incrementally and avoid</span>
<span class="token comment">## big latency spikes.</span>
rdb-save-incremental-fsync <span class="token function">yes</span>
 
 
 
<span class="token comment">## Jemalloc background thread for purging will be enabled by default</span>
jemalloc-bg-thread <span class="token function">yes</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-3-2-å¯åŠ¨å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_6-3-2-å¯åŠ¨å®ä¾‹" aria-hidden="true">#</a> 6.3.2 å¯åŠ¨å®ä¾‹</h4><p>å› ä¸ºå‰é¢è®¾ç½®çš„æœ‰redisè®¤è¯å¯†ç ï¼Œæ‰€ä»¥è¾“å…¥auth å¯†ç å³å¯å®Œæˆè®¤è¯</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos ~]## docker run -p 6379:6379 --name redis2 --privileged=true -v /app/redis/redis.conf:/etc/redis/redis.conf  -v /app/data:/data -d redis:6.0.8 redis-server /etc/redis/redis.conf --appendonly yes
561618b1a13521e7119536ed3cdaf3e4344c2962d1c968acc01a60cc802af7d0

[root@VM-16-8-centos ~]## docker ps
CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS          PORTS                    NAMES
561618b1a135   redis:6.0.8   &quot;docker-entrypoint.sâ€¦&quot;   45 minutes ago   Up 45 minutes   0.0.0.0:6379-&gt;6379/tcp   redis2

[root@VM-16-8-centos ~]## docker exec -it 561618b1a135 bash
root@561618b1a135:/data## redis-cli

127.0.0.1:6379&gt; auth redis123
OK

127.0.0.1:6379&gt; set k1 v1
OK

127.0.0.1:6379&gt; get k1
&quot;v1&quot;

127.0.0.1:6379&gt; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-nginx" tabindex="-1"><a class="header-anchor" href="#_6-4-nginx" aria-hidden="true">#</a> 6.4 Nginx</h3><ul><li>å…ˆè¿è¡Œä¸€æ¬¡å®¹å™¨ï¼ˆä¸ºäº†æ‹·è´é…ç½®æ–‡ä»¶ï¼‰ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--name</span> nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/html:/usr/share/nginx/html <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/logs:/var/log/nginx  <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> nginx:1.22
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å°†å®¹å™¨å†…çš„é…ç½®æ–‡ä»¶æ‹·è´åˆ°æŒ‡å®šç›®å½•ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> container <span class="token function">cp</span> nginx:/etc/nginx /mydata/nginx/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>ä¿®æ”¹æ–‡ä»¶åç§°ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /mydata/nginx/<span class="token operator">&amp;&amp;</span><span class="token function">mv</span> nginx conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>ç»ˆæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> stop nginx
<span class="token function">docker</span> <span class="token function">rm</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨NginxæœåŠ¡ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--name</span> nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/html:/usr/share/nginx/html <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/logs:/var/log/nginx  <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/conf:/etc/nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> nginx:1.22
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸ƒã€å®‰è£…é«˜çº§ç¯‡" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€å®‰è£…é«˜çº§ç¯‡" aria-hidden="true">#</a> ä¸ƒã€å®‰è£…é«˜çº§ç¯‡</h2><h3 id="_6-1-mysqä¸»ä»" tabindex="-1"><a class="header-anchor" href="#_6-1-mysqä¸»ä»" aria-hidden="true">#</a> 6.1 Mysqä¸»ä»</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>.æ–°å»ºä¸»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3307
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3307</span>:3306 <span class="token parameter variable">--name</span> mysql-master <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-master/log:/var/log/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-master/data:/var/lib/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-master/conf:/etc/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root  <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7



<span class="token number">2</span>.è¿›å…¥/mydata/mysql-master/confç›®å½•ä¸‹æ–°å»ºmy.cnf
<span class="token punctuation">[</span>root@VM-16-8-centos conf<span class="token punctuation">]</span><span class="token comment">## pwd</span>
/mydata/mysql-master/conf
<span class="token punctuation">[</span>root@VM-16-8-centos conf<span class="token punctuation">]</span><span class="token comment">## cat my.cnf </span>
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">### è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">101</span> 
<span class="token comment">### æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°</span>
binlog-ignore-db<span class="token operator">=</span>mysql  
<span class="token comment">### å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½</span>
log-bin<span class="token operator">=</span>mall-mysql-bin  
<span class="token comment">### è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰</span>
<span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M  
<span class="token comment">### è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed  
<span class="token comment">### äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚</span>
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>  
<span class="token comment">### è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚</span>
<span class="token comment">### å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</span>
<span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span>


<span class="token number">3</span>.ä¿®æ”¹å®Œé…ç½®åé‡å¯masterå®ä¾‹
<span class="token punctuation">[</span>root@VM-16-8-centos conf<span class="token punctuation">]</span><span class="token comment">## docker restart mysql-master</span>
mysql-master
<span class="token punctuation">[</span>root@VM-16-8-centos conf<span class="token punctuation">]</span><span class="token comment">## docker ps</span>
CONTAINER ID   IMAGE         COMMAND                  CREATED         STATUS         PORTS                               NAMES
789a4d55e367   mysql:5.7     <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">6</span> minutes ago   Up <span class="token number">6</span> seconds   <span class="token number">33060</span>/tcp, <span class="token number">0.0</span>.0.0:3307-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysql-master
561618b1a135   redis:6.0.8   <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">9</span> hours ago     Up <span class="token number">9</span> hours     <span class="token number">0.0</span>.0.0:6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp              redis2

<span class="token number">4</span>.è¿›å…¥mysql-masterå®¹å™¨
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-master /bin/bash
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-proot</span>

bugè®°å½•
mysql<span class="token operator">&gt;</span> CREATE <span class="token environment constant">USER</span> <span class="token string">&#39;slave&#39;</span>@<span class="token string">&#39;%&#39;</span> IDENTIFIED BY <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>
ERROR <span class="token number">1396</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Operation CREATE <span class="token environment constant">USER</span> failed <span class="token keyword">for</span> <span class="token string">&#39;slave&#39;</span>@<span class="token string">&#39;%&#39;</span>
æŸ¥çœ‹åæ•°æ®åº“ä¸å­˜åœ¨ï¼Œå›å¿†äº†ä¸€ä¸‹æ“ä½œï¼Œæ‰‹åŠ¨åˆ é™¤è¿‡slaveè¿™ç”¨æˆ·ï¼Œå¯èƒ½æ˜¯è¿™ä¸ªæ“ä½œå¼•èµ·çš„ï¼Œç°åœ¨æ‰§è¡Œå‘½ä»¤é‡æ–°åˆ é™¤ä¸€ä¸‹
drop user <span class="token string">&#39;slave&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>

<span class="token number">5</span>.masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·
CREATE <span class="token environment constant">USER</span> <span class="token string">&#39;slave&#39;</span>@<span class="token string">&#39;%&#39;</span> IDENTIFIED BY <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>
GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO <span class="token string">&#39;slave&#39;</span>@<span class="token string">&#39;%&#39;</span><span class="token punctuation">;</span>

<span class="token number">6</span>.æ–°å»ºä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3308
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3308</span>:3306 <span class="token parameter variable">--name</span> mysql-slave <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-slave/log:/var/log/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-slave/data:/var/lib/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql-slave/conf:/etc/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root  <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7

<span class="token number">7</span>.è¿›å…¥/mydata/mysql-slave/confç›®å½•ä¸‹æ–°å»ºmy.cnf
<span class="token builtin class-name">cd</span> /mydata/mysql-slave/conf
<span class="token function">vim</span> my.cnf
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">### è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">102</span>
<span class="token comment">### æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°</span>
binlog-ignore-db<span class="token operator">=</span>mysql  
<span class="token comment">### å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œä»¥å¤‡Slaveä½œä¸ºå…¶å®ƒæ•°æ®åº“å®ä¾‹çš„Masteræ—¶ä½¿ç”¨</span>
log-bin<span class="token operator">=</span>mall-mysql-slave1-bin  
<span class="token comment">### è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰</span>
<span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M  
<span class="token comment">### è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed  
<span class="token comment">### äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚</span>
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>  
<span class="token comment">### è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚</span>
<span class="token comment">### å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</span>
<span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span>  
<span class="token comment">### relay_logé…ç½®ä¸­ç»§æ—¥å¿—</span>
<span class="token assign-left variable">relay_log</span><span class="token operator">=</span>mall-mysql-relay-bin  
<span class="token comment">### log_slave_updatesè¡¨ç¤ºslaveå°†å¤åˆ¶äº‹ä»¶å†™è¿›è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—</span>
<span class="token assign-left variable">log_slave_updates</span><span class="token operator">=</span><span class="token number">1</span>  
<span class="token comment">### slaveè®¾ç½®ä¸ºåªè¯»ï¼ˆå…·æœ‰superæƒé™çš„ç”¨æˆ·é™¤å¤–ï¼‰</span>
<span class="token assign-left variable">read_only</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token number">8</span>.ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹
<span class="token function">docker</span> restart mysql-slave

<span class="token number">9</span>.åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-master /bin/bash
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-proot</span>
show master status<span class="token punctuation">;</span>

<span class="token number">10</span>.è¿›å…¥mysql-slaveå®¹å™¨
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-slave /bin/bash
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-proot</span>

<span class="token number">11</span>.åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶
change master to <span class="token assign-left variable">master_host</span><span class="token operator">=</span><span class="token string">&#39;124.221.228.148&#39;</span>, <span class="token assign-left variable">master_user</span><span class="token operator">=</span><span class="token string">&#39;slave&#39;</span>, <span class="token assign-left variable">master_password</span><span class="token operator">=</span><span class="token string">&#39;123456&#39;</span>, <span class="token assign-left variable">master_port</span><span class="token operator">=</span><span class="token number">3307</span>, <span class="token assign-left variable">master_log_file</span><span class="token operator">=</span><span class="token string">&#39;mall-mysql-bin.000001&#39;</span>, <span class="token assign-left variable">master_log_pos</span><span class="token operator">=</span><span class="token number">617</span>, <span class="token assign-left variable">master_connect_retry</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>

<span class="token number">12</span>.åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€
show slave status <span class="token punctuation">\</span>G<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220404212759583.png" alt="image-20220404212759583" tabindex="0" loading="lazy"><figcaption>image-20220404212759583</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos myfile]## docker run -it add55e71a136 bash
[root@cf6ad357f282 local]## pwd
/usr/local
[root@cf6ad357f282 local]## ifconfig 
eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255
        ether 02:42:ac:11:00:02  txqueuelen 0  (Ethernet)
        RX packets 8  bytes 656 (656.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[root@cf6ad357f282 local]## java -version
java version &quot;1.8.0_77&quot;
Java(TM) SE Runtime Environment (build 1.8.0_77-b03)
Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…«ã€dockerfile" tabindex="-1"><a class="header-anchor" href="#å…«ã€dockerfile" aria-hidden="true">#</a> å…«ã€DockerFile</h2><h3 id="_8-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_8-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 8.1 æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>Dockerfileæ˜¯ç”¨æ¥æ„å»ºDockeré•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯ç”±<mark>ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬</mark>ã€‚</strong></p><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_8-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ" tabindex="-1"><a class="header-anchor" href="#_8-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ" aria-hidden="true">#</a> 8.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ</h3><p>æ„å»ºä¸‰æ­¥éª¤</p><ol><li>ç¼–å†™Dockerfileæ–‡ä»¶</li><li>docker buildå‘½ä»¤æ„å»ºé•œåƒ</li><li>docker runä¾é•œåƒè¿è¡Œå®¹å™¨å®ä¾‹</li></ol><h4 id="_8-2-1-dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#_8-2-1-dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†" aria-hidden="true">#</a> 8.2.1 Dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†</h4><p>1ï¼šæ¯æ¡ä¿ç•™å­—æŒ‡ä»¤éƒ½<strong>å¿…é¡»ä¸ºå¤§å†™å­—æ¯</strong>ä¸”åé¢è¦è·Ÿéšè‡³å°‘ä¸€ä¸ªå‚æ•°</p><p>2ï¼šæŒ‡ä»¤æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ï¼Œé¡ºåºæ‰§è¡Œ</p><p>3ï¼š##è¡¨ç¤ºæ³¨é‡Š</p><p>4ï¼šæ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚å¹¶å¯¹é•œåƒè¿›è¡Œæäº¤</p><h4 id="_8-2-2-dockeræ‰§è¡Œdockerfileçš„å¤§è‡´æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_8-2-2-dockeræ‰§è¡Œdockerfileçš„å¤§è‡´æµç¨‹" aria-hidden="true">#</a> 8.2.2 Dockeræ‰§è¡ŒDockerfileçš„å¤§è‡´æµç¨‹</h4><ol><li>dockerä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li><li>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤å¹¶å¯¹å®¹å™¨åšå‡ºä¿®æ”¹</li><li>æ‰§è¡Œç±»ä¼¼docker commitçš„æ“ä½œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</li><li>dockeråŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨</li><li>æ‰§è¡Œdockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ç›´åˆ°æ‰€æœ‰æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæ¯•</li></ol><h4 id="_8-2-3-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-2-3-å°æ€»ç»“" aria-hidden="true">#</a> 8.2.3 å°æ€»ç»“</h4><p>ä»åº”ç”¨è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒDockerfileã€Dockeré•œåƒä¸Dockerå®¹å™¨åˆ†åˆ«ä»£è¡¨è½¯ä»¶çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µï¼Œ</p><ul><li>Dockerfileæ˜¯è½¯ä»¶çš„åŸææ–™</li><li>Dockeré•œåƒæ˜¯è½¯ä»¶çš„äº¤ä»˜å“</li><li>Dockerå®¹å™¨åˆ™å¯ä»¥è®¤ä¸ºæ˜¯è½¯ä»¶é•œåƒçš„è¿è¡Œæ€ï¼Œä¹Ÿå³ä¾ç…§é•œåƒè¿è¡Œçš„å®¹å™¨å®ä¾‹ Dockerfileé¢å‘å¼€å‘ï¼ŒDockeré•œåƒæˆä¸ºäº¤ä»˜æ ‡å‡†ï¼ŒDockerå®¹å™¨åˆ™æ¶‰åŠéƒ¨ç½²ä¸è¿ç»´ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯ï¼ŒåˆåŠ›å……å½“Dockerä½“ç³»çš„åŸºçŸ³ã€‚</li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405103302981.png" alt="image-20220405103302981" tabindex="0" loading="lazy"><figcaption>image-20220405103302981</figcaption></figure><p>1 Dockerfileï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªDockerfileï¼ŒDockerfileå®šä¹‰äº†è¿›ç¨‹éœ€è¦çš„ä¸€åˆ‡ä¸œè¥¿ã€‚Dockerfileæ¶‰åŠçš„å†…å®¹åŒ…æ‹¬æ‰§è¡Œä»£ç æˆ–è€…æ˜¯æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€ä¾èµ–åŒ…ã€è¿è¡Œæ—¶ç¯å¢ƒã€åŠ¨æ€é“¾æ¥åº“ã€æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆã€æœåŠ¡è¿›ç¨‹å’Œå†…æ ¸è¿›ç¨‹(å½“åº”ç”¨è¿›ç¨‹éœ€è¦å’Œç³»ç»ŸæœåŠ¡å’Œå†…æ ¸è¿›ç¨‹æ‰“äº¤é“ï¼Œè¿™æ—¶éœ€è¦è€ƒè™‘å¦‚ä½•è®¾è®¡namespaceçš„æƒé™æ§åˆ¶)ç­‰ç­‰;</p><p>2 Dockeré•œåƒï¼Œåœ¨ç”¨Dockerfileå®šä¹‰ä¸€ä¸ªæ–‡ä»¶ä¹‹åï¼Œdocker buildæ—¶ä¼šäº§ç”Ÿä¸€ä¸ªDockeré•œåƒï¼Œå½“è¿è¡Œ Dockeré•œåƒæ—¶ä¼šçœŸæ­£å¼€å§‹æä¾›æœåŠ¡;</p><p>3 Dockerå®¹å™¨ï¼Œå®¹å™¨æ˜¯ç›´æ¥æä¾›æœåŠ¡çš„ã€‚</p><h3 id="_8-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#_8-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤" aria-hidden="true">#</a> 8.3 Dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤</h3><ul><li><strong>FROM</strong> åŸºç¡€é•œåƒï¼Œå½“å‰æ–°é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒçš„ï¼ŒæŒ‡å®šä¸€ä¸ªå·²ç»å­˜åœ¨çš„é•œåƒä½œä¸ºæ¨¡æ¿ï¼Œç¬¬ä¸€æ¡å¿…é¡»æ˜¯from</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>- **MAINTAINER ** è¿™æ¡å‘½ä»¤ä¸»è¦æ˜¯æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯ï¼Œæ–¹ä¾¿ä»–äººå¯»æ‰¾ä½œè€… æŒ‡ä»¤åé¢çš„å†…å®¹å…¶å®æ²¡æœ‰è§„å®šå†™ä»€ä¹ˆï¼Œ åªè¦å¯ä»¥è”ç³»ä¸Šä½œè€…å³å¯ï¼Œä¸€èˆ¬ä½¿ç”¨é‚®ç®±åœ°å€ æ ¼å¼ä¸º MAINTAINER Name &lt;Email&gt;ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ ‡ç­¾å·²ç»å¼ƒç”¨ï¼Œä½†ç°åœ¨è¿˜æœ‰å¾ˆå¤š Dockerfi ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾ï¼Œæ‰€ä»¥çŸ­æ—¶é—´å†…ä¸ä¼šåˆ é™¤ ç°åœ¨æ¨èä½¿ç”¨æ›´çµæ´»çš„ LABEL å‘½ä»¤ï¼Œè¯¦è§ é¢çš„è®²è§£ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><strong>EXPOSE</strong> å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²å‡ºçš„ç«¯å£</p></li><li><p><strong>WORKDIR</strong> æŒ‡å®šåœ¨åˆ›å»ºå®¹å™¨åï¼Œç»ˆç«¯é»˜è®¤ç™»é™†çš„è¿›æ¥å·¥ä½œç›®å½•ï¼Œä¸€ä¸ªè½è„šç‚¹</p></li><li><p><strong>USER</strong> æŒ‡å®šè¯¥é•œåƒä»¥ä»€ä¹ˆæ ·çš„ç”¨æˆ·å»æ‰§è¡Œï¼Œå¦‚æœéƒ½ä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯root</p></li><li><p><strong>ENV</strong> ç”¨æ¥åœ¨æ„å»ºé•œåƒè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</p></li><li><p>ENV MY_PATH /usr/mytest è¿™ä¸ªç¯å¢ƒå˜é‡å¯ä»¥åœ¨åç»­çš„ä»»ä½•RUNæŒ‡ä»¤ä¸­ä½¿ç”¨ï¼Œè¿™å°±å¦‚åŒåœ¨å‘½ä»¤å‰é¢æŒ‡å®šäº†ç¯å¢ƒå˜é‡å‰ç¼€ä¸€æ ·ï¼› ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒæŒ‡ä»¤ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œ</p><p>æ¯”å¦‚ï¼šWORKDIR $MY_PATH</p></li><li><p><strong>ADD</strong> å°†å®¿ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”ä¼šè‡ªåŠ¨å¤„ç†URLå’Œè§£å‹tarå‹ç¼©åŒ…</p></li><li><p><strong>VOLUME</strong> å®¹å™¨æ•°æ®å·ï¼Œç”¨äºæ•°æ®ä¿å­˜å’ŒæŒä¹…åŒ–å·¥ä½œ</p></li></ul><h4 id="_8-3-1-run" tabindex="-1"><a class="header-anchor" href="#_8-3-1-run" aria-hidden="true">#</a> 8.3.1 RUN</h4><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405104013642.png" alt="image-20220405104013642" tabindex="0" loading="lazy"><figcaption>image-20220405104013642</figcaption></figure><p>shellæ ¼å¼ï¼š RUN yum -y install vim</p><p>åˆ° shell æ ¼å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨åæ–œæ å°†å•ä¸ª RUN å‘½ä»¤è·¨åˆ°ä¸‹ä¸€è¡Œ</p><p>RUN echo â€ Hello â€&amp;&amp; \</p><p>â€‹ echo &quot;Worldâ€\</p><pre><code>&amp;&amp; echo â€ Dockerâ€
</code></pre><p>execæ ¼å¼ï¼šRUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;ï¼Œ&quot;å‚æ•°1&quot;,&quot;å‚æ•°2&quot;]</p><p>ä¾‹ï¼šRUN [&quot;./test.php&quot;,&quot;dev&quot;,&quot;offline&quot;] ç­‰ä»·äº ./test.php dev offline</p><p>ä»¥è¿™ç§æ ¼å¼è¿è¡Œç¨‹åºï¼Œå¯ä»¥å…é™¤è¿è¡Œ n/sh çš„æ¶ˆè€— è¿™ç§æ ¼å¼æ˜¯ç”¨ Ison æ ¼å¼å°†ç¨‹åºå ä¸æ‰€éœ€å‚ æ•°ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ‰€ä»¥å¦‚æœå‚æ•°ä¸­æœ‰å¼•å·ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œè´lj éœ€è¦è¿›è¡Œè½¬ä¹‰</p><p><mark>RUNæ˜¯åœ¨ docker buildæ—¶è¿è¡Œ</mark></p><ul><li><strong>COPY</strong> ç±»ä¼¼ADDï¼Œæ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒä¸­ã€‚å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ &lt;æºè·¯å¾„&gt; çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„ &lt;ç›®æ ‡è·¯å¾„&gt; ä½ç½®</li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405104400946.png" alt="image-20220405104400946" tabindex="0" loading="lazy"><figcaption>image-20220405104400946</figcaption></figure><h4 id="_8-3-2-cmd" tabindex="-1"><a class="header-anchor" href="#_8-3-2-cmd" aria-hidden="true">#</a> 8.3.2 CMD</h4><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405104724204.png" alt="image-20220405104724204" tabindex="0" loading="lazy"><figcaption>image-20220405104724204</figcaption></figure><p><mark>CMDæ˜¯åœ¨docker runæ—¶è¿è¡Œ</mark></p><p><mark>CMDæŒ‡ä»¤å¯ä»¥æœ‰å¤šæ¡ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼ŒCMDä¼šè¢«docker runåé¢çš„å‚æ•°æ›¿æ¢</mark></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405105228712.png" alt="image-20220405105228712" tabindex="0" loading="lazy"><figcaption>image-20220405105228712</figcaption></figure><p>ä¸Šé¢è¿™ä¸ªå®ä¾‹ä»€ä¹ˆæ„æ€å‘¢ï¼Œå®˜ç½‘ç¼–å†™çš„å…³äºtomcatçš„Dockerfileæ–‡ä»¶çš„æœ€åä¸€è¡Œæ˜¯è¿è¡Œcatalina.shè„šæœ¬</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405105643278.png" alt="image-20220405105643278" tabindex="0" loading="lazy"><figcaption>image-20220405105643278</figcaption></figure><p><strong>èƒ½è®¿é—®tomcat</strong></p><p>åŠ ä¸Š/bin/bash</p><p>åˆ™ä¸èƒ½è®¿é—®tomcat</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>FROM ubuntu  

CMD <span class="token punctuation">[</span>â€ <span class="token builtin class-name">echo</span> â€ , â€ Hello Ubuntuâ€ <span class="token punctuation">]</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker build -t user/test .</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405113325401.png" alt="image-20220405113325401" tabindex="0" loading="lazy"><figcaption>image-20220405113325401</figcaption></figure><p>docker run -it imageId echo &quot;Hello Docker&quot;è¿™ä¸ªæ–¹å¼å¯åŠ¨å®¹å™¨æ—¶ï¼Œecho &quot;HelloDockerâ€å‘½ä»¤ä¼šè¦†ç›–åŸæœ‰çš„CMDå‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCMD å‘½ä»¤å¯ä»¥é€šè¿‡docker runå‘½ä»¤è¦†ç›–ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯CMDå’ŒENTRYPOINTæŒ‡ä»¤çš„æœ€å¤§åŒºåˆ«ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405105139911.png" alt="image-20220405105139911" tabindex="0" loading="lazy"><figcaption>image-20220405105139911</figcaption></figure><h4 id="_8-3-3-entrypoint" tabindex="-1"><a class="header-anchor" href="#_8-3-3-entrypoint" aria-hidden="true">#</a> 8.3.3 ENTRYPOINT</h4><p>ä¹Ÿæ˜¯ç”¨æ¥æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤</p><p>ç±»ä¼¼äº CMD æŒ‡ä»¤ï¼Œä½†æ˜¯ENTRYPOINTä¸ä¼šè¢«docker runåé¢çš„å‘½ä»¤è¦†ç›–ï¼Œè€Œä¸”è¿™äº›å‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å½“ä½œå‚æ•°é€ç»™ ENTRYPOINT æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åº</p><p>FROM ubuntu</p><p>ENTRYPOINT [ â€ echoâ€ ]</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405121627847.png" alt="image-20220405121627847" tabindex="0" loading="lazy"><figcaption>image-20220405121627847</figcaption></figure><h4 id="_8-3-4-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-3-4-å°æ€»ç»“" aria-hidden="true">#</a> 8.3.4 å°æ€»ç»“</h4><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405121706206.png" alt="image-20220405121706206" tabindex="0" loading="lazy"><figcaption>image-20220405121706206</figcaption></figure><h3 id="_8-4-dockerfileå®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_8-4-dockerfileå®æˆ˜" aria-hidden="true">#</a> 8.4 Dockerfileå®æˆ˜</h3><h4 id="rediså®¹å™¨åŒ–" tabindex="-1"><a class="header-anchor" href="#rediså®¹å™¨åŒ–" aria-hidden="true">#</a> Rediså®¹å™¨åŒ–</h4><p>ï¼ˆ1ï¼‰åŸºç¡€é•œåƒï¼šcentos:centos7.5.1804ï¼›</p><p>ï¼ˆ2ï¼‰ä½œè€…ï¼šChinaskillï¼›</p><p>ï¼ˆ3ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„bind 127.0.0.1ä¸ºbind 0.0.0.0ï¼›</p><p>ï¼ˆ4ï¼‰è®¾ç½®Rediså…å¯†ï¼Œå¹¶å…³é—­ä¿æŠ¤æ¨¡å¼ï¼›</p><p>ï¼ˆ5ï¼‰å¼€æ”¾ç«¯å£ï¼š6379ï¼›</p><p>ï¼ˆ6ï¼‰è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯ã€‚</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code>[root@master redis]## cat Dockerfile 
<span class="token instruction"><span class="token keyword">FROM</span> centos:centos7.5.1804</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Chinaskill</span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -rf /etc/yum.repos.d/*</span>
<span class="token instruction"><span class="token keyword">ADD</span> ftp.repo /etc/yum.repos.d/ftp.repo</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum clean all</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum list</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum install -y redis</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">&#39;s/bind 127.0.0.1/bind 0.0.0.0/g&#39;</span> /etc/redis.conf</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">&#39;s/protected-mode yes/protected-mode no/g&#39;</span> /etc/redis.conf</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">&#39;s/daemonize no/daemonize yes/g&#39;</span> /etc/redis.conf</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 6379</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;/usr/bin/redis-server&quot;</span>,<span class="token string">&quot;/etc/redis.conf&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®¹å™¨åŒ–mariadb" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨åŒ–mariadb" aria-hidden="true">#</a> å®¹å™¨åŒ–MariaDB</h4><p>ï¼ˆ1ï¼‰åŸºç¡€é•œåƒï¼šcentos:centos7.5.1804ï¼›</p><p>ï¼ˆ2ï¼‰ä½œè€…ï¼šChinaskillï¼›</p><p>ï¼ˆ3ï¼‰è®¾ç½®æ•°æ®åº“å¯†ç ï¼š123456ï¼›</p><p>ï¼ˆ4ï¼‰åˆ›å»ºæ•°æ®åº“gpmallå¹¶å¯¼å…¥æ•°æ®åº“æ–‡ä»¶gpmall.sqlï¼›</p><p>ï¼ˆ5ï¼‰è®¾ç½®å­—ç¬¦ç¼–ç ï¼šUTF-8ï¼›</p><p>ï¼ˆ6ï¼‰å¼€æ”¾ç«¯å£ï¼š3306ï¼›</p><p>ï¼ˆ7ï¼‰è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯ã€‚</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code>[root@master redis]## cd /root/mariadb/
[root@master mariadb]## ls
Dockerfile ftp.repo gpmall.sql init.sh
[root@master mariadb]## cat Dockerfile 
<span class="token instruction"><span class="token keyword">FROM</span> centos:centos7.5.1804</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Chinaskill</span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -rf /etc/yum.repos.d/*</span>
<span class="token instruction"><span class="token keyword">ADD</span> ftp.repo /etc/yum.repos.d/</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum install -y mariadb-server</span>
<span class="token instruction"><span class="token keyword">ADD</span> init.sh /root/init.sh</span>
<span class="token instruction"><span class="token keyword">RUN</span> chmod +x /root/init.sh</span>
<span class="token instruction"><span class="token keyword">ADD</span> gpmall.sql /root/gpmall.sql</span>
<span class="token instruction"><span class="token keyword">RUN</span> /root/init.sh</span>
<span class="token instruction"><span class="token keyword">ENV</span> C.LANG UTF-8</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 3306</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;mysqld_safe&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®¹å™¨åŒ–zookeeper" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨åŒ–zookeeper" aria-hidden="true">#</a> å®¹å™¨åŒ–Zookeeper</h4><p>ï¼ˆ1ï¼‰åŸºç¡€é•œåƒï¼šcentos:centos7.5.1804ï¼›</p><p>ï¼ˆ2ï¼‰ä½œè€…ï¼šChinaskillï¼›</p><p>ï¼ˆ3ï¼‰å¼€æ”¾ç«¯å£ï¼š2181ï¼›</p><p>ï¼ˆ4ï¼‰è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯ã€‚</p><p>[root@master zookeeper]## ls</p><p>Dockerfile ftp.repo zookeeper-3.4.14.tar.gz</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code>[root@master zookeeper]## cat Dockerfile 
<span class="token instruction"><span class="token keyword">FROM</span> centos:centos7.5.1804</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Chinaskill</span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -rvf /etc/yum.repos.d/*</span>
<span class="token instruction"><span class="token keyword">COPY</span> ftp.repo /etc/yum.repos.d/local.repo</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum -y install java-1.8.0</span>
<span class="token instruction"><span class="token keyword">ADD</span> zookeeper-3.4.14.tar.gz /usr/local</span>
<span class="token instruction"><span class="token keyword">ENV</span> ZOOKEEPER_HOME /usr/local/zookeeper-3.4.14</span>
<span class="token instruction"><span class="token keyword">ENV</span> PATH <span class="token variable">$PATH</span>:<span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$JRE_HOME</span>/bin:<span class="token variable">$ZOOKEEPER_HOME</span>/bin</span>
<span class="token instruction"><span class="token keyword">RUN</span> cp <span class="token variable">$ZOOKEEPER_HOME</span>/conf/zoo_sample.cfg <span class="token variable">$ZOOKEEPER_HOME</span>/conf/zoo.cfg</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 2181</span>
<span class="token instruction"><span class="token keyword">CMD</span> <span class="token variable">$ZOOKEEPER_HOME</span>/bin/zkServer.sh start-foreground</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è™šæ‚¬é•œåƒ" tabindex="-1"><a class="header-anchor" href="#è™šæ‚¬é•œåƒ" aria-hidden="true">#</a> è™šæ‚¬é•œåƒ</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ä»“åº“åã€æ ‡ç­¾éƒ½æ˜¯&lt;none&gt;çš„é•œåƒï¼Œä¿—ç§°dangling image
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><mark>è™šæ‚¬é•œåƒçš„ç”±æ¥</mark></p><p>é€šå¸¸å‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºæ„å»ºäº†ä¸€ä¸ªæ–°é•œåƒï¼Œç„¶åä¸ºè¯¥é•œåƒæ‰“äº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ ‡ç­¾ã€‚æ¥ç€Dockerä¼šç§»é™¤æ—§é•œåƒä¸Šé¢çš„æ ‡ç­¾ï¼Œå°†è¯¥æ ‡ç­¾æ ‡åœ¨æ–°çš„é•œåƒä¹‹ä¸Šã€‚ä¾‹å¦‚ï¼Œé¦–å…ˆåŸºäºalpine:3.4æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶æ‰“ä¸Š<code>dodge:challenger</code>æ ‡ç­¾ã€‚ç„¶åæ›´æ–°<code>Dockerfile</code>ï¼Œå°†<code>alpine:3.4</code>æ›¿æ¢ä¸º<code>alpine:3.5</code>ï¼Œå¹¶ä¸”å†æ¬¡æ‰§è¡Œ<code>docker image build</code>å‘½ä»¤ã€‚è¯¥å‘½ä»¤ä¼šæ„å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶ä¸”æ ‡ç­¾ä¸º<code>dodge:challenger</code>ï¼ŒåŒæ—¶ç§»é™¤äº†æ—§é•œåƒä¸Šé¢å¯¹åº”çš„æ ‡ç­¾ï¼Œæ—§é•œåƒå°±å˜æˆäº†æ‚¬è™šé•œåƒ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>æŸ¥è¯¢æ˜¾ç¤ºè™šæ‚¬é•œåƒ
docker images -f dangling=true
åˆ é™¤è™šæ‚¬é•œåƒ
docker rmi $(docker images -q -f dangling=true)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¹ã€å¾®æœåŠ¡å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#ä¹ã€å¾®æœåŠ¡å®æˆ˜" aria-hidden="true">#</a> ä¹ã€å¾®æœåŠ¡å®æˆ˜</h2><p><strong>1.ä¿®æ”¹ä¹‹å‰çš„SpringBooté¡¹ç›®ymlä¸­æ•°æ®åº“é…ç½®ï¼Œæ”¹ä¸ºå®¹å™¨åŒ–çš„mysqlåœ°å€</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406083234936.png" alt="image-20220406083234936" tabindex="0" loading="lazy"><figcaption>image-20220406083234936</figcaption></figure><p><strong>2.æ ¹æ®å®ä½“ç±»æ–°å»ºæ•°æ®åº“</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ä¸»é”®ID&#39;</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å§“å&#39;</span><span class="token punctuation">,</span>
    age <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å¹´é¾„&#39;</span><span class="token punctuation">,</span>
    email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;é‚®ç®±&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Banana&#39;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&#39;test1@pyy.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Jack&#39;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&#39;test2@pyy.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">&#39;test3@pyy.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Milk&#39;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">&#39;test4@pyy.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">&#39;zs@qq&#39;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;asd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Apple&#39;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">&#39;test5@pyy.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.é¡¹ç›®æ‰“åŒ…</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220405123335304.png" alt="image-20220405123335304" tabindex="0" loading="lazy"><figcaption>image-20220405123335304</figcaption></figure><p><strong>4. å®¹å™¨åŒ–myqsl</strong></p><p>docker run -d -p 3306:3306 --privileged=true -v /pyy/mysql/log:/var/log/mysql -v /pyy/mysql/data:/var/lib/mysql -v /pyy/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=a --name mysql mysql:5.7</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406083505545.png" alt="image-20220406083505545" tabindex="0" loading="lazy"><figcaption>image-20220406083505545</figcaption></figure><p><strong>5. æ„å»ºé•œåƒ</strong></p><p>[root@VM-16-8-centos springboot_test]## cat Dockerfile FROM java:8 MAINTAINER pyy VOLUME /tmp ADD sys-admin-0.0.1-SNAPSHOT.jar pyy_docker.jar RUN bash -c &#39;touch /pyy_docker.jar&#39; ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/pyy_docker.jar&quot;] EXPOSE 8080</p><p>docker build -t pyy_docker:1.0 .</p><p><strong>6.è¿è¡Œå®¹å™¨</strong></p><p>docker run -d -p 8080:8080 pyy_docker:1.6</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406084507695.png" alt="image-20220406084507695" tabindex="0" loading="lazy"><figcaption>image-20220406084507695</figcaption></figure><p><strong>7.æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406084548796.png" alt="image-20220406084548796" tabindex="0" loading="lazy"><figcaption>image-20220406084548796</figcaption></figure><h2 id="åã€ç½‘ç»œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#åã€ç½‘ç»œæ¨¡å¼" aria-hidden="true">#</a> åã€ç½‘ç»œæ¨¡å¼</h2><h3 id="_10-1-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_10-1-ç®€ä»‹" aria-hidden="true">#</a> 10.1 ç®€ä»‹</h3><p>dockerä¸å¯åŠ¨ï¼Œé»˜è®¤ç½‘ç»œæƒ…å†µ</p><ul><li>ens33</li><li>lo</li><li>virbr0</li></ul><p>dockerå¯åŠ¨åï¼Œç½‘ç»œæƒ…å†µ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## docker network ls</span>
NETWORK ID     NAME      DRIVER    SCOPE
2c74a4b5d76a   bridge    bridge    <span class="token builtin class-name">local</span>
dd3008378058   <span class="token function">host</span>      <span class="token function">host</span>      <span class="token builtin class-name">local</span>
9ebd6b25e4c3   none      null      <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¸ç”¨å‘½ä»¤</strong></p><p>æŸ¥çœ‹ç½‘ç»œ</p><p>docker network ls</p><p>æŸ¥çœ‹ç½‘ç»œæºæ•°æ®</p><p>docker network inspect XXXç½‘ç»œåå­—</p><p>åˆ é™¤ç½‘ç»œ</p><p>docker network rm XXXç½‘ç»œåå­—</p><p><strong>æ¡ˆä¾‹</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## docker network create test_docker_network</span>
7a7c98e51c6effc0498579ec3cf9bfe6b0a9052ae8c3996781f61389b2529165
<span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## docker network ls</span>
NETWORK ID     NAME                  DRIVER    SCOPE
2c74a4b5d76a   bridge                bridge    <span class="token builtin class-name">local</span>
dd3008378058   <span class="token function">host</span>                  <span class="token function">host</span>      <span class="token builtin class-name">local</span>
9ebd6b25e4c3   none                  null      <span class="token builtin class-name">local</span>
7a7c98e51c6e   test_docker_network   bridge    <span class="token builtin class-name">local</span>
<span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## docker network rm test_docker_network</span>
test_docker_network
<span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## docker network ls</span>
NETWORK ID     NAME      DRIVER    SCOPE
2c74a4b5d76a   bridge    bridge    <span class="token builtin class-name">local</span>
dd3008378058   <span class="token function">host</span>      <span class="token function">host</span>      <span class="token builtin class-name">local</span>
9ebd6b25e4c3   none      null      <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç½‘ç»œæ¨¡å¼èƒ½å¹²å˜›</strong></p><p>å®¹å™¨é—´çš„äº’è”å’Œé€šä¿¡ä»¥åŠç«¯å£æ˜ å°„</p><p>å®¹å™¨IPå˜åŠ¨æ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡åç›´æ¥ç½‘ç»œé€šä¿¡è€Œä¸å—åˆ°å½±å“</p><p><strong>å°æ€»ç»“</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406090336141.png" alt="image-20220406090336141" tabindex="0" loading="lazy"><figcaption>image-20220406090336141</figcaption></figure><ul><li>bridgeæ¨¡å¼ï¼šä½¿ç”¨--network bridgeæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨docker0</li><li>hostæ¨¡å¼ï¼šä½¿ç”¨--network hostæŒ‡å®š</li><li>noneæ¨¡å¼ï¼šä½¿ç”¨--network noneæŒ‡å®š</li><li>containeræ¨¡å¼ï¼šä½¿ç”¨--network container:NAMEæˆ–è€…å®¹å™¨IDæŒ‡å®š</li></ul><p><mark>å®¹å™¨å®ä¾‹å†…é»˜è®¤ç½‘ç»œIPç”Ÿäº§è§„åˆ™</mark></p><p>è¿è¡Œcentos1å’Œcentos2ï¼ŒæŸ¥çœ‹å®ƒä»¬çš„ipåˆ†åˆ«ä¸º172.16.0.2ï¼Œ172.16.0.3ã€‚é‚£ä¹ˆå½“centos2æŒ‚æ‰çš„è¯ï¼Œåœ¨æ–°å»ºå®¹å™¨centos3ï¼Œé‚£ä¹ˆå®ƒçš„ipå°±ä¼šå˜ä¸º172.16.0.3</p><h3 id="_10-2-bridge" tabindex="-1"><a class="header-anchor" href="#_10-2-bridge" aria-hidden="true">#</a> 10.2 bridge</h3><blockquote><p>å¾ˆåƒäº¤æ¢æœº</p></blockquote><p>Docker æœåŠ¡é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ª docker0 ç½‘æ¡¥ï¼ˆå…¶ä¸Šæœ‰ä¸€ä¸ª docker0 å†…éƒ¨æ¥å£ï¼‰ï¼Œè¯¥æ¡¥æ¥ç½‘ç»œçš„åç§°ä¸ºdocker0ï¼Œ==å®ƒåœ¨å†…æ ¸å±‚è¿é€šäº†å…¶ä»–çš„ç‰©ç†æˆ–è™šæ‹Ÿç½‘å¡ï¼Œè¿™å°±å°†æ‰€æœ‰å®¹å™¨å’Œæœ¬åœ°ä¸»æœºéƒ½æ”¾åˆ°åŒä¸€ä¸ªç‰©ç†ç½‘ç»œã€‚==Docker é»˜è®¤æŒ‡å®šäº† docker0 æ¥å£ çš„ IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œè®©ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ç½‘æ¡¥ç›¸äº’é€šä¿¡ã€‚</p><p>1 Dockerä½¿ç”¨Linuxæ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ªDockerå®¹å™¨ç½‘æ¡¥(docker0)ï¼ŒDockerå¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ®Dockerç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ªIPåœ°å€ï¼Œç§°ä¸ºContainer-IPï¼ŒåŒæ—¶Dockerç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€å®¿ä¸»æœºå†…çš„å®¹å™¨éƒ½æ¥å…¥åŒä¸€ä¸ªç½‘æ¡¥ï¼Œè¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„Container-IPç›´æ¥é€šä¿¡ã€‚</p><p>2 <mark>docker run çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šnetworkçš„è¯é»˜è®¤ä½¿ç”¨çš„ç½‘æ¡¥æ¨¡å¼å°±æ˜¯bridge=ï¼Œä½¿ç”¨çš„å°±æ˜¯docker0</mark>ã€‚åœ¨å®¿ä¸»æœºifconfig,å°±å¯ä»¥çœ‹åˆ°docker0å’Œè‡ªå·±createçš„network(åé¢è®²)eth0ï¼Œeth1ï¼Œeth2â€¦â€¦ä»£è¡¨ç½‘å¡ä¸€ï¼Œç½‘å¡äºŒï¼Œç½‘å¡ä¸‰â€¦â€¦ï¼Œloä»£è¡¨127.0.0.1ï¼Œå³localhostï¼Œinet addrç”¨æ¥è¡¨ç¤ºç½‘å¡çš„IPåœ°å€</p><p>3 ç½‘æ¡¥docker0åˆ›å»ºä¸€å¯¹å¯¹ç­‰è™šæ‹Ÿè®¾å¤‡æ¥å£ä¸€ä¸ªå«<mark>vethï¼Œå¦ä¸€ä¸ªå«eth0ï¼Œæˆå¯¹åŒ¹é…</mark>ã€‚ 3.1 æ•´ä¸ªå®¿ä¸»æœºçš„ç½‘æ¡¥æ¨¡å¼éƒ½æ˜¯docker0ï¼Œç±»ä¼¼ä¸€ä¸ªäº¤æ¢æœºæœ‰ä¸€å †æ¥å£ï¼Œæ¯ä¸ªæ¥å£å«vethï¼Œåœ¨æœ¬åœ°ä¸»æœºå’Œå®¹å™¨å†…åˆ†åˆ«åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼Œå¹¶è®©ä»–ä»¬å½¼æ­¤è”é€šï¼ˆè¿™æ ·ä¸€å¯¹æ¥å£å«veth pairï¼‰ï¼› 3.2 æ¯ä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨ä¹Ÿæœ‰ä¸€å—ç½‘å¡ï¼Œæ¯ä¸ªæ¥å£å«eth0ï¼› 3.3 docker0ä¸Šé¢çš„æ¯ä¸ªvethåŒ¹é…æŸä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨çš„eth0ï¼Œä¸¤ä¸¤é…å¯¹ï¼Œä¸€ä¸€åŒ¹é…ã€‚ é€šè¿‡ä¸Šè¿°ï¼Œå°†å®¿ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªå†…éƒ¨ç½‘ç»œä¸Šï¼Œä¸¤ä¸ªå®¹å™¨åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹,ä¼šä»è¿™ä¸ªç½‘å…³ä¸‹å„è‡ªæ‹¿åˆ°åˆ†é…çš„ipï¼Œæ­¤æ—¶ä¸¤ä¸ªå®¹å™¨çš„ç½‘ç»œæ˜¯äº’é€šçš„ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406091532965.png" alt="image-20220406091532965" tabindex="0" loading="lazy"><figcaption>image-20220406091532965</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406091916322.png" alt="image-20220406091916322" tabindex="0" loading="lazy"><figcaption>image-20220406091916322</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406092125307.png" alt="image-20220406092125307" tabindex="0" loading="lazy"><figcaption>image-20220406092125307</figcaption></figure><h3 id="_10-3-host" tabindex="-1"><a class="header-anchor" href="#_10-3-host" aria-hidden="true">#</a> 10.3 host</h3><p>ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€ä¸å¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œä¸å†éœ€è¦é¢å¤–è¿›è¡ŒNAT è½¬æ¢ã€‚</p><p>å®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceï¼Œ è€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork Namespaceã€‚<mark>å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡è€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚</mark></p><p>é”™è¯¯çš„å†™æ³•ï¼š</p><p>docker run -d -p 8083:8080 --network host --name tomcat83 pyy/tomcat8-jdk8</p><p>æ­£ç¡®çš„å†™æ³•</p><p>docker run -d --network host --name tomcat83 pyy/tomcat8-jdk8</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406092343717.png" alt="image-20220406092343717" tabindex="0" loading="lazy"><figcaption>image-20220406092343717</figcaption></figure><p><a href="http://xn--IP-wz2c754c5qn:8080/" target="_blank" rel="noopener noreferrer">http://å®¿ä¸»æœºIP:8080/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åœ¨CentOSé‡Œé¢ç”¨é»˜è®¤çš„ç«ç‹æµè§ˆå™¨è®¿é—®å®¹å™¨å†…çš„tomcat83çœ‹åˆ°è®¿é—®æˆåŠŸï¼Œå› ä¸ºæ­¤æ—¶å®¹å™¨çš„IPå€Ÿç”¨ä¸»æœºçš„ï¼Œ æ‰€ä»¥å®¹å™¨å…±äº«å®¿ä¸»æœºç½‘ç»œIPï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¤–éƒ¨ä¸»æœºä¸å®¹å™¨å¯ä»¥ç›´æ¥é€šä¿¡ã€‚</p><h3 id="_10-4-none" tabindex="-1"><a class="header-anchor" href="#_10-4-none" aria-hidden="true">#</a> 10.4 none</h3><blockquote><p>ç¦ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œåªæœ‰loæ ‡è¯†(å°±æ˜¯127.0.0.1è¡¨ç¤ºæœ¬åœ°å›ç¯)</p></blockquote><p>åœ¨noneæ¨¡å¼ä¸‹ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªDockerå®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ï¼Œåªæœ‰ä¸€ä¸ªlo éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406092902863.png" alt="image-20220406092902863" tabindex="0" loading="lazy"><figcaption>image-20220406092902863</figcaption></figure><h3 id="_10-5-container" tabindex="-1"><a class="header-anchor" href="#_10-5-container" aria-hidden="true">#</a> 10.5 container</h3><p>æ–°å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªç½‘ç»œipé…ç½®è€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„.</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406093118037.png" alt="image-20220406093118037" tabindex="0" loading="lazy"><figcaption>image-20220406093118037</figcaption></figure><p>docker run -d -p 8086:8080 --network container:tomcat85 --name tomcat86 billygoo/tomcat8-jdk8</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406093839711.png" alt="image-20220406093839711" tabindex="0" loading="lazy"><figcaption>image-20220406093839711</figcaption></figure><p>å…³é—­alpine1ï¼Œåœ¨çœ‹alpine2<img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406094014970.png" alt="image-20220406094014970" loading="lazy"></p><h3 id="_10-6-è‡ªå®šä¹‰ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#_10-6-è‡ªå®šä¹‰ç½‘ç»œ" aria-hidden="true">#</a> 10.6 è‡ªå®šä¹‰ç½‘ç»œ</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220406094316737.png" alt="image-20220406094316737" tabindex="0" loading="lazy"><figcaption>image-20220406094316737</figcaption></figure><h2 id="åä¸€ã€å®¹å™¨ç¼–æ’" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€å®¹å™¨ç¼–æ’" aria-hidden="true">#</a> åä¸€ã€å®¹å™¨ç¼–æ’</h2><h3 id="_11-1-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_11-1-ç®€ä»‹" aria-hidden="true">#</a> 11.1 ç®€ä»‹</h3><p>Compose æ˜¯ Docker å…¬å¸æ¨å‡ºçš„ä¸€ä¸ªå·¥å…·è½¯ä»¶ï¼Œå¯ä»¥ç®¡ç†å¤šä¸ª Docker å®¹å™¨ç»„æˆä¸€ä¸ªåº”ç”¨ã€‚ä½ éœ€è¦å®šä¹‰ä¸€ä¸ª YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶docker-compose.ymlï¼Œå†™å¥½å¤šä¸ªå®¹å™¨ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚ç„¶åï¼Œåªè¦ä¸€ä¸ªå‘½ä»¤ï¼Œå°±èƒ½åŒæ—¶å¯åŠ¨/å…³é—­è¿™äº›å®¹å™¨</p><p><strong>èƒ½å¹²å˜›</strong></p><p>dockerå»ºè®®æˆ‘ä»¬æ¯ä¸€ä¸ªå®¹å™¨ä¸­åªè¿è¡Œä¸€ä¸ªæœåŠ¡,å› ä¸ºdockerå®¹å™¨æœ¬èº«å ç”¨èµ„æºæå°‘,æ‰€ä»¥æœ€å¥½æ˜¯å°†æ¯ä¸ªæœåŠ¡å•ç‹¬çš„åˆ†å‰²å¼€æ¥ä½†æ˜¯è¿™æ ·æˆ‘ä»¬åˆé¢ä¸´äº†ä¸€ä¸ªé—®é¢˜ï¼Ÿ</p><p>å¦‚æœæˆ‘éœ€è¦åŒæ—¶éƒ¨ç½²å¥½å¤šä¸ªæœåŠ¡,éš¾é“è¦æ¯ä¸ªæœåŠ¡å•ç‹¬å†™Dockerfileç„¶ååœ¨æ„å»ºé•œåƒ,æ„å»ºå®¹å™¨,è¿™æ ·ç´¯éƒ½ç´¯æ­»äº†,æ‰€ä»¥dockerå®˜æ–¹ç»™æˆ‘ä»¬æä¾›äº†docker-composeå¤šæœåŠ¡éƒ¨ç½²çš„å·¥å…·</p><p>ä¾‹å¦‚è¦å®ç°ä¸€ä¸ªWebå¾®æœåŠ¡é¡¹ç›®ï¼Œé™¤äº†WebæœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“mysqlæœåŠ¡å®¹å™¨ï¼ŒredisæœåŠ¡å™¨ï¼Œæ³¨å†Œä¸­å¿ƒeurekaï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ç­‰ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>Composeå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„<strong>docker-compose.yml</strong>æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„<strong>åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</strong></p><p>å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ï¼Œç„¶åä½¿ç”¨ä¸€æ¡æŒ‡ä»¤å®‰è£…è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ä¾èµ–ï¼Œå®Œæˆæ„å»ºã€‚Docker-Compose è§£å†³äº†å®¹å™¨ä¸å®¹å™¨ä¹‹é—´å¦‚ä½•ç®¡ç†ç¼–æ’çš„é—®é¢˜ã€‚</p><p><strong>å®‰è£…</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2</span>
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
<span class="token number">100</span>   <span class="token number">664</span>  <span class="token number">100</span>   <span class="token number">664</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">982</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--   <span class="token number">982</span>
<span class="token number">100</span> <span class="token number">12</span>.1M  <span class="token number">100</span> <span class="token number">12</span>.1M    <span class="token number">0</span>     <span class="token number">0</span>  <span class="token number">29870</span>      <span class="token number">0</span>  <span class="token number">0</span>:07:06  <span class="token number">0</span>:07:06 --:--:-- <span class="token number">64748</span>
<span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## chmod +x /usr/local/bin/docker-compose</span>
<span class="token punctuation">[</span>root@VM-16-8-centos springboot_test<span class="token punctuation">]</span><span class="token comment">## cd /usr/local/bin/</span>
<span class="token punctuation">[</span>root@VM-16-8-centos bin<span class="token punctuation">]</span><span class="token comment">## vim docker-compose </span>
<span class="token punctuation">[</span>root@VM-16-8-centos bin<span class="token punctuation">]</span><span class="token comment">## ll</span>
total <span class="token number">13420</span>
-rwxr-xr-x <span class="token number">1</span> root root  <span class="token number">1001112</span> Aug  <span class="token number">5</span>  <span class="token number">2020</span> busybox-x86_64
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">12737304</span> Apr  <span class="token number">6</span> <span class="token number">10</span>:17 <span class="token function">docker-compose</span>
<span class="token punctuation">[</span>root@VM-16-8-centos bin<span class="token punctuation">]</span><span class="token comment">## docker-compose --version</span>
<span class="token function">docker-compose</span> version <span class="token number">1.29</span>.2, build 5becea4c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-2-docker-composeæ ¸å¿ƒ" tabindex="-1"><a class="header-anchor" href="#_11-2-docker-composeæ ¸å¿ƒ" aria-hidden="true">#</a> 11.2 docker-composeæ ¸å¿ƒ</h3><p><strong>ä¸€æ–‡ä»¶</strong></p><p>docker-compose.yml</p><p><strong>ä¸¤è¦ç´ </strong></p><p>æœåŠ¡ï¼ˆserviceï¼‰</p><p>ä¸€ä¸ªä¸ªåº”ç”¨å®¹å™¨å®ä¾‹ï¼Œæ¯”å¦‚è®¢å•å¾®æœåŠ¡ã€åº“å­˜å¾®æœåŠ¡ã€mysqlå®¹å™¨ã€nginxå®¹å™¨æˆ–è€…rediså®¹å™¨</p><p>å·¥ç¨‹ï¼ˆprojectï¼‰</p><p>ç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ª<mark>å®Œæ•´ä¸šåŠ¡å•å…ƒ</mark>ï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</p><p><strong>Composeä½¿ç”¨çš„ä¸‰ä¸ªæ­¥éª¤</strong></p><ol><li>ç¼–å†™Dockerfileå®šä¹‰å„ä¸ªå¾®æœåŠ¡åº”ç”¨å¹¶æ„å»ºå‡ºå¯¹åº”çš„é•œåƒæ–‡ä»¶</li><li>ä½¿ç”¨ docker-compose.yml å®šä¹‰ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œå®‰æ’å¥½æ•´ä½“åº”ç”¨ä¸­çš„å„ä¸ªå®¹å™¨æœåŠ¡ã€‚</li><li>æœ€åï¼Œæ‰§è¡Œdocker-compose upå‘½ä»¤ æ¥å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå®Œæˆä¸€é”®éƒ¨ç½²ä¸Šçº¿</li></ol><h3 id="_11-3-composeå¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_11-3-composeå¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> 11.3 Composeå¸¸ç”¨å‘½ä»¤</h3><p>docker-compose -h ## æŸ¥çœ‹å¸®åŠ© docker-compose up ## å¯åŠ¨æ‰€æœ‰docker-composeæœåŠ¡ docker-compose up -d ## å¯åŠ¨æ‰€æœ‰docker-composeæœåŠ¡å¹¶åå°è¿è¡Œ docker-compose down ## åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€å·ã€é•œåƒã€‚ docker-compose exec ymlé‡Œé¢çš„æœåŠ¡id ## è¿›å…¥å®¹å™¨å®ä¾‹å†…éƒ¨ docker-compose exec docker-compose.ymlæ–‡ä»¶ä¸­å†™çš„æœåŠ¡id /bin/bash docker-compose ps ## å±•ç¤ºå½“å‰docker-composeç¼–æ’è¿‡çš„è¿è¡Œçš„æ‰€æœ‰å®¹å™¨ docker-compose top ## å±•ç¤ºå½“å‰docker-composeç¼–æ’è¿‡çš„å®¹å™¨è¿›ç¨‹</p><p>docker-compose logs ymlé‡Œé¢çš„æœåŠ¡id ## æŸ¥çœ‹å®¹å™¨è¾“å‡ºæ—¥å¿— <strong>docker-compose config ## æ£€æŸ¥é…ç½®</strong> docker-compose config -q ## æ£€æŸ¥é…ç½®ï¼Œæœ‰é—®é¢˜æ‰æœ‰è¾“å‡º docker-compose restart ## é‡å¯æœåŠ¡ docker-compose start ## å¯åŠ¨æœåŠ¡ docker-compose stop ## åœæ­¢æœåŠ¡</p><h3 id="_11-4-å¿«é€Ÿå…¥é—¨compose" tabindex="-1"><a class="header-anchor" href="#_11-4-å¿«é€Ÿå…¥é—¨compose" aria-hidden="true">#</a> 11.4 å¿«é€Ÿå…¥é—¨Compose</h3><p>è·Ÿç€å®˜ç½‘å†™ä¸ªwordpressæ¥å†™ä¸ªå®ä¾‹</p><p>åˆ›å»ºç›®å½•my_wordpress</p><p>è¿›å…¥ç›®å½•ï¼Œåˆ›å»ºdocker-compose.ymlæ–‡ä»¶</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.9&quot;</span>
    
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> somewordpress
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> wordpress
      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> wordpress
      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> wordpress
    
  <span class="token key atrule">wordpress</span><span class="token punctuation">:</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
    <span class="token key atrule">image</span><span class="token punctuation">:</span> wordpress<span class="token punctuation">:</span>latest
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> wordpress_data<span class="token punctuation">:</span>/var/www/html
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8000:80&quot;</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">WORDPRESS_DB_HOST</span><span class="token punctuation">:</span> db
      <span class="token key atrule">WORDPRESS_DB_USER</span><span class="token punctuation">:</span> wordpress
      <span class="token key atrule">WORDPRESS_DB_PASSWORD</span><span class="token punctuation">:</span> wordpress
      <span class="token key atrule">WORDPRESS_DB_NAME</span><span class="token punctuation">:</span> wordpress
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">db_data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">wordpress_data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker-compose up -d</code>é¡¹ç›®ç›®å½•è¿è¡Œã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@VM-16-8-centos my_wordpress]## docker-compose up -d
Creating network &quot;my_wordpress_default&quot; with the default driver
Creating volume &quot;my_wordpress_db_data&quot; with default driver
Creating volume &quot;my_wordpress_wordpress_data&quot; with default driver
Pulling wordpress (wordpress:latest)...
latest: Pulling from library/wordpress
c229119241af: Already exists
47e86af584f1: Pull complete
e1bd55b3ae5f: Downloading [====&gt;                                              ]  7.903MB/91.6MB
e1bd55b3ae5f: Pull complete
1f3a70af964a: Pull complete
0f5086159710: Pull complete
7d9c764dc190: Pull complete
ec2bb7a6eead: Pull complete
9d9132470f34: Pull complete
fb23ab197126: Pull complete
cbdd566be443: Pull complete
be224cc1ae0f: Pull complete
629912c3cae4: Pull complete
f1bae9b2bf5b: Pull complete
19542807523e: Pull complete
59191c568fb8: Pull complete
30be9b012597: Pull complete
bb41528d36dd: Pull complete
bfd3efbb7409: Pull complete
7f19a53dfc12: Pull complete
23dc552fade0: Pull complete
5133d8c158a7: Pull complete
Digest: sha256:c8d7b938e831b715cf16f22b678f9c7a0ffd5e5efa9b9b2d77f39bed5cf5b2fd
Status: Downloaded newer image for wordpress:latest
Creating my_wordpress_db_1 ... done
Creating my_wordpress_wordpress_1 ... done
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•</p><blockquote><p>åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„è®°å¾—æ”¾å¼€å¼€äº‘æœåŠ¡å™¨çš„ç«¯å£</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407135259844.png" alt="image-2022040713525984" tabindex="0" loading="lazy"><figcaption>image-2022040713525984</figcaption></figure><h2 id="åäºŒã€portainer" tabindex="-1"><a class="header-anchor" href="#åäºŒã€portainer" aria-hidden="true">#</a> åäºŒã€Portainer</h2><h3 id="_12-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_12-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 12.1 æ˜¯ä»€ä¹ˆ</h3><p>Portainer æ˜¯ä¸€æ¬¾è½»é‡çº§çš„åº”ç”¨ï¼Œå®ƒæä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œç”¨äºæ–¹ä¾¿åœ°ç®¡ç†Dockerç¯å¢ƒï¼ŒåŒ…æ‹¬å•æœºç¯å¢ƒå’Œé›†ç¾¤ç¯å¢ƒã€‚</p><h3 id="_12-2-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_12-2-å®‰è£…" aria-hidden="true">#</a> 12.2 å®‰è£…</h3><p><a href="https://www.portainer.io/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="å®‰è£…nginx" tabindex="-1"><a class="header-anchor" href="#å®‰è£…nginx" aria-hidden="true">#</a> å®‰è£…nginx</h3><p>docker run --name nginx -p 80:80 --link=tomcat:tomcat1 --link=tomcat02:tomca -v /opt/docker-nginx/nginx.conf:/etc/nginx/nginx.conf -v /opt/docker-nginx/log:/var/log/nginx -v /opt/docker-nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf -d 313ec0a602bc</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407141316883.png" alt="image-20220407141316883" tabindex="0" loading="lazy"><figcaption>image-20220407141316883</figcaption></figure><p>å› ä¸ºæˆ‘dockerç¯å¢ƒéƒ¨ç½²åœ¨äº†äº‘æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ç›´æ¥é€‰æœ¬åœ°å³å¯</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407141559059.png" alt="image-20220407141559059" tabindex="0" loading="lazy"><figcaption>image-20220407141559059</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407141903885.png" alt="image-20220407141903885" tabindex="0" loading="lazy"><figcaption>image-20220407141903885</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407143128082.png" alt="image-20220407143128082" tabindex="0" loading="lazy"><figcaption>image-20220407143128082</figcaption></figure><p><strong>æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407143207736.png" alt="image-20220407143207736" tabindex="0" loading="lazy"><figcaption>image-20220407143207736</figcaption></figure><p><strong>docker stats</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407143611100.png" alt="image-20220407143611100" tabindex="0" loading="lazy"><figcaption>image-20220407143611100</figcaption></figure><h2 id="åä¸‰ã€cadvisor-influxdb-granfana" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€cadvisor-influxdb-granfana" aria-hidden="true">#</a> åä¸‰ã€CAdvisor+InfluxDB+Granfana</h2><p><strong>docker ps</strong></p><p><strong>docker stats</strong></p><blockquote><p>ç”¨æ¥æŸ¥çœ‹å®¹å™¨å ç”¨èµ„æº</p><p>é€šè¿‡docker statså‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹åˆ°å½“å‰å®¿ä¸»æœºä¸Šæ‰€æœ‰å®¹å™¨çš„CPU,å†…å­˜ä»¥åŠç½‘ç»œæµé‡ç­‰æ•°æ®ï¼Œä¸€èˆ¬å°å…¬å¸å¤Ÿç”¨äº†ã€‚ã€‚ã€‚ã€‚</p><p>ä½†æ˜¯ï¼Œ</p><p>docker statsç»Ÿè®¡ç»“æœåªèƒ½æ˜¯å½“å‰å®¿ä¸»æœºçš„å…¨éƒ¨å®¹å™¨ï¼Œæ•°æ®èµ„æ–™æ˜¯å®æ—¶çš„ï¼Œæ²¡æœ‰åœ°æ–¹å­˜å‚¨ã€æ²¡æœ‰å¥åº·æŒ‡æ ‡è¿‡çº¿é¢„è­¦ç­‰åŠŸèƒ½</p></blockquote><h3 id="_13-1-å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢" tabindex="-1"><a class="header-anchor" href="#_13-1-å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢" aria-hidden="true">#</a> 13.1 å®¹å™¨ç›‘æ§ä¸‰å‰‘å®¢</h3><p>CAdvisorç›‘æ§æ”¶é›†+InfluxDBå­˜å‚¨æ•°æ®+Granfanaå±•ç¤ºå›¾è¡¨</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407191755111.png" alt="image-20220407191755111" tabindex="0" loading="lazy"><figcaption>image-20220407191755111</figcaption></figure><p>ä¸‹é¢æˆ‘ä»¬ç”¨docker-composeä¸€é”®éƒ¨ç½²ä¸‰å‰‘å®¢</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.1&#39;</span>
 
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">grafana_data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
<span class="token key atrule">services</span><span class="token punctuation">:</span>
 <span class="token key atrule">influxdb</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> tutum/influxdb<span class="token punctuation">:</span><span class="token number">0.9</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> PRE_CREATE_DB=cadvisor
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;8083:8083&quot;</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;8086:8086&quot;</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ./data/influxdb<span class="token punctuation">:</span>/data
 
 <span class="token key atrule">cadvisor</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> google/cadvisor
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> influxdb<span class="token punctuation">:</span>influxsrv
  <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>storage_driver=influxdb <span class="token punctuation">-</span>storage_driver_db=cadvisor <span class="token punctuation">-</span>storage_driver_host=influxsrv<span class="token punctuation">:</span><span class="token number">8086</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;8080:8080&quot;</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /<span class="token punctuation">:</span>/rootfs<span class="token punctuation">:</span>ro
    <span class="token punctuation">-</span> /var/run<span class="token punctuation">:</span>/var/run<span class="token punctuation">:</span>rw
    <span class="token punctuation">-</span> /sys<span class="token punctuation">:</span>/sys<span class="token punctuation">:</span>ro
    <span class="token punctuation">-</span> /var/lib/docker/<span class="token punctuation">:</span>/var/lib/docker<span class="token punctuation">:</span>ro
 
 <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
  <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">&quot;104&quot;</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana
  <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">&quot;104&quot;</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> influxdb<span class="token punctuation">:</span>influxsrv
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;3000:3000&quot;</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> grafana_data<span class="token punctuation">:</span>/var/lib/grafana
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> HTTP_USER=admin
    <span class="token punctuation">-</span> HTTP_PASS=admin
    <span class="token punctuation">-</span> INFLUXDB_HOST=influxsrv
    <span class="token punctuation">-</span> INFLUXDB_PORT=8086
    <span class="token punctuation">-</span> INFLUXDB_NAME=cadvisor
    <span class="token punctuation">-</span> INFLUXDB_USER=root
    <span class="token punctuation">-</span> INFLUXDB_PASS=root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220407165542929.png" alt="image-20220407165542929" tabindex="0" loading="lazy"><figcaption>image-20220407165542929</figcaption></figure><h2 id="bugè®°å½•" tabindex="-1"><a class="header-anchor" href="#bugè®°å½•" aria-hidden="true">#</a> bugè®°å½•</h2><p><mark>æ–¹æ¡ˆä¸€</mark></p><p>dockerå¯åŠ¨çš„nginx</p><p>æƒ³ä¿®æ”¹çš„å®ƒçš„é…ç½®æ–‡ä»¶ï¼Œviå‘½ä»¤ä¹Ÿæ²¡æœ‰ï¼Œvimå‘½ä»¤ä¹Ÿæ²¡æœ‰</p><p>apt-get update å®Œæˆä¹‹å apt-get install vim</p><p><mark>æ–¹æ¡ˆäºŒ</mark></p><p>ä½†æ˜¯è¿™æ ·å¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬åœ¨å®¿ä¸»æœºæŒ‚è½½å·å³å¯</p><p>éœ€è¦è‡ªå·±å‡†å¤‡å¥½nginx.conf å’Œdefault.confæ–‡ä»¶ï¼Œæˆ‘æ˜¯ç›´æ¥ä»å®¹å™¨é‡Œé¢å¤åˆ¶çš„ï¼Œç„¶åæ ¹æ®è‡ªå·±çš„éœ€è¦æ”¹çš„</p><p>mkdir -p /opt/docker-nginx/conf.d</p><p>mv nginx.conf /opt/docker-nginx/ &amp;&amp; mv default.conf /opt/docker-nginx/conf.d/</p><p>docker run --name nginx -p 80:80 -v /opt/docker-nginx/nginx.conf:/etc/nginx/nginx.conf -v /opt/docker-nginx/log:/var/log/nginx -v /opt/docker-nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf -d nginx</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/ssss/edit/main/demo/theme-docs/src/Java/å¾®æœåŠ¡å¼€å‘/Docker.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">Last update: </span><!----></div><div class="meta-item contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: mildcaq@163.com">xiaocai</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/3.SpringCloud%E9%AB%98%E7%BA%A7.html" class="nav-link prev" aria-label="SpringCloudé«˜çº§"><div class="hint"><span class="arrow left"></span>Prev</div><div class="link"><!---->SpringCloudé«˜çº§</div></a><a href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/ElasticSeach.html" class="nav-link next" aria-label="Elasticsearch"><div class="hint">Next<span class="arrow right"></span></div><div class="link">Elasticsearch<!----></div></a></nav><div class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">NickName</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">E-Mail</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">Website</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="Write a comment here (Fill in the email address to receive an email notification when being replied)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>Preview:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="Emoji" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="GIF"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="Upload Image"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="Preview"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-text-number">0 <!--v-if--> Â Words</div><button type="button" class="wl-btn">Login</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->Submit<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="Search GIF"><div class="wl-gallery" style="gap:6px;"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> Comments</div><ul class="wl-sort"><!--[--><li class="active">Latest</li><li class="">Oldest</li><li class="">Hottest</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.14.4</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Copyright Â© 2022 å°è”¡coding</div><div class="copyright">Copyright Â© 2022 xiaocai</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-59753726.js" defer></script>
  </body>
</html>
