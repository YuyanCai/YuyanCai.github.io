<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/study-project/mall/"><meta property="og:site_name" content="å°è”¡coding"><meta property="og:title" content="é¡¹ç›®ç¯å¢ƒ"><meta property="og:description" content="Vagrantéƒ¨ç½²Centos Vagrantå®˜ç½‘ä¸‹è½½å³å¯ è¿™é‡Œé‡‡ç”¨ä¸­ç§‘å¤§çš„é•œåƒç«™è¿›è¡Œä¸‹è½½ åœ°å€å¦‚ä¸‹ï¼š Index of /centos-cloud/centos/7/vagrant/x8664/images/ (ustc.edu.cn) (https://mirrors.ustc.edu.cn/centos-cloud/centos/7/vag..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-12-31T12:07:23.000Z"><meta property="og:locale" content="en-US"><meta property="article:modified_time" content="2022-12-31T12:07:23.000Z"><title>é¡¹ç›®ç¯å¢ƒ | å°è”¡coding</title><meta name="description" content="Vagrantéƒ¨ç½²Centos Vagrantå®˜ç½‘ä¸‹è½½å³å¯ è¿™é‡Œé‡‡ç”¨ä¸­ç§‘å¤§çš„é•œåƒç«™è¿›è¡Œä¸‹è½½ åœ°å€å¦‚ä¸‹ï¼š Index of /centos-cloud/centos/7/vagrant/x8664/images/ (ustc.edu.cn) (https://mirrors.ustc.edu.cn/centos-cloud/centos/7/vag...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-b0136e4c.css" as="style"><link rel="stylesheet" href="/assets/style-b0136e4c.css">
    <link rel="modulepreload" href="/assets/app-59753726.js"><link rel="modulepreload" href="/assets/framework-f12b30cc.js"><link rel="modulepreload" href="/assets/index.html-e609741f.js"><link rel="modulepreload" href="/assets/index.html-5564730a.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="å°è”¡coding"><!----><span class="site-name hide-in-pad">å°è”¡coding</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/front/Vue/" class="nav-link" aria-label="å‰ç«¯"><span class="font-icon icon iconfont icon-javascript" style=""></span>å‰ç«¯<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Java/" class="nav-link" aria-label="åç«¯"><span class="font-icon icon iconfont icon-java" style=""></span>åç«¯<!----></a></div><div class="nav-item hide-in-mobile"><a href="/devops/" class="nav-link" aria-label="è¿ç»´"><span class="font-icon icon iconfont icon-centos" style=""></span>è¿ç»´<!----></a></div><div class="nav-item hide-in-mobile"><a href="/mysql/" class="nav-link" aria-label="Mysql"><span class="font-icon icon iconfont icon-more" style=""></span>Mysql<!----></a></div><div class="nav-item hide-in-mobile"><a href="/redis/" class="nav-link" aria-label="Redis"><span class="font-icon icon iconfont icon-launch" style=""></span>Redis<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¡¹ç›®å®æˆ˜"><span class="title"><span class="font-icon icon iconfont icon-hot" style=""></span>é¡¹ç›®å®æˆ˜</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/study-project/school/" class="nav-link" aria-label="è°·ç²’å­¦é™¢"><!---->è°·ç²’å­¦é™¢<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/" class="router-link-active router-link-exact-active nav-link active" aria-label="è°·ç²’å•†åŸ"><!---->è°·ç²’å•†åŸ<!----></a></li><li class="dropdown-item"><a href="/study-project/evaluate/" class="nav-link" aria-label="é»‘é©¬ç‚¹è¯„"><!---->é»‘é©¬ç‚¹è¯„<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="æ¢èŠ±äº¤å‹"><!---->æ¢èŠ±äº¤å‹<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="é»‘é©¬å¤´æ¡"><!---->é»‘é©¬å¤´æ¡<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="å“è¾¾ç‰©æµTMS"><!---->å“è¾¾ç‰©æµTMS<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="æ™ºç‰›è‚¡"><!---->æ™ºç‰›è‚¡<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="äº¿å¯æ§"><!---->äº¿å¯æ§<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/study-project/mall/#" class="router-link-active router-link-exact-active nav-link" aria-label="å¼€æºé¡¹ç›®"><!---->å¼€æºé¡¹ç›®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜"><span class="title"><span class="font-icon icon iconfont icon-linux" style=""></span>å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/mac/idea.html" class="nav-link" aria-label="MACä½¿ç”¨IDEAå°æŠ€å·§"><!---->MACä½¿ç”¨IDEAå°æŠ€å·§<!----></a></li><li class="dropdown-item"><a href="/mac/linux.html" class="nav-link" aria-label="Linuxä½¿ç”¨å°æŠ€å·§"><!---->Linuxä½¿ç”¨å°æŠ€å·§<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/study-project/mall/%E5%9F%BA%E7%A1%80%E7%AF%871.html" class="nav-link sidebar-link sidebar-page" aria-label="åŸºç¡€ç¯‡1"><!---->åŸºç¡€ç¯‡1<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/study-project/mall/%E5%9F%BA%E7%A1%80%E7%AF%872.html" class="nav-link sidebar-link sidebar-page" aria-label="åŸºç¡€ç¯‡2"><!---->åŸºç¡€ç¯‡2<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/study-project/mall/%E9%AB%98%E7%BA%A7%E7%AF%871.html" class="nav-link sidebar-link sidebar-page" aria-label="é«˜çº§ç¯‡1"><!---->é«˜çº§ç¯‡1<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/study-project/mall/%E9%AB%98%E7%BA%A7%E7%AF%872.html" class="nav-link sidebar-link sidebar-page" aria-label="é«˜çº§ç¯‡2"><!---->é«˜çº§ç¯‡2<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/study-project/mall/%E9%83%A8%E7%BD%B2%E7%AF%871.html" class="nav-link sidebar-link sidebar-page" aria-label="éƒ¨ç½²K8sç¯å¢ƒ"><!---->éƒ¨ç½²K8sç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/study-project/mall/%E9%83%A8%E7%BD%B2%E7%AF%872.html" class="nav-link sidebar-link sidebar-page" aria-label="K8så¿«é€Ÿå…¥é—¨"><!---->K8så¿«é€Ÿå…¥é—¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->é¡¹ç›®ç¯å¢ƒ</h1><div class="page-info"><span class="author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://xiaocaicoding.cn" target="_blank" rel="noopener noreferrer">xiaocai</a></span><span property="author" content="xiaocai"></span></span><!----><span class="date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-12-31T12:07:23.000Z"></span><!----><!----><span class="reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 44 min</span><meta property="timeRequired" content="PT44M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#vagrantéƒ¨ç½²centos" class="router-link-active router-link-exact-active toc-link level2">Vagrantéƒ¨ç½²Centos</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#è™šæ‹Ÿæœºçš„é…ç½®" class="router-link-active router-link-exact-active toc-link level2">è™šæ‹Ÿæœºçš„é…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ç½‘ç»œ" class="router-link-active router-link-exact-active toc-link level3">ç½‘ç»œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ç™»å½•" class="router-link-active router-link-exact-active toc-link level3">ç™»å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#yumæºé…ç½®" class="router-link-active router-link-exact-active toc-link level3">yumæºé…ç½®</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#dockerç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level2">Dockerç¯å¢ƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#yumå®‰è£…docker" class="router-link-active router-link-exact-active toc-link level3">yumå®‰è£…docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é…ç½®åŠ é€Ÿå™¨" class="router-link-active router-link-exact-active toc-link level3">é…ç½®åŠ é€Ÿå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å®‰è£…mysql" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…Mysql</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å®‰è£…redis" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å®‰è£…nginx" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…Nginx</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#gité…ç½®" class="router-link-active router-link-exact-active toc-link level2">Gité…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é…ç½®-git" class="router-link-active router-link-exact-active toc-link level3">é…ç½® Git</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é…ç½®-ssh-å…å¯†ç™»å½•" class="router-link-active router-link-exact-active toc-link level3">é…ç½® Ssh å…å¯†ç™»å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#giteeé…ç½®" class="router-link-active router-link-exact-active toc-link level3">Giteeé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ä»giteeå¯¼å…¥ä»£ç åˆ°idea" class="router-link-active router-link-exact-active toc-link level3">ä»Giteeå¯¼å…¥ä»£ç åˆ°IDEA</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å»ºç«‹é¡¹ç›®åŸºæœ¬æ¶æ„" class="router-link-active router-link-exact-active toc-link level2">å»ºç«‹é¡¹ç›®åŸºæœ¬æ¶æ„</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æäº¤ä»£ç åˆ°gitee" class="router-link-active router-link-exact-active toc-link level3">æäº¤ä»£ç åˆ°gitee</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#åˆå§‹åŒ–æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level3">åˆå§‹åŒ–æ•°æ®åº“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å¿«é€Ÿæ­å»ºåå°ç®¡ç†ç³»ç»Ÿ" class="router-link-active router-link-exact-active toc-link level2">å¿«é€Ÿæ­å»ºåå°ç®¡ç†ç³»ç»Ÿ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ä¸‹è½½ä»£ç " class="router-link-active router-link-exact-active toc-link level3">ä¸‹è½½ä»£ç </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å¯¼å…¥åç«¯ä»£ç " class="router-link-active router-link-exact-active toc-link level3">å¯¼å…¥åç«¯ä»£ç </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å¯¼å…¥å‰ç«¯ä»£ç " class="router-link-active router-link-exact-active toc-link level3">å¯¼å…¥å‰ç«¯ä»£ç </a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ç”Ÿæˆæ‰€æœ‰åŸºæœ¬crudä»£ç " class="router-link-active router-link-exact-active toc-link level2">ç”Ÿæˆæ‰€æœ‰åŸºæœ¬CRUDä»£ç </a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ä»£ç ç”Ÿæˆå™¨æ³¨æ„ç‚¹" class="router-link-active router-link-exact-active toc-link level3">ä»£ç ç”Ÿæˆå™¨æ³¨æ„ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#productæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">productæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#couponæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">couponæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#memberæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">memberæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#orderæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">orderæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#wareæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">wareæ¨¡å—</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ç‰ˆæœ¬é€‰æ‹©" class="router-link-active router-link-exact-active toc-link level2">ç‰ˆæœ¬é€‰æ‹©</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#nacos" class="router-link-active router-link-exact-active toc-link level2">Nacos</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#feign" class="router-link-active router-link-exact-active toc-link level2">Feign</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level2">é…ç½®ä¸­å¿ƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#namespace" class="router-link-active router-link-exact-active toc-link level3">NameSpace</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#group" class="router-link-active router-link-exact-active toc-link level3">Group</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#åŠ è½½å¤šé…ç½®é›†" class="router-link-active router-link-exact-active toc-link level3">åŠ è½½å¤šé…ç½®é›†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">æ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#gatewayç½‘å…³" class="router-link-active router-link-exact-active toc-link level2">GateWayç½‘å…³</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#åç«¯æ€è·¯" class="router-link-active router-link-exact-active toc-link level2">åç«¯æ€è·¯</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æä¾›æ¥å£" class="router-link-active router-link-exact-active toc-link level3">æä¾›æ¥å£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å‰ç«¯æ€è·¯" class="router-link-active router-link-exact-active toc-link level2">å‰ç«¯æ€è·¯</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å…³é—­es6ä»£ç æ£€æŸ¥" class="router-link-active router-link-exact-active toc-link level3">å…³é—­es6ä»£ç æ£€æŸ¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ä¸ºå•†å“ç³»ç»Ÿæ–°å¢ä¾§è¾¹å¯¼èˆª" class="router-link-active router-link-exact-active toc-link level3">ä¸ºå•†å“ç³»ç»Ÿæ–°å¢ä¾§è¾¹å¯¼èˆª</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#renren-fast-vueè·¯ç”±è§„èŒƒ" class="router-link-active router-link-exact-active toc-link level3">renren-fast-vueè·¯ç”±è§„èŒƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å‰ç«¯ä»£ç " class="router-link-active router-link-exact-active toc-link level3">å‰ç«¯ä»£ç </a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#gatewayé…ç½®" class="router-link-active router-link-exact-active toc-link level2">GateWayé…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#gatewayå›é¡¾" class="router-link-active router-link-exact-active toc-link level3">GateWayå›é¡¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#è·¨åŸŸé—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">è·¨åŸŸé—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å‰ç«¯é…ç½®ç»Ÿä¸€çš„è¯·æ±‚åœ°å€" class="router-link-active router-link-exact-active toc-link level3">å‰ç«¯é…ç½®ç»Ÿä¸€çš„è¯·æ±‚åœ°å€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å°†å¾®æœåŠ¡æ¥å…¥nacos" class="router-link-active router-link-exact-active toc-link level3">å°†å¾®æœåŠ¡æ¥å…¥nacos</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#è®¾ç½®è·¯ç”±" class="router-link-active router-link-exact-active toc-link level3">è®¾ç½®è·¯ç”±</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é…ç½®è·¨åŸŸ" class="router-link-active router-link-exact-active toc-link level3">é…ç½®è·¨åŸŸ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æµ‹è¯•" class="router-link-active router-link-exact-active toc-link level2">æµ‹è¯•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#ç®€å•ä¸Šä¼ æµ‹è¯•" class="router-link-active router-link-exact-active toc-link level2">ç®€å•ä¸Šä¼ æµ‹è¯•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#aliyun-spring-boot-oss" class="router-link-active router-link-exact-active toc-link level2">Aliyun Spring Boot OSS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æ–°æ¨¡å—mall-third-service" class="router-link-active router-link-exact-active toc-link level2">æ–°æ¨¡å—mall-third-service</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æ¥å£å¼€å‘" class="router-link-active router-link-exact-active toc-link level3">æ¥å£å¼€å‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#singleupload-vue" class="router-link-active router-link-exact-active toc-link level3">singleUpload.vue</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#multiupload-vue" class="router-link-active router-link-exact-active toc-link level3">multiUpload.vue</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#policy-js" class="router-link-active router-link-exact-active toc-link level3">policy.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#é˜¿é‡Œäº‘å¼€å¯è·¨åŸŸ" class="router-link-active router-link-exact-active toc-link level3">é˜¿é‡Œäº‘å¼€å¯è·¨åŸŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æµ‹è¯•-1" class="router-link-active router-link-exact-active toc-link level3">æµ‹è¯•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#æ•°æ®æ ¡éªŒ" class="router-link-active router-link-exact-active toc-link level2">æ•°æ®æ ¡éªŒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å‰ç«¯æ•°æ®æ ¡éªŒ" class="router-link-active router-link-exact-active toc-link level3">å‰ç«¯æ•°æ®æ ¡éªŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#jsr303æ•°æ®æ ¡éªŒ" class="router-link-active router-link-exact-active toc-link level3">JSR303æ•°æ®æ ¡éªŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#åˆ†ç»„æ ¡éªŒåŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level3">åˆ†ç»„æ ¡éªŒåŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/study-project/mall/#å®Œå–„ä»£ç " class="router-link-active router-link-exact-active toc-link level3">å®Œå–„ä»£ç </a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="é¡¹ç›®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®ç¯å¢ƒ" aria-hidden="true">#</a> é¡¹ç›®ç¯å¢ƒ</h1><h2 id="vagrantéƒ¨ç½²centos" tabindex="-1"><a class="header-anchor" href="#vagrantéƒ¨ç½²centos" aria-hidden="true">#</a> Vagrantéƒ¨ç½²Centos</h2><p>Vagrantå®˜ç½‘ä¸‹è½½å³å¯</p><blockquote><p>è¿™é‡Œé‡‡ç”¨ä¸­ç§‘å¤§çš„é•œåƒç«™è¿›è¡Œä¸‹è½½</p><p>åœ°å€å¦‚ä¸‹ï¼š</p><p><a href="https://mirrors.ustc.edu.cn/centos-cloud/centos/7/vagrant/x86_64/images/" target="_blank" rel="noopener noreferrer">Index of /centos-cloud/centos/7/vagrant/x86_64/images/ (ustc.edu.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vagrant init centos7 https://mirrors.ustc.edu.cn/centos-cloud/centos/7/vagrant/x86_64/images/CentOS-7.box
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¯åŠ¨è™šæ‹Ÿæœº</strong></p><blockquote><p>å¯åŠ¨å®Œä¹‹åå°±å¯ä»¥å…³æ‰CMDçª—å£äº†ï¼Œæˆ‘ä»¬ç”¨xshellè¿æ¥å³å¯</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vagrant up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="è™šæ‹Ÿæœºçš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#è™šæ‹Ÿæœºçš„é…ç½®" aria-hidden="true">#</a> è™šæ‹Ÿæœºçš„é…ç½®</h2><h3 id="ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œ" aria-hidden="true">#</a> ç½‘ç»œ</h3><blockquote><p>ç½‘å¡ä¸ºæ¡¥æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨é…ç½®ç«¯å£è½¬å‘äº†</p><p>virtualbox <a href="https://so.csdn.net/so/search?q=%E8%99%9A%E6%8B%9F%E6%9C%BA&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">è™šæ‹Ÿæœº<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ç½‘ç»œé…ç½®ä¸­å¯¹æ¯ä¸ªç½‘å¡éƒ½æœ‰ä¸€ä¸ªæ··æ‚æ¨¡å¼çš„é…ç½®ï¼Œé»˜è®¤ä¸ºâ€œæ‹’ç»â€ï¼Œå¦‚æ­¤æ‰€æœ‰è¿›å…¥æ­¤æ¥å£çš„æŠ¥æ–‡ï¼Œå¦‚æœç›®çš„MACä¸æ­¤æ¥å£MACä¸ç›¸åŒåˆ™å…¨éƒ¨ä¸¢å¼ƒã€‚</p><p><strong>ç”±äºæ¡¥æ¥è®¾å¤‡æŠ¥æ–‡è½¬å‘æ—¶ï¼Œè¿›å…¥æ¥å£çš„æŠ¥æ–‡ç›®çš„MACä¸æ¥å£MACå®Œå…¨ä¸ç›¸åŒï¼Œæ•…å¿…é¡»å°†æ··æ‚æ¨¡å¼è®¾ç½®ä¸ºâ€œå…¨éƒ¨å…è®¸â€</strong></p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220904135647727.png" alt="image-20220904135647727" tabindex="0" loading="lazy"><figcaption>image-20220904135647727</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725165116489.png" alt="image-20220725165116489" tabindex="0" loading="lazy"><figcaption>image-20220725165116489</figcaption></figure><p><strong>é…ç½®å®Œç½‘ç»œé‡å¯ç½‘ç»œå¹¶è¿›è¡Œæµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725165149485.png" alt="image-20220725165149485" tabindex="0" loading="lazy"><figcaption>image-20220725165149485</figcaption></figure><h3 id="ç™»å½•" tabindex="-1"><a class="header-anchor" href="#ç™»å½•" aria-hidden="true">#</a> ç™»å½•</h3><p>vi /etc/ssh/sshd_config ä¿®æ”¹ PasswordAuthentication yes</p><p>é‡å¯æœåŠ¡</p><h3 id="yumæºé…ç½®" tabindex="-1"><a class="header-anchor" href="#yumæºé…ç½®" aria-hidden="true">#</a> yumæºé…ç½®</h3><blockquote><p><code>-o</code>å‚æ•°å°†æœåŠ¡å™¨çš„å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œç­‰åŒäº<code>wget</code>å‘½ä»¤ã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">curl</span> <span class="token parameter variable">-o</span> example.html https://www.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢å‘½ä»¤å°†<code>www.example.com</code>ä¿å­˜æˆ<code>example.html</code>ã€‚</p><p><code>-O</code>å‚æ•°å°†æœåŠ¡å™¨å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œå¹¶å°† URL çš„æœ€åéƒ¨åˆ†å½“ä½œæ–‡ä»¶åã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-O</span> https://www.example.com/foo/bar.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢å‘½ä»¤å°†æœåŠ¡å™¨å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º<code>bar.html</code>ã€‚</p><p><strong>ä½¿ç”¨æ–° yum æº</strong></p><blockquote><p>é˜¿é‡Œäº‘çš„è¿™ä¸ªæ˜¯æœ€å¿«çš„ï¼Œç½‘æ˜“æœ‰ç‚¹å¡</p><p>ä½¿ç”¨è¿™ç§æ–¹å¼çš„å‰ææ˜¯ç½‘ç»œæ¨¡å¼ä¸ºæ¡¥æ¥æ¨¡å¼ï¼Œèƒ½ç›´æ¥ä¸Šç½‘ï¼Œå…·ä½“æŒ‰ç…§å‰é¢çš„è¿›è¡Œé…ç½®</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget -O /etc/yum.repos.d/local.repo http://mirrors.aliyun.com/repo/Centos-7.repo
æˆ–è€…curlä¸‹è½½
curl -o /etc/yum.repos.d/local.repo http://mirrors.aliyun.com/repo/Centos-7.repo

yum clean all &amp;&amp; yum makecache

yum install -y epel-release

yum clean all &amp;&amp; yum makecache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dockerç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#dockerç¯å¢ƒ" aria-hidden="true">#</a> Dockerç¯å¢ƒ</h2><h3 id="yumå®‰è£…docker" tabindex="-1"><a class="header-anchor" href="#yumå®‰è£…docker" aria-hidden="true">#</a> yumå®‰è£…docker</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ç¬¬ä¸€æ­¥
yum install -y yum-utils \
        device-mapper-persistent-data \
        lvm2
ç¬¬äºŒæ­¥ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo &amp;&amp; yum makecache fast
ç¬¬ä¸‰æ­¥å®‰è£…
yum install docker-ce docker-ce-cli containerd.io
systemctl start docker systemctl enable docker 
docker run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220402204821446.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="é…ç½®åŠ é€Ÿå™¨" tabindex="-1"><a class="header-anchor" href="#é…ç½®åŠ é€Ÿå™¨" aria-hidden="true">#</a> é…ç½®åŠ é€Ÿå™¨</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220413165211950.png" alt="image-20220413165211950" tabindex="0" loading="lazy"><figcaption>image-20220413165211950</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo mkdir -p /etc/docker

sudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;
{
&quot;registry-mirrors&quot;: [&quot;https://3w352wd.mirror.aliyuncs.com&quot;]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®‰è£…mysql" tabindex="-1"><a class="header-anchor" href="#å®‰è£…mysql" aria-hidden="true">#</a> å®‰è£…Mysql</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql/log:/var/log/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql/data:/var/lib/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/mysql/conf:/etc/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root  <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>-p 3306:3306ï¼šå°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306ç«¯å£</li><li>-v /mydata/mysql/conf:/etc/mysqlï¼šå°†é…ç½®æ–‡ä»¶å¤¹æŒ‚åœ¨åˆ°ä¸»æœº</li><li>-v /mydata/mysql/log:/var/log/mysqlï¼šå°†æ—¥å¿—æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœº</li><li>-v /mydata/mysql/data:/var/lib/mysql/ï¼šå°†æ•°æ®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœº</li><li>-e MYSQL_ROOT_PASSWORD=rootï¼šåˆå§‹åŒ–rootç”¨æˆ·çš„å¯†ç </li></ul><p><strong>MySQL é…ç½®</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /mydata/mysql/conf/my.cnf
<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">&#39;SET collation_connection = utf8_unicode_ci&#39;</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">&#39;SET NAMES utf8&#39;</span>
character-set-server<span class="token operator">=</span>utf8
collation-server<span class="token operator">=</span>utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve <span class="token comment">#è·³è¿‡åŸŸåè§£æ</span>

<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-proot</span>
grant all privileges on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified by <span class="token string">&#39;root&#39;</span> with grant option<span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>

é€€å‡ºï¼Œè®¾ç½®å¼€å¯è‡ªåŠ¨å¯åŠ¨
<span class="token function">docker</span> update mysql<span class="token punctuation">(</span>æœåŠ¡å<span class="token punctuation">)</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mysqlæœ¬åœ°è¿æ¥å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#mysqlæœ¬åœ°è¿æ¥å¤±è´¥" aria-hidden="true">#</a> Mysqlæœ¬åœ°è¿æ¥å¤±è´¥</h4><ul><li>pcå’Œvmèƒ½äº’ç›¸pingé€š</li><li>å…³é—­firewalldï¼Œæˆ–æ”¾å¼€ç«¯å£</li><li>æ‰“å¼€ipv4è½¬å‘ <ul><li>vi /etc/sysctl.conf net.ipv4.ip_forward=1 #æ·»åŠ æ­¤è¡Œé…ç½®</li><li>systemctl restart network &amp;&amp; systemctl restart docker</li><li>sysctl net.ipv4.ip_forward</li><li>å¦‚æœè¿”å›ä¸ºâ€œnet.ipv4.ip_forward = 1â€åˆ™è¡¨ç¤ºä¿®æ”¹æˆåŠŸ</li></ul></li></ul><h3 id="å®‰è£…redis" tabindex="-1"><a class="header-anchor" href="#å®‰è£…redis" aria-hidden="true">#</a> å®‰è£…Redis</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token parameter variable">--name</span> redis <span class="token parameter variable">-v</span> /mydata/redis/data:/data <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> redis redis-server /etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®‰è£…nginx" tabindex="-1"><a class="header-anchor" href="#å®‰è£…nginx" aria-hidden="true">#</a> å®‰è£…Nginx</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>éšä¾¿å¯åŠ¨ä¸€ä¸ªNginxï¼Œç›®çš„æ˜¯å•çº¯ä¸ºäº†å¤åˆ¶é…ç½®æ–‡ä»¶
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-d</span> nginx:1.10

<span class="token function">docker</span> container <span class="token function">cp</span> nginx:/etc/nginx <span class="token builtin class-name">.</span>
<span class="token function">mv</span> nginx/ conf
<span class="token function">mv</span> conf/ /mydata/nginx
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> nginx

ç»“æ„å¦‚ä¸‹ï¼š
<span class="token punctuation">[</span>root@localhost mydata<span class="token punctuation">]</span><span class="token comment"># cd nginx/</span>
<span class="token punctuation">[</span>root@localhost nginx<span class="token punctuation">]</span><span class="token comment"># ls</span>
conf
<span class="token punctuation">[</span>root@localhost nginx<span class="token punctuation">]</span><span class="token comment"># cd conf/</span>
<span class="token punctuation">[</span>root@localhost conf<span class="token punctuation">]</span><span class="token comment"># ls</span>
conf.d  fastcgi_params  html  koi-utf  koi-win  logs  mime.types  modules  nginx.conf  scgi_params  uwsgi_params  win-utf

z
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--name</span> nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/html:/usr/share/nginx/html <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/logs:/var/log/nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /mydata/nginx/conf:/etc/nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> nginx:1.10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gité…ç½®" tabindex="-1"><a class="header-anchor" href="#gité…ç½®" aria-hidden="true">#</a> Gité…ç½®</h2><h3 id="é…ç½®-git" tabindex="-1"><a class="header-anchor" href="#é…ç½®-git" aria-hidden="true">#</a> é…ç½® Git</h3><blockquote><p>é€šè¿‡é…ç½®gitï¼Œèƒ½è®©æˆ‘ä»¬æäº¤ä»£ç çš„æ—¶å€™æ˜¾ç¤ºæˆ‘ä»¬çš„åœ¨è¿™é‡Œè®¾ç½®çš„åå­—</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># é…ç½®ç”¨æˆ·å</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">&quot;username&quot;</span> //ï¼ˆåå­—ï¼‰
<span class="token comment"># é…ç½®é‚®ç®±</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">&quot;username@email.com&quot;</span> //<span class="token punctuation">(</span>æ³¨å†Œè´¦å·æ—¶ç”¨çš„é‚®ç®±<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®-ssh-å…å¯†ç™»å½•" tabindex="-1"><a class="header-anchor" href="#é…ç½®-ssh-å…å¯†ç™»å½•" aria-hidden="true">#</a> é…ç½® Ssh å…å¯†ç™»å½•</h3><blockquote><p>è¿™é‡Œ-CæŒ‡å®šçš„ä¸ºé‚®ç®±åœ°å€</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;mildcaq@163.com&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æŸ¥çœ‹å…¬é’¥</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> ~/.ssh/id_rsa.pub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æµ‹è¯•</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç”¨ <span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@gitee.com æµ‹è¯•ç™»å½•
æˆåŠŸä¼šå‡ºç°å¦‚ä¸‹ï¼š
Hi å½­äºæ™<span class="token operator">!</span> You&#39;ve successfully authenticated, but GITEE.COM does not provide shell access.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="giteeé…ç½®" tabindex="-1"><a class="header-anchor" href="#giteeé…ç½®" aria-hidden="true">#</a> Giteeé…ç½®</h3><blockquote><p>giteeä¸ºä»£ç æ‰˜ç®¡å¹³å°ï¼Œåœ¨è¿™é‡Œä»£ç å¯ä»¥æ›´çµæ´»çš„åˆä½œå¼€å‘ã€ä»£ç å›æ»šç­‰ç­‰</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725210747743.png" alt="image-20220725210747743" tabindex="0" loading="lazy"><figcaption>image-20220725210747743</figcaption></figure><h3 id="ä»giteeå¯¼å…¥ä»£ç åˆ°idea" tabindex="-1"><a class="header-anchor" href="#ä»giteeå¯¼å…¥ä»£ç åˆ°idea" aria-hidden="true">#</a> ä»Giteeå¯¼å…¥ä»£ç åˆ°IDEA</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725221240433.png" alt="image-20220725221240433" tabindex="0" loading="lazy"><figcaption>image-20220725221240433</figcaption></figure><h2 id="å»ºç«‹é¡¹ç›®åŸºæœ¬æ¶æ„" tabindex="-1"><a class="header-anchor" href="#å»ºç«‹é¡¹ç›®åŸºæœ¬æ¶æ„" aria-hidden="true">#</a> å»ºç«‹é¡¹ç›®åŸºæœ¬æ¶æ„</h2><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725221433768.png" alt="image-20220725221433768" tabindex="0" loading="lazy"><figcaption>image-20220725221433768</figcaption></figure><h3 id="æäº¤ä»£ç åˆ°gitee" tabindex="-1"><a class="header-anchor" href="#æäº¤ä»£ç åˆ°gitee" aria-hidden="true">#</a> æäº¤ä»£ç åˆ°gitee</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725221030090.png" alt="image-20220725221030090" tabindex="0" loading="lazy"><figcaption>image-20220725221030090</figcaption></figure><h3 id="åˆå§‹åŒ–æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–æ•°æ®åº“" aria-hidden="true">#</a> åˆå§‹åŒ–æ•°æ®åº“</h3><blockquote><p>è¿™é‡Œæ•°æ®åº“æˆ‘ä»¬é‡‡ç”¨dockerä¸­éƒ¨ç½²çš„mysql</p></blockquote><p><strong>è®¾ç½®æ¯æ¬¡é‡å¯åè‡ªåŠ¨å¯åŠ¨</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@queen ~<span class="token punctuation">]</span><span class="token comment"># docker update redis --restart=always</span>
redis
<span class="token punctuation">[</span>root@queen ~<span class="token punctuation">]</span><span class="token comment"># docker update mysql --restart=always</span>
mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é‡å¯è™šæ‹Ÿæœºçœ‹æ˜¯å¦é‡æ–°å¯åŠ¨</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@queen ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE       COMMAND                  CREATED       STATUS              PORTS                                                  NAMES
d82881d71fba   redis       <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">5</span> hours ago   Up About a minute   <span class="token number">0.0</span>.0.0:6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp, :::6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp              redis
f8bb0bf0b68a   mysql:5.7   <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">5</span> hours ago   Up About a minute   <span class="token number">0.0</span>.0.0:3306-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, :::3306-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, <span class="token number">33060</span>/tcp   mysql

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¿«é€Ÿæ­å»ºåå°ç®¡ç†ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿæ­å»ºåå°ç®¡ç†ç³»ç»Ÿ" aria-hidden="true">#</a> å¿«é€Ÿæ­å»ºåå°ç®¡ç†ç³»ç»Ÿ</h2><blockquote><p>å¤ªå¼ºäº†ï¼Œè¿™ä¸€æ³¢æ“ä½œç›´æ¥é¢ è¦†æˆ‘çš„è®¤çŸ¥å¥½å§ï¼Œæˆ‘ä¹‹å‰åšéƒ½æ˜¯ç”¨vue-templateè¿™ä¸ªï¼Œä¸å¾—ä¸è¯´æœ‰ç‚¹éº»çƒ¦</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725225125303.png" alt="image-20220725225125303" tabindex="0" loading="lazy"><figcaption>image-20220725225125303</figcaption></figure><h3 id="ä¸‹è½½ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½ä»£ç " aria-hidden="true">#</a> ä¸‹è½½ä»£ç </h3><ul><li>é€šè¿‡git clone <ul><li>è¿™é‡Œé€šè¿‡git cloneä¸‹è½½çš„ä»£ç æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½æ¡Œé¢ï¼Œç„¶ååˆ†åˆ«å¯¼å…¥ä¹‹åç›´æ¥åˆ é™¤å³å¯</li></ul></li><li>åœ¨giteeç›´æ¥ä¸‹è½½ <ul><li>ç”¨IDMä¸‹è½½è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ï¼</li></ul></li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725225451061.png" alt="image-20220725225451061" tabindex="0" loading="lazy"><figcaption>image-20220725225451061</figcaption></figure><h3 id="å¯¼å…¥åç«¯ä»£ç " tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥åç«¯ä»£ç " aria-hidden="true">#</a> å¯¼å…¥åç«¯ä»£ç </h3><p><strong>1.åˆ›å»ºåŸºç¡€æ¶æ„</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220726200004929.png" alt="image-20220726200004929" tabindex="0" loading="lazy"><figcaption>image-20220726200004929</figcaption></figure><p><strong>2.å¼•å…¥å¤–éƒ¨æ¨¡å—</strong></p><p><a href="https://gitee.com/renrenio/renren-fast.git" target="_blank" rel="noopener noreferrer">https://gitee.com/renrenio/renren-fast.git<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://gitee.com/renrenio/renren-fast-vue.git" target="_blank" rel="noopener noreferrer">https://gitee.com/renrenio/renren-fast-vue.git<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://gitee.com/renrenio/renren-generator.git" target="_blank" rel="noopener noreferrer">https://gitee.com/renrenio/renren-generator.git<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä»¥ä¸Šåˆ†åˆ«æ˜¯ï¼š</p><ul><li>åç«¯ä»£ç </li><li>å‰ç«¯ä»£ç </li><li>ä»£ç ç”Ÿæˆå™¨</li></ul><p>gitå…‹éš†åˆ°æ¡Œé¢ï¼Œæ‹·è´æ–‡ä»¶å¤¹åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œåˆ é™¤æ¡Œé¢æ–‡ä»¶</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220726200218101.png" alt="image-20220726200218101" tabindex="0" loading="lazy"><figcaption>image-20220726200218101</figcaption></figure><p><strong>3.å¯¼å…¥æ•°æ®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><blockquote><p>è¿™é‡Œçš„æ•°æ®åº“éƒ½æ˜¯Dockerå¯åŠ¨çš„Mysql</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220725231959015.png" alt="image-20220725231959015" tabindex="0" loading="lazy"><figcaption>image-20220725231959015</figcaption></figure><p><strong>4.ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><blockquote><p>æ”¹æˆ è‡ªå·±çš„mysqlå®¹å™¨åœ°å€ï¼Œè¿˜è¦æŒ‡å®šæ•°æ®åº“å</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>url: jdbc:mysql://192.168.1.12:3306/mall-admin?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>5.å¯åŠ¨æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220726102408806.png" alt="image-20220726102408806" tabindex="0" loading="lazy"><figcaption>image-20220726102408806</figcaption></figure><h4 id="å¯¼å…¥é¡¹ç›®åçš„pomé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥é¡¹ç›®åçš„pomé—®é¢˜" aria-hidden="true">#</a> å¯¼å…¥é¡¹ç›®åçš„pomé—®é¢˜</h4><blockquote><p><strong><code> &lt;relativePath&gt;&lt;/relativePath&gt;</code>è¿™ä¸ªä½œç”¨æ˜¯ä¸ä¾èµ–æœ¬åœ°parent pom,ç›´æ¥ä»reposityæ‹‰å–</strong></p><p>ä¸ç»§æ‰¿çˆ¶ç±»ï¼Œç›¸å½“äºç”¨è‡ªå·±çš„</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relativePath</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

åœ¨çˆ¶pomæ–‡ä»¶ï¼Œå¼•å…¥æ–°åŠ è¿›æ¥çš„æ¨¡å—
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-product<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-coupon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-member<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-ware<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>renren-fast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ’ä»¶ä¸‹è½½å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶ä¸‹è½½å¤±è´¥" aria-hidden="true">#</a> æ’ä»¶ä¸‹è½½å¤±è´¥</h4><blockquote><p>å…¶ä¸­dockerçš„æ’ä»¶ç‰ˆæœ¬é€‰æ‹©1.2.2å¯ä¸‹è½½</p></blockquote><p>æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼è°ƒè¯•ï¼š</p><ul><li>è®¾ç½®å¤šmavenåœ°å€</li><li>è®¾ç½®mavenè‡ªåŠ¨å¯¼å…¥ï¼Œåˆ é™¤æœ¬åœ°è¿™ä¸ªåŒ…è®©ä»–é‡æ–°ä¸‹è½½</li><li>æ¯æ¬¡æ›´æ”¹éƒ½è¦åˆ·æ–°ã€é‡å¯IDEA</li><li>åˆ é™¤é¡¹ç›®ï¼Œé‡æ–°å…‹éš†åˆ°æœ¬åœ°</li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220726101740975.png" alt="image-20220726101740975" tabindex="0" loading="lazy"><figcaption>image-20220726101740975</figcaption></figure><h4 id="æ›´æ”¹é…ç½®æ–‡ä»¶-è¿æ¥æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æ›´æ”¹é…ç½®æ–‡ä»¶-è¿æ¥æµ‹è¯•" aria-hidden="true">#</a> æ›´æ”¹é…ç½®æ–‡ä»¶ï¼Œè¿æ¥æµ‹è¯•</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.1.12<span class="token punctuation">:</span>3306/mall<span class="token punctuation">-</span>admin<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
<span class="token key atrule">username</span><span class="token punctuation">:</span> root
<span class="token key atrule">password</span><span class="token punctuation">:</span> root
<span class="token punctuation">...</span><span class="token punctuation">...</span>..
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨â€œrenren-adminâ€ï¼Œç„¶åè®¿é—®â€œ<a href="http://localhost:8080/renren-fast/%E2%80%9D" target="_blank" rel="noopener noreferrer">http://localhost:8080/renren-fast/â€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æµ‹è¯•æˆåŠŸå¦‚ä¸‹</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727204744168.png" alt="image-20220727204744168" tabindex="0" loading="lazy"><figcaption>image-20220727204744168</figcaption></figure><h3 id="å¯¼å…¥å‰ç«¯ä»£ç " tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥å‰ç«¯ä»£ç " aria-hidden="true">#</a> å¯¼å…¥å‰ç«¯ä»£ç </h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm config set registry http://registry.npm.taobao.org/
npm install #åœ¨ä¸‹è½½çš„å‰ç«¯é¡¹ç›®æ ¹ç›®å½•ä¸‹
npm run dev #å¯åŠ¨å‰ç«¯é¡¹ç›®
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸Šé¢ä¸è¡Œå¯ä»¥é‡‡ç”¨</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install -g cnpm --registry=https://registry.npm.taobao.org
cnpm install node-sass --save
npm run dev #å¯åŠ¨å‰ç«¯é¡¹ç›®
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…æˆåŠŸå‡ºç°å¦‚ä¸‹æç¤ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DONE  Compiled successfully in 14998ms                 9:25:32

 I  Your application is running here: http://localhost:8001
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨æµ‹è¯•ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220726102441069.png" alt="image-20220726102441069" tabindex="0" loading="lazy"><figcaption>image-20220726102441069</figcaption></figure><p>è‡³æ­¤ï¼Œç®€å•çš„åå°ç®¡ç†ç³»ç»Ÿæ­å»ºå®Œæˆ...</p><h4 id="npm-installå¤±è´¥" tabindex="-1"><a class="header-anchor" href="#npm-installå¤±è´¥" aria-hidden="true">#</a> npm installå¤±è´¥</h4><p>å¼€å¯v2rayç­‰ä½ æ‡‚å¾—çš„è½¯ä»¶ï¼Œæ²¡æœ‰çš„è¯é€šè¿‡</p><p>æ¸…ç†ç¼“å­˜ï¼šnpm rebuild node-sass npm uninstall node-sass</p><p>é‡æ–°ä¸‹è½½ï¼šnpm i node-sass --sass_binary_site=<a href="https://npm.taobao.org/mirrors/node-sass/" target="_blank" rel="noopener noreferrer">https://npm.taobao.org/mirrors/node-sass/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å†æ¬¡npm install ç›´åˆ°æˆåŠŸ</p><p><strong>è¿˜æ˜¯å¤±è´¥ï¼Ÿ</strong></p><p>åˆ é™¤node_moudleæ¨¡å—åˆ é™¤é‡æ–°npm install</p><p>å¿«é€Ÿå®Œæˆ</p><h2 id="ç”Ÿæˆæ‰€æœ‰åŸºæœ¬crudä»£ç " tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆæ‰€æœ‰åŸºæœ¬crudä»£ç " aria-hidden="true">#</a> ç”Ÿæˆæ‰€æœ‰åŸºæœ¬CRUDä»£ç </h2><h3 id="ä»£ç ç”Ÿæˆå™¨æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä»£ç ç”Ÿæˆå™¨æ³¨æ„ç‚¹" aria-hidden="true">#</a> ä»£ç ç”Ÿæˆå™¨æ³¨æ„ç‚¹</h3><h4 id="controlleræ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#controlleræ¨¡æ¿" aria-hidden="true">#</a> controlleræ¨¡æ¿</h4><blockquote><p>è‡ªåŠ¨ç”Ÿæˆçš„controlleråŒ…ä¸­ä»£ç å¸¦æœ‰å®‰å…¨æ¡†æ¶shiroï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸éœ€è¦æ‰€ä»¥ç›´æ¥æ³¨é‡Šæ‰</p></blockquote><p>ä¿®æ”¹è‡ªåŠ¨ç”Ÿæˆçš„æ¨¡æ¿ï¼Œæ³¨é‡Šæ‰å…¨éƒ¨çš„</p><ul><li><p>æ³¨è§£ï¼š@RequiresPermissions</p></li><li><p>åŒ…ï¼šimport org.apache.shiro.authz.annotation.RequiresPermissions;</p></li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727220907377.png" alt="image-20220727220907377" tabindex="0" loading="lazy"><figcaption>image-20220727220907377</figcaption></figure><h4 id="è‡ªå®šä¹‰ç±»çš„è¿”å›è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰ç±»çš„è¿”å›è·¯å¾„" aria-hidden="true">#</a> è‡ªå®šä¹‰ç±»çš„è¿”å›è·¯å¾„</h4><p>å› ä¸ºæˆ‘ä»¬æŠŠä¸€äº›é€šç”¨è¿”å›ç±»å¼‚å¸¸ç­‰éƒ½æ”¾åˆ°äº†mall-commonæ¨¡å—,æ‰€ä»¥mall-commonåŒ…çš„å®šä¹‰è¦æ ¹æ®ä»£ç ç”Ÿæˆå™¨è¿™ä¸ªåŒ…çš„è·¯å¾„æ¥å†™;</p><p>æ¯”å¦‚:åŒä¸€è¿”å›ç±»æˆ‘ä»¬è¦åœ¨å†™åœ¨<code>ä¸»è·¯å¾„.common.utils</code>åŒ…ä¸‹;</p><p>ä¸ç„¶å…¨éƒ¨çš„controlleréƒ½ä¼šæŠ¥åŒ…çš„ä½ç½®é”™è¯¯!</p><blockquote><p>mainpathå°±æ˜¯ä»£ç ç”Ÿæˆå™¨æ¨¡å—é…ç½®æ–‡ä»¶æŒ‡å®šçš„</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728104616468.png" alt="image-20220728104616468" tabindex="0" loading="lazy"><figcaption>image-20220728104616468</figcaption></figure><p><strong>1ã€git cloneå…‹éš†åˆ°æ¡Œé¢</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727204918870.png" alt="image-20220727204918870" tabindex="0" loading="lazy"><figcaption>image-20220727204918870</figcaption></figure><p><strong>2ã€ä¿®æ”¹é…ç½®</strong></p><blockquote><p>è¿™é‡Œæ‹¿productæ¨¡å—åšç¤ºèŒƒ</p></blockquote><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">mainPath</span><span class="token punctuation">=</span><span class="token value attr-value">com.caq</span>
<span class="token comment">#\u5305\u540D</span>
<span class="token key attr-name">package</span><span class="token punctuation">=</span><span class="token value attr-value">com.caq.mall</span>
<span class="token key attr-name">moduleName</span><span class="token punctuation">=</span><span class="token value attr-value">product</span>
<span class="token comment">#\u4F5C\u8005</span>
<span class="token key attr-name">author</span><span class="token punctuation">=</span><span class="token value attr-value">xiaocai</span>
<span class="token comment">#Email</span>
<span class="token key attr-name">email</span><span class="token punctuation">=</span><span class="token value attr-value">mildcaq@gmail.com</span>
<span class="token comment">#\u8868\u524D\u7F00(\u7C7B\u540D\u4E0D\u4F1A\u5305\u542B\u8868\u524D\u7F00)</span>
<span class="token key attr-name">tablePrefix</span><span class="token punctuation">=</span><span class="token value attr-value">pms_</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.1.12<span class="token punctuation">:</span>3306/mall_pms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€è¿è¡Œæ¨¡å—</strong></p><p>è®¿é—®ï¼š<code>http://localhost:80/</code></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727205744304.png" alt="image-20220727205744304" tabindex="0" loading="lazy"><figcaption>image-20220727205744304</figcaption></figure><p><strong>4ã€æ–°å»ºcommonæ¨¡å—</strong></p><blockquote><p>å› ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œéœ€è¦æœ‰åŒä¸€è¿”å›ç±»ã€ç»Ÿä¸€å¼‚å¸¸å¤„ç†....</p><p>è¿™äº›ä»£ç éƒ½åœ¨renren-fastæ¨¡å—ï¼Œæˆ‘ä»¬ç›´æ¥æ‹·è´åˆ°mall-commonæ¨¡å—å³å¯</p></blockquote><p>å„æ¨¡å—æ‰€éœ€ä»£ç å¦‚ä¸‹ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727213039350.png" alt="image-20220727213039350" tabindex="0" loading="lazy"><figcaption>image-20220727213039350</figcaption></figure><p>ä¾èµ–å¦‚ä¸‹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>çˆ¶pomä¸­å¼•å…¥æ–°å®¶çš„commonæ¨¡å—
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-product<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-coupon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-member<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-ware<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>renren-fast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>renren-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>mall-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>

commonå¼•å…¥å¦‚ä¸‹ä¾èµ–
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpcore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-lang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-lang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5ã€æ‹·è´ä»£ç æ³¨æ„ç‚¹</strong></p><p>æ‰“å¼€æ¨¡å—æ‰€åœ¨æ–‡ä»¶å¤¹è¿›è¡Œæ‹·è´</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728104041823.png" alt="image-20220728104041823" tabindex="0" loading="lazy"><figcaption>image-20220728104041823</figcaption></figure><h3 id="productæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#productæ¨¡å—" aria-hidden="true">#</a> productæ¨¡å—</h3><p><strong>1ã€å¼•å…¥commonæ¨¡å—</strong></p><p>ç”Ÿæˆçš„ä»£ç éƒ½è¦å¼•å…¥commonæ¨¡å—,å› ä¸ºè‡ªå®šä¹‰çš„ä¸€äº›ç±»éƒ½æŒ‡å®šåœ¨äº†mall-commonæ¨¡å—</p><p><strong>2ã€é…ç½®æ–‡ä»¶</strong></p><p>application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.1.12<span class="token punctuation">:</span>3306/mall_pms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver

<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.properties</p><p>ç”¨æ¥é…ç½®ç«¯å£å’ŒæœåŠ¡åç§°</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># åº”ç”¨åç§°</span>
<span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-product</span>
<span class="token comment"># åº”ç”¨æœåŠ¡ WEB è®¿é—®ç«¯å£</span>
<span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">9999</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€å¯åŠ¨ç±»å¢åŠ mappersanæ³¨è§£</strong></p><blockquote><p>è¿™é‡Œå¼ºè°ƒä¸‹ï¼š</p><p>ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨ç”Ÿæˆçš„ä»£ç ä¸­ï¼ŒMapperæ–‡ä»¶éƒ½åŠ äº†@Mapperæ³¨è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨åŠ @MapperScan</p><p>å¦‚æœä½ è‡ªå·±å†™çš„è¯ï¼ŒMapperScanæ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@MapperScan(&quot;com.caq.mall.product.dao&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>4ã€æµ‹è¯•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>mall</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>mall<span class="token punctuation">.</span>product<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">BrandEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>mall<span class="token punctuation">.</span>product<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BrandService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">MallProductApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BrandService</span> brandService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BrandEntity</span> brandEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrandEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        brandEntity<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;è‹¹æœ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brandEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name">HikariProxyConnection</span><span class="token annotation punctuation">@1371953731</span> wrapping <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@740dcae3</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span>
<span class="token operator">==</span><span class="token operator">&gt;</span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">INSERT</span> <span class="token class-name">INTO</span> pms_brand <span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span> <span class="token operator">?</span> <span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token class-name">Parameters</span><span class="token operator">:</span> è‹¹æœ<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>
<span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Updates</span><span class="token operator">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5ã€ä¸Šä¼ ä»£ç åˆ°github</strong></p><blockquote><p>ä¸Šä¼ å¤±è´¥å¯æœç´¢æˆ‘çš„æ–‡ç« ï¼Œä»Šå¤©åˆšæ›´æ–°çš„</p><p><code>Javaåˆå­¦è€…å¿…çœ‹</code>ï¼Œè¿™ç¯‡æ–‡ç« </p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220727230049663.png" alt="image-20220727230049663" tabindex="0" loading="lazy"><figcaption>image-20220727230049663</figcaption></figure><h3 id="couponæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#couponæ¨¡å—" aria-hidden="true">#</a> couponæ¨¡å—</h3><p><strong>1ã€ä¿®æ”¹ä»£ç ç”Ÿæˆå™¨é…ç½®æ–‡ä»¶</strong></p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">mainPath</span><span class="token punctuation">=</span><span class="token value attr-value">com.caq</span>
<span class="token comment">#\u5305\u540D</span>
<span class="token key attr-name">package</span><span class="token punctuation">=</span><span class="token value attr-value">com.caq.mall</span>
<span class="token key attr-name">moduleName</span><span class="token punctuation">=</span><span class="token value attr-value">coupon</span>
<span class="token comment">#\u4F5C\u8005</span>
<span class="token key attr-name">author</span><span class="token punctuation">=</span><span class="token value attr-value">xiaocai</span>
<span class="token comment">#Email</span>
<span class="token key attr-name">email</span><span class="token punctuation">=</span><span class="token value attr-value">mildcaq@gmail.com</span>
<span class="token comment">#\u8868\u524D\u7F00(\u7C7B\u540D\u4E0D\u4F1A\u5305\u542B\u8868\u524D\u7F00)</span>
<span class="token key attr-name">tablePrefix</span><span class="token punctuation">=</span><span class="token value attr-value">sms_</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ymlæ–‡ä»¶</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token comment"># mysql</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.1.12<span class="token punctuation">:</span>3306/mall_sms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ã€é‡å¯æœåŠ¡ï¼Œé‡æ–°ç”Ÿæˆä»£ç æ–‡ä»¶</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728102255561.png" alt="image-20220728102255561" tabindex="0" loading="lazy"><figcaption>image-20220728102255561</figcaption></figure><p><strong>3ã€æ‹·è´ä»£ç ï¼Œå»ºç«‹couponé…ç½®æ–‡ä»¶</strong></p><blockquote><p>å› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡SpringInitåˆå§‹åŒ–çš„æ¨¡å—ï¼Œæ‰€ä»¥æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå¸¦çš„é…ç½®æ–‡ä»¶applicaiton.properties</p><p>æ”¹ç«¯å£çš„è¯æˆ‘ä»¬å¯ä»¥ä¿®æ”¹applicaiton.propertiesæ–‡ä»¶</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.1.12<span class="token punctuation">:</span>3306/mall_sms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver

<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4ã€è¿è¡Œï¼Œæµ‹è¯•</strong></p><p><a href="http://localhost:7000/coupon/coupon/list" target="_blank" rel="noopener noreferrer">http://localhost:7000/coupon/coupon/list<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{&quot;msg&quot;:&quot;success&quot;,&quot;code&quot;:0,&quot;page&quot;:{&quot;totalCount&quot;:0,&quot;pageSize&quot;:10,&quot;totalPage&quot;:0,&quot;currPage&quot;:1,&quot;list&quot;:[]}}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="memberæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#memberæ¨¡å—" aria-hidden="true">#</a> memberæ¨¡å—</h3><p>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæ”¹ä»£ç ç”Ÿæˆå™¨é…ç½®æ–‡ä»¶ï¼Œè¿è¡Œç”Ÿæˆä»£ç ï¼Œæ‹·è´ä»£ç åˆ°æ¨¡å—</p><p>æ‹·è´åçš„ä»£ç ï¼Œå»ºç«‹é…ç½®æ–‡ä»¶ï¼Œæ”¹ç«¯å£ï¼Œè¿è¡Œ</p><p>æµ‹è¯•,æ²¡é—®é¢˜å³å¯</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728110033046.png" alt="image-20220728110033046" tabindex="0" loading="lazy"><figcaption>image-20220728110033046</figcaption></figure><h3 id="orderæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#orderæ¨¡å—" aria-hidden="true">#</a> orderæ¨¡å—</h3><p>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæ”¹ä»£ç ç”Ÿæˆå™¨é…ç½®æ–‡ä»¶ï¼ˆæ¨¡å—åï¼Œæ•°æ®åº“åï¼‰ï¼Œè¿è¡Œç”Ÿæˆä»£ç ï¼Œæ‹·è´ä»£ç åˆ°æ¨¡å—</p><p>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæ‹·è´åçš„ä»£ç ï¼Œå»ºç«‹é…ç½®æ–‡ä»¶ï¼Œæ”¹ç«¯å£ï¼Œè¿è¡Œ</p><h3 id="wareæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#wareæ¨¡å—" aria-hidden="true">#</a> wareæ¨¡å—</h3><p>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæ”¹ä»£ç ç”Ÿæˆå™¨é…ç½®æ–‡ä»¶ï¼ˆæ¨¡å—åï¼Œæ•°æ®åº“åï¼‰ï¼Œè¿è¡Œç”Ÿæˆä»£ç ï¼Œæ‹·è´ä»£ç åˆ°æ¨¡å—</p><p>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæ‹·è´åçš„ä»£ç ï¼Œå»ºç«‹é…ç½®æ–‡ä»¶ï¼Œæ”¹ç«¯å£ï¼Œè¿è¡Œ</p><h1 id="springcloud" tabindex="-1"><a class="header-anchor" href="#springcloud" aria-hidden="true">#</a> SpringCloud</h1><h2 id="ç‰ˆæœ¬é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#ç‰ˆæœ¬é€‰æ‹©" aria-hidden="true">#</a> ç‰ˆæœ¬é€‰æ‹©</h2><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/spring-cloud-alibaba/wiki/ç‰ˆæœ¬è¯´æ˜<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729165125383.png" alt="image-20220729165125383" tabindex="0" loading="lazy"><figcaption>image-20220729165125383</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728163730187.png" alt="image-20220728163730187" tabindex="0" loading="lazy"><figcaption>image-20220728163730187</figcaption></figure><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯å…¶ä»–æ¨¡å—ä¹Ÿè¦æ”¹springbootçš„ç‰ˆæœ¬ï¼Œéƒ½ä¸º2.3.2.rekease</p><h2 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos" aria-hidden="true">#</a> Nacos</h2><p><strong>1ã€å¯åŠ¨Nacos</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728230611716.png" alt="image-20220728230611716" tabindex="0" loading="lazy"><figcaption>image-20220728230611716</figcaption></figure><p><strong>2ã€å°†å¾®æœåŠ¡æ³¨å†Œåˆ° nacos ä¸­</strong></p><p>mall-ommonæ¨¡å—è¿›è¡Œå¼•å…¥</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>alibaba<span class="token operator">-</span>nacos<span class="token operator">-</span>discovery<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æ‰€æœ‰çš„å¼•å…¥commonæ¨¡å—çš„å…¶ä»–æ¨¡å—å°±éƒ½æœ‰è¿™ä¸ªæœåŠ¡å‘ç°äº†ï¼Œæ¥ä¸‹æ¥è¿˜éœ€è¦ä¸¤æ­¥</p><ul><li><p>åœ¨éœ€è¦å°†å¾®æœåŠ¡åŠ åˆ°æ³¨å†Œä¸­å¿ƒçš„å¯åŠ¨ç±»ä¸ŠåŠ æ³¨è§£@EnableDiscoveryClient</p></li><li><p>æ”¹æ¨¡å—é…ç½®æ–‡ä»¶</p><ul><li><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
        <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
          <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#nacosåœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><p><strong>3ã€æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728232800873.png" alt="image-20220728232800873" tabindex="0" loading="lazy"><figcaption>image-20220728232800873</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728232808671.png" alt="image-20220728232808671" tabindex="0" loading="lazy"><figcaption>image-20220728232808671</figcaption></figure><h2 id="feign" tabindex="-1"><a class="header-anchor" href="#feign" aria-hidden="true">#</a> Feign</h2><blockquote><p><strong>å®ƒçš„ç›®çš„å°±æ˜¯è®©è¿œç¨‹è°ƒç”¨æ›´åŠ ç®€å•</strong>ï¼ŒFeignæä¾›äº†HTTPè¯·æ±‚çš„æ¨¡æ¿ã€‚é€šè¿‡å†™<strong>æ¥å£å’Œæ’å…¥æ³¨è§£</strong>ï¼Œå°±å¯ä»¥å®šä¹‰å¥½HTTPè¯·æ±‚çš„å‚æ•°ã€æ ¼å¼ã€åœ°å€ç­‰ä¿¡æ¯</p></blockquote><p>ä¾‹å¦‚ï¼šæƒ³è¦è·å–å½“å‰ä¼šå‘˜é¢†å–åˆ°çš„æ‰€æœ‰ä¼˜æƒ åˆ¸ã€‚å…ˆå»æ³¨å†Œä¸­å¿ƒæ‰¾ä¼˜æƒ åˆ¸æœåŠ¡ï¼Œ æ³¨å†Œä¸­å¿ƒè°ƒä¸€å°ä¼˜æƒ åˆ¸æœåŠ¡å™¨ç»™ä¼šå‘˜ï¼Œä¼šå‘˜æœåŠ¡å™¨å‘é€è¯·æ±‚ç»™è¿™å°ä¼˜æƒ åˆ¸æœåŠ¡å™¨ï¼Œç„¶åå¯¹æ–¹å“åº”ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬çœ‹å®ƒæ˜¯æ€ä¹ˆç”¨çš„ï¼š</p><p><strong>1ã€å¼•å…¥open-feign</strong></p><p>å‰æœŸå»ºæ¨¡å—çš„æ—¶å€™æˆ‘ä»¬å·²ç»å¼•å…¥è¿‡äº†</p><p><strong>2ã€åœ¨è°ƒç”¨æ–¹çš„ä¸»å‡½æ•°å¤´ä¸Šæ ‡æ³¨æ³¨è§£æ‰“å¼€è¿œç¨‹è°ƒç”¨ï¼Œå¹¶æŒ‡å®šè¿œç¨‹è°ƒç”¨æ¥å£çš„ä½ç½®</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">//æ ‡æ³¨å¯åŠ¨æœåŠ¡å‘ç°</span>
<span class="token annotation punctuation">@EnableFeignClients</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.caq.mall.member.feign&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MallMemberApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MallMemberApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€ç¼–å†™è¿œç¨‹è°ƒç”¨æ¥å£</strong></p><ol><li>é€šè¿‡@FeignClient(&quot;mall-coupon&quot;)æŒ‡å®šè¿œç¨‹è°ƒç”¨å“ªä¸ªå¾®æœåŠ¡</li><li>æ–¹æ³•ä¸ºè¦è°ƒç”¨å¾®æœåŠ¡åŠŸèƒ½çš„çš„ç­¾åéƒ¨åˆ†ï¼ˆ<strong>è·¯å¾„è¦å†™å…¨</strong>ï¼‰</li></ol><p>é‚£ä¹ˆå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæ¥å£çš„æ–¹æ³•æ—¶ï¼Œä»–å°±ä¼šå»æ³¨å†Œä¸­å¿ƒä¸­æ‰¾è¿œç¨‹æœåŠ¡mall-couponæ‰€åœ¨ä½ç½®ï¼Œæœ€åè°ƒç”¨/coupon/coupon/member/listè¿™ä¸ªè¯·æ±‚å¯¹åº”çš„æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>mall<span class="token punctuation">.</span>member<span class="token punctuation">.</span>feign</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">R</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;mall-coupon&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CouponFeignService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/coupon/coupon/member/list&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4ã€æµ‹è¯•</strong></p><p>è¢«è°ƒç”¨æ–¹ï¼šä¸ºä¼˜æƒ å·å¾®æœåŠ¡æ–°æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å°±æ˜¯è®¿é—®è¿™ä¸ªè¯·æ±‚æ—¶ä¼šè¿”å›ä¼˜æƒ å·çš„ä¿¡æ¯ä»¥Listçš„å½¢å¼</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729000325703.png" alt="image-20220729000325703" tabindex="0" loading="lazy"><figcaption>image-20220729000325703</figcaption></figure><p>è°ƒç”¨æ–¹ï¼šæ³¨å…¥æœåŠ¡ï¼Œå†™ä¸€ä¸ªè¯·æ±‚æ¥è·å–ç”¨æˆ·ä¿¡æ¯å’Œä¼˜æƒ å·ä¿¡æ¯</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729000448573.png" alt="image-20220729000448573" tabindex="0" loading="lazy"><figcaption>image-20220729000448573</figcaption></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220728235357961.png" alt="image-20220728235357961" tabindex="0" loading="lazy"><figcaption>image-20220728235357961</figcaption></figure><h2 id="é…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#é…ç½®ä¸­å¿ƒ" aria-hidden="true">#</a> é…ç½®ä¸­å¿ƒ</h2><p>é…ç½®ä¸­å¿ƒå°±æ˜¯æŠŠé…ç½®æ–‡ä»¶å†™åœ¨Nacosä¸­ï¼Œå½“ä½ ä¿®æ”¹é…ç½®ä¸­å¿ƒå†…å®¹æ—¶é¡¹ç›®<strong>ä¸éœ€è¦é‡å¯é¡¹ç›®</strong>å³å¯æ ¹æ®é…ç½®æ–‡ä»¶å®ç°<strong>å®æ—¶æ›´æ–°</strong></p><p>å®˜æ–¹æ–‡æ¡£æ¼”ç¤ºï¼š</p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme-zh.md" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme-zh.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729074959340.png" alt="image-20220729074959340" tabindex="0" loading="lazy"><figcaption>image-20220729074959340</figcaption></figure><p><strong>1ã€å¼•å…¥ä¾èµ–</strong></p><p>commonæ¨¡å—</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ã€åˆ›å»ºbootstrap.properties</strong></p><p>æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­ä¼˜å…ˆçº§æœ€é«˜</p><p>æœåŠ¡å¯åŠ¨åä¼šå…ˆè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œè¯»å–åå°±ä¼šå»ä»nacosé…ç½®ä¸­å¿ƒåŠ è½½<code>mall-coupon.properties</code>æ–‡ä»¶</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-coupon</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€é…ç½®ä¸­å¿ƒå®šä¹‰æ–°é…ç½®æ–‡ä»¶</strong></p><p>å…¶ä¸­ï¼ŒDataIDå¿…é¡»ä¸ºå¾®æœåŠ¡å.yml(properties)</p><p>é…ç½®çš„å†…å®¹ä»€ä¹ˆéƒ½å¯ä»¥</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729084603849.png" alt="image-20220729084603849" tabindex="0" loading="lazy"><figcaption>image-20220729084603849</figcaption></figure><p><strong>4ã€æµ‹è¯•</strong></p><blockquote><p>è¿™é‡Œæ˜¾ç¤ºJsonæ•°æ®ç”¨äº†JSONVUEæ’ä»¶ï¼Œå¯åœ¨è°·æ­Œå•†åº—ç›´æ¥ä¸‹è½½</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220730175100628.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>åœ¨ControlleråŠ ä¸Š<code>@RefreshScope</code>æ¥åŠ¨æ€è·å–é…ç½®æ•°æ®</li></ul><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729084827766.png" alt="image-20220729084827766" tabindex="0" loading="lazy"><figcaption>image-20220729084827766</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729084910918.png" alt="image-20220729084910918" tabindex="0" loading="lazy"><figcaption>image-20220729084910918</figcaption></figure><p><strong>é…ç½®ä¸­å¿ƒä¿®æ”¹é…ç½®å†åˆ·æ–°</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729084943351.png" alt="image-20220729084943351" tabindex="0" loading="lazy"><figcaption>image-20220729084943351</figcaption></figure><h3 id="namespace" tabindex="-1"><a class="header-anchor" href="#namespace" aria-hidden="true">#</a> NameSpace</h3><p>å‘½åç©ºé—´å°±æ˜¯ç”¨æ¥éš”ç¦»èµ„æºçš„</p><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°å‘¢ï¼Ÿ</p><p>ä½ ç”Ÿäº§ç¯å¢ƒæƒ³ç”¨è¿™ä¸€å¥—é…ç½®ï¼Œå¼€å‘ç¯å¢ƒæƒ³ç”¨å¦ä¸€å¥—é…ç½®ã€‚é‚£ä¹ˆå°±å¯ä»¥æŠŠé…ç½®æ–‡ä»¶æ”¾åˆ°ä¸åŒçš„å‘½åç©ºé—´ä¸­</p><p><strong>1ã€æ–°å»ºå‘½åç©ºé—´</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729090043943.png" alt="image-20220729090043943" tabindex="0" loading="lazy"><figcaption>image-20220729090043943</figcaption></figure><p>é…ç½®æ–‡ä»¶</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729090207468.png" alt="image-20220729090207468" tabindex="0" loading="lazy"><figcaption>image-20220729090207468</figcaption></figure><p><strong>2ã€bootstrap.propertiesæŒ‡å®šå‘½åç©ºé—´</strong></p><p>å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™ä¼šå…ˆå»bootstrap.propertiesåŠ è½½ï¼Œç„¶åæ ¹æ®é…ç½®å»Nacosé…ç½®ä¸­å¿ƒæ‰¾åˆ°æ–‡ä»¶</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.cloud.nacos.config.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-coupon</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">dag5139-g77f-s220-bf21-b48c3e117250</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token value attr-value">mall-coupon.yml</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token value attr-value">DEFAULT_GROUP</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ymlæ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> mall<span class="token punctuation">-</span>coupon
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span>8848<span class="token punctuation">:</span><span class="token number">8848</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dag5139<span class="token punctuation">-</span>g77f<span class="token punctuation">-</span>s220<span class="token punctuation">-</span>bf21<span class="token punctuation">-</span>b48c3e117250
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml
        <span class="token key atrule">extension-configs</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> mall<span class="token punctuation">-</span>coupon.yml
            <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP
            <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729090431390.png" alt="image-20220729090431390" tabindex="0" loading="lazy"><figcaption>image-20220729090431390</figcaption></figure><p><strong>3ã€æµ‹è¯•</strong></p><p>è¿™ä¸ªé…ç½®å°±æ˜¯æˆ‘propå‘½åç©ºé—´å®šä¹‰çš„é…ç½®æ–‡ä»¶</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729090643591.png" alt="image-20220729090643591" tabindex="0" loading="lazy"><figcaption>image-20220729090643591</figcaption></figure><h3 id="group" tabindex="-1"><a class="header-anchor" href="#group" aria-hidden="true">#</a> Group</h3><p>ä¸€èˆ¬Groupå’ŒNamespaceé…åˆä½¿ç”¨</p><p>è§£å†³æ–¹æ¡ˆä¸ºï¼šæ¯ä¸ªå¾®æœåŠ¡åˆ›å»ºè‡ªå·±çš„å‘½åç©ºé—´ï¼Œä½¿ç”¨é…ç½®åˆ†ç»„åŒºåˆ†ç¯å¢ƒ</p><p>åˆ†ç»„åœ¨åˆ›å»ºé…ç½®æ–‡ä»¶çš„æ—¶å€™ç›´æ¥è¿›è¡Œåˆ›å»ºå³å¯</p><p><strong>1ã€åˆ›å»ºå¾®æœåŠ¡NameSpaceå¹¶åˆ›å»ºåˆ†ç»„</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729094413879.png" alt="image-20220729094413879" tabindex="0" loading="lazy"><figcaption>image-20220729094413879</figcaption></figure><p><strong>2ã€bootstrap.propertiesæŒ‡å®šåˆ†ç»„</strong></p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-coupon</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">8c4aa2e1-412b-4992-90d7-b74cf3abbef1</span>
<span class="token key attr-name">spring.cloud.nacos.config.group</span><span class="token punctuation">=</span><span class="token value attr-value">11</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729093831023.png" alt="image-20220729093831023" tabindex="0" loading="lazy"><figcaption>image-20220729093831023</figcaption></figure><h3 id="åŠ è½½å¤šé…ç½®é›†" tabindex="-1"><a class="header-anchor" href="#åŠ è½½å¤šé…ç½®é›†" aria-hidden="true">#</a> åŠ è½½å¤šé…ç½®é›†</h3><p>é…ç½®ç›¸å…³çš„å¦‚æœéƒ½æ”¾åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ä¼šå¾ˆä¹±éš¾ç»´æŠ¤</p><p>æ‰€ä»¥æŠŠé…ç½®æ–‡ä»¶è¿›è¡Œæ‹†åˆ†ï¼Œspringç›¸å…³çš„æ”¾springé…ç½®æ–‡ä»¶ï¼Œmybatisç›¸å…³çš„æ”¾mybatisé…ç½®æ–‡ä»¶.......</p><p>Nacosä¹Ÿå¯ä»¥åšåˆ°</p><p><strong>1ã€æŠ½å–å‡ºå¤šä¸ªé…ç½®æ–‡ä»¶</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729095020493.png" alt="image-20220729095020493" tabindex="0" loading="lazy"><figcaption>image-20220729095020493</figcaption></figure><p>å…¶ä»–é…ç½®æ–‡ä»¶åŒç†</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729095049304.png" alt="image-20220729095049304" tabindex="0" loading="lazy"><figcaption>image-20220729095049304</figcaption></figure><p><strong>2ã€bootstrap.propertiesæŒ‡å®šåŠ è½½å¤šé…ç½®é›†</strong></p><blockquote><p>è¿™é‡Œçš„spring.cloud.nacos.config.extension-configs[0].data-idæ„æ€å°±æ˜¯è¯´ï¼Œé›†åˆé‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰æ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡æ‰€ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ å¯ä»¥èµ‹å€¼å¤šæ¬¡</p><p>ä¸‹é¢é…ç½®ä¹Ÿæ˜¯åŒç†</p></blockquote><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># é…ç½®ä¸­å¿ƒåŠ è½½é…ç½®æ–‡ä»¶</span>
<span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-coupon</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">8c4aa2e1-412b-4992-90d7-b74cf3abbef1</span>
<span class="token key attr-name">spring.cloud.nacos.config.group</span><span class="token punctuation">=</span><span class="token value attr-value">11</span>

<span class="token comment"># åŠ è½½å¤šé…ç½®é›†</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token value attr-value">datasource.yml</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token value attr-value">11</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[1].data-id</span><span class="token punctuation">=</span><span class="token value attr-value">mybatis.yml</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[1].group</span><span class="token punctuation">=</span><span class="token value attr-value">11</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[1].refresh</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[2].data-id</span><span class="token punctuation">=</span><span class="token value attr-value">other.yml</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[2].group</span><span class="token punctuation">=</span><span class="token value attr-value">11</span>
<span class="token key attr-name">spring.cloud.nacos.config.extension-configs[2].refresh</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€æµ‹è¯•</strong></p><p>æˆ‘ä»¬æ³¨é‡Šæ‰æ‰€æœ‰æœ¬åœ°çš„ymlé…ç½®å¹¶é‡å¯</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729095923691.png" alt="image-20220729095923691" tabindex="0" loading="lazy"><figcaption>image-20220729095923691</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729102516969.png" alt="image-20220729102516969" tabindex="0" loading="lazy"><figcaption>image-20220729102516969</figcaption></figure><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h3><p>å¾®æœåŠ¡ä»»ä½•é…ç½®ä¿¡æ¯ï¼Œä»»ä½•é…ç½®æ–‡ä»¶éƒ½å¯ä»¥æ”¾åœ¨é…ç½®ä¸­å¿ƒä¸­</p><p>çº¿ä¸Šç¯å¢ƒçš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰é…ç½®éƒ½æ”¾åœ¨é…ç½®ä¸­å¿ƒï¼Œå¾®æœåŠ¡ä¸­åªä¿ç•™ä¸€ä¸ª<code>bootstrap.properties</code>æ–‡ä»¶è¯´æ˜<code>åŠ è½½é…ç½®ä¸­å¿ƒå“ªäº›é…ç½®æ–‡ä»¶</code>å³å¯</p><h2 id="gatewayç½‘å…³" tabindex="-1"><a class="header-anchor" href="#gatewayç½‘å…³" aria-hidden="true">#</a> GateWayç½‘å…³</h2><p>GateWayç½‘å…³èƒ½å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè·¯ç”±è½¬å‘ã€æƒé™æ ¡éªŒã€é™æµæ§åˆ¶ç­‰</p><p><strong>ä¸€ã€å»ºmoduleå¼•å…¥pom</strong></p><p>è¿˜æ˜¯é€šè¿‡SpringInitå·¥ç¨‹æ¥åˆ›å»ºæ¨¡å—ï¼Œç›´æ¥é€‰ä¸­SpringCloudGatewayç»„ä»¶</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220730083029280.png" alt="image-20220730083029280" tabindex="0" loading="lazy"><figcaption>image-20220730083029280</figcaption></figure><p><strong>äºŒã€å¼€å¯æœåŠ¡å‘ç°</strong></p><blockquote><p>è¿™é‡Œè¦è®¾ç½®ä¸è‡ªåŠ¨è£…é…æ•°æ®æº</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">//å¼€å¯æ³¨å†ŒæœåŠ¡å‘ç°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AchangmallGatewayApplication</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">AchangmallGatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æœå‘ç°å’Œé…ç½®ä¸­å¿ƒ</strong></p><p>applicaion.propertiesæŒ‡å®šnacosåœ°å€</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># åº”ç”¨åç§°</span>
<span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-gateway</span>
<span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">88</span>
<span class="token comment">#æœåŠ¡å‘ç°</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bootstrap.properties å¡«å†™é…ç½®ä¸­å¿ƒåœ°å€</p><p>è¿™é‡Œå†™äº†namespaceï¼Œéœ€è¦æˆ‘ä»¬å…ˆæå‰åœ¨nacosåˆ›å»ºå¥½</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-gateway</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">f1212912-c9f6-4323-b9f5-1a7d8d92c5b4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å››ã€nacosåˆ›å»ºé…ç½®æ–‡ä»¶mall-gateway.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> baidu_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.baidu.com
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Query=url<span class="token punctuation">,</span>baidu

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> test_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.qq.com
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Query=url<span class="token punctuation">,</span>qq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729124135801.png" alt="image-20220729124135801" tabindex="0" loading="lazy"><figcaption>image-20220729124135801</figcaption></figure><h1 id="ä¸‰çº§åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#ä¸‰çº§åˆ†ç±»" aria-hidden="true">#</a> ä¸‰çº§åˆ†ç±»</h1><p><strong>ä»€ä¹ˆæ˜¯ä¸‰çº§åˆ†ç±»ï¼Ÿ</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729172400791.png" alt="image-20220729172400791" tabindex="0" loading="lazy"><figcaption>image-20220729172400791</figcaption></figure><p><strong>æƒ³å®ç°å¦‚ä¸‹æ•ˆæœï¼š</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220807215344459.png" alt="image-20220807215344459" tabindex="0" loading="lazy"><figcaption>image-20220807215344459</figcaption></figure><h2 id="åç«¯æ€è·¯" tabindex="-1"><a class="header-anchor" href="#åç«¯æ€è·¯" aria-hidden="true">#</a> åç«¯æ€è·¯</h2><h3 id="æä¾›æ¥å£" tabindex="-1"><a class="header-anchor" href="#æä¾›æ¥å£" aria-hidden="true">#</a> æä¾›æ¥å£</h3><blockquote><p>å†™æ¥å£å°±æ˜¯å†™mapperã€serviceã€controllerçš„è¿‡ç¨‹</p><p>è·å–æ‰€æœ‰åˆ†ç±»ä»¥åŠå­åˆ†ç±»ï¼Œå¹¶è¿”å›jsonæ ‘å½¢ç»“æ„</p></blockquote><p><strong>ä¸€ã€service</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>service
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> <span class="token function">listWithTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


å®ç°ç±»
<span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> <span class="token function">listWithTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> categoryEntityList <span class="token operator">=</span> baseMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    	<span class="token comment">//æŸ¥å‡ºæ‰€æœ‰çš„ä¸€çº§åˆ†ç±»</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> level1Menus <span class="token operator">=</span> categoryEntityList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>categoryEntity <span class="token operator">-&gt;</span>
                categoryEntity<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>menu <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//å¯¹æ¯ä¸ªä¸€çº§åˆ†ç±»è¿›è¡Œè®¾ç½®ï¼Œå¦‚ä¸€çº§åˆ†ç±»ä¸‹çš„å¤šçº§å­åˆ†ç±»</span>
            menu<span class="token punctuation">.</span><span class="token function">setChildren</span><span class="token punctuation">(</span><span class="token function">getChildrens</span><span class="token punctuation">(</span>menu<span class="token punctuation">,</span> categoryEntityList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> menu<span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®ä¹‹åè¿›è¡Œæ’åº</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>menu1<span class="token punctuation">,</span> menu2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> level1Menus<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> <span class="token function">getChildrens</span><span class="token punctuation">(</span><span class="token class-name">CategoryEntity</span> root<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> allList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> collect <span class="token operator">=</span> allList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>categoryEntity <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//è·å¾—ä¸€çº§åˆ†ç±»ä¸‹çš„äºŒçº§åˆ†ç±»</span>
            <span class="token keyword">return</span> categoryEntity<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> root<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>categoryEntity <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//å¯¹æ¯ä¸ªäºŒçº§åˆ†ç±»è¿›è¡Œè®¾ç½®ï¼Œé€’å½’è·å¾—äºŒçº§åˆ†ç±»ä¸‹çš„ä¸‰çº§åˆ†ç±»ï¼Œä¸‰çº§åˆ†ç±»èµ°åˆ°èµ°åˆ°è¿™é‡Œä¹Ÿä¼šè·å¾—å±äºå®ƒçš„å››çº§åˆ†ç±»</span>
            categoryEntity<span class="token punctuation">.</span><span class="token function">setChildren</span><span class="token punctuation">(</span><span class="token function">getChildrens</span><span class="token punctuation">(</span>categoryEntity<span class="token punctuation">,</span> allList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> categoryEntity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>menu1<span class="token punctuation">,</span> menu2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">return</span> <span class="token punctuation">(</span>menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> collect<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„æŸ¥è¯¢ç”¨åˆ°äº†Streamæµçš„ç‰¹æ€§ï¼Œæµç¨‹å¦‚å›¾</p><blockquote><p>è¿™é‡ŒæŸ¥è¯¢çš„å…³é”®ç‚¹æ˜¯ç”¨åˆ°äº†Java1.8ä¸­çš„æ–°ç‰¹æ€§Streamæµçš„ç‰¹æ€§ï¼Œæ–°ç‰¹æ€§èƒ½å¤Ÿå°†èµ„æºè½¬åŒ–ä¸ºæµçš„å½¢å¼è¿›è¡Œæ“æ§ï¼Œç”¨æ¥å¤„ç†é›†åˆæ•°ç»„ååˆ†æ–¹ä¾¿ï¼</p><p>å…¶ä¸­.filter()æ–¹æ³•æ˜¯å¯¹æµè¿›è¡Œè¿‡æ»¤ä¸€èˆ¬å†™ç­›é€‰æ¡ä»¶ï¼Œè¢«ç­›é€‰è¿‡çš„æµåœ¨ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œ æ¯”å¦‚.map()è¿™ä¸ªæ–¹æ³•æ˜¯å¯¹è¢«ç­›é€‰è¿‡åçš„æµè¿›è¡Œæ˜ å°„ï¼Œä¸€èˆ¬æ˜¯å¯¹å±æ€§è¿›è¡Œèµ‹å€¼ã€‚</p><p>.sorted()æ–¹æ³•æ˜¯å¯¹æµè¿›è¡Œä¸€ä¸ªç®€å•çš„æ’åºæ ¼å¼å›ºå®šï¼Œè¿”å›çš„ç»“æœå¦‚æœæ˜¯å¤§äº0å°±æ˜¯å‡åºæ’åˆ—ï¼Œå¤§äº0å°±æ˜¯é™åºæ’åˆ—ï¼</p><p>.collection()æ–¹æ³•æ˜¯å¯¹æµè¿›è¡Œä¸€ä¸ªè½¬æ¢çš„æ“ä½œï¼Œå¯ä»¥å°†æµåœ¨è½¬åŒ–ä¸ºé›†åˆçš„å½¢å¼ï¼</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220730174826563.png" alt="image-20220730174826563" tabindex="0" loading="lazy"><figcaption>image-20220730174826563</figcaption></figure><p><strong>äºŒã€controller</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/list/tree&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">&gt;</span></span> categoryEntityList <span class="token operator">=</span> categoryService<span class="token punctuation">.</span><span class="token function">listWithTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> categoryEntityList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æµ‹è¯•</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220729193937106.png" alt="image-20220729193937106" tabindex="0" loading="lazy"><figcaption>image-20220729193937106</figcaption></figure><h2 id="å‰ç«¯æ€è·¯" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯æ€è·¯" aria-hidden="true">#</a> å‰ç«¯æ€è·¯</h2><h3 id="å…³é—­es6ä»£ç æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å…³é—­es6ä»£ç æ£€æŸ¥" aria-hidden="true">#</a> å…³é—­es6ä»£ç æ£€æŸ¥</h3><p><strong>ä¸å…³é—­çš„è¯ï¼Œvscodeæ§åˆ¶å°ä¼šä¸€ç›´æŠ¥é”™</strong></p><p>è¿™ä¸ªè°·ç²’å­¦é™¢é¡¹ç›®æœ‰è®²åˆ°è¿‡ï¼</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731204741821.png" alt="image-20220731204741821" tabindex="0" loading="lazy"><figcaption>image-20220731204741821</figcaption></figure><h3 id="ä¸ºå•†å“ç³»ç»Ÿæ–°å¢ä¾§è¾¹å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#ä¸ºå•†å“ç³»ç»Ÿæ–°å¢ä¾§è¾¹å¯¼èˆª" aria-hidden="true">#</a> ä¸ºå•†å“ç³»ç»Ÿæ–°å¢ä¾§è¾¹å¯¼èˆª</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731105506586.png" alt="image-20220731105506586" tabindex="0" loading="lazy"><figcaption>image-20220731105506586</figcaption></figure><h3 id="renren-fast-vueè·¯ç”±è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#renren-fast-vueè·¯ç”±è§„èŒƒ" aria-hidden="true">#</a> renren-fast-vueè·¯ç”±è§„èŒƒ</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731105738477.png" alt="image-20220731105738477" tabindex="0" loading="lazy"><figcaption>image-20220731105738477</figcaption></figure><p>å¯ä»¥çœ‹å‡ºï¼Œ<code>ä¸åŒçš„åŠŸèƒ½åœ¨ä¸é€šçš„æ–‡ä»¶å¤¹ä¸‹</code>ï¼Œ<code>ä¸åŒçš„é¡µé¢å†™ä¸åŒçš„vueé¡µé¢</code></p><p>é‚£ä¹ˆæˆ‘ä»¬å†™productæ¨¡å—ï¼Œæ‰€ä»¥å»ºproductæ–‡ä»¶ï¼Œç„¶åå­èœå•å°±å†™å¯¹åº”çš„vueæ–‡ä»¶å³å¯</p><h3 id="å‰ç«¯ä»£ç " tabindex="-1"><a class="header-anchor" href="#å‰ç«¯ä»£ç " aria-hidden="true">#</a> å‰ç«¯ä»£ç </h3><p>ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼šæ‹–æ‹½èœå•ä¿å­˜çš„æ—¶å€™ï¼Œåœ¨åç«¯æ–°å®šä¹‰äº†ä¸€ä¸ªæ¥å£å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update/sort&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">updateSort</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">CategoryEntity</span><span class="token punctuation">[</span><span class="token punctuation">]</span> category<span class="token punctuation">)</span><span class="token punctuation">{</span>
    categoryService<span class="token punctuation">.</span><span class="token function">updateBatchById</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæ•´å‰ç«¯ä»£ç </p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-switch</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>draggable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å¼€å¯æ‹–æ‹½<span class="token punctuation">&quot;</span></span> <span class="token attr-name">inactive-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å…³é—­æ‹–æ‹½<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-switch</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>draggable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>batchSave<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ‰¹é‡ä¿å­˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>batchDelete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ‰¹é‡åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tree</span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menus<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultProps<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:expand-on-click-node</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">show-checkbox</span>
      <span class="token attr-name">node-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>catId<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:default-expanded-keys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>expandedKey<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>draggable<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:allow-drop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>allowDrop<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@node-drop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleDrop<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menuTree<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-tree-node<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ node, data }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ node.label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>node.level &lt;=2<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; append(data)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>Append<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit(data)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>node.childNodes.length==0<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; remove(node, data)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>Delete<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tree</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30%<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:close-on-click-modal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åˆ†ç±»åç§°<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å›¾æ ‡<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category.icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è®¡é‡å•ä½<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category.productUnit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å– æ¶ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submitData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç¡® å®š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//è¿™é‡Œå¯ä»¥å¯¼å…¥å…¶ä»–æ–‡ä»¶ï¼ˆæ¯”å¦‚ï¼šç»„ä»¶ï¼Œå·¥å…·jsï¼Œç¬¬ä¸‰æ–¹æ’ä»¶jsï¼Œjsonæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ç­‰ç­‰ï¼‰</span>
<span class="token comment">//ä¾‹å¦‚ï¼šimport ã€Šç»„ä»¶åç§°ã€‹ from &#39;ã€Šç»„ä»¶è·¯å¾„ã€‹&#39;;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">//importå¼•å…¥çš„ç»„ä»¶éœ€è¦æ³¨å…¥åˆ°å¯¹è±¡ä¸­æ‰èƒ½ä½¿ç”¨</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">pCid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">draggable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">updateNodes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxLevel</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dialogType</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">//edit,add</span>
      <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parentCid</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">catLevel</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">showStatus</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">sort</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">productUnit</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">catId</span><span class="token operator">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dialogVisible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">menus</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">expandedKey</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">defaultProps</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">&quot;children&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">//è®¡ç®—å±æ€§ ç±»ä¼¼äºdataæ¦‚å¿µ</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//ç›‘æ§dataä¸­çš„æ•°æ®å˜åŒ–</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//æ–¹æ³•é›†åˆ</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/list/tree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æˆåŠŸè·å–åˆ°èœå•æ•°æ®...&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>menus <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">batchDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> catIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> checkedNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menuTree<span class="token punctuation">.</span><span class="token function">getCheckedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¢«é€‰ä¸­çš„å…ƒç´ &quot;</span><span class="token punctuation">,</span> checkedNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> checkedNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        catIds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>checkedNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ˜¯å¦æ‰¹é‡åˆ é™¤ã€</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>catIds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ã€‘èœå•?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;æç¤º&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">&quot;ç¡®å®š&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cancelButtonText</span><span class="token operator">:</span> <span class="token string">&quot;å–æ¶ˆ&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span>catIds<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;èœå•æ‰¹é‡åˆ é™¤æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">batchSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/update/sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;èœå•é¡ºåºç­‰ä¿®æ”¹æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ·æ–°å‡ºæ–°çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®éœ€è¦é»˜è®¤å±•å¼€çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expandedKey <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pCid<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>maxLevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// this.pCid = 0;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleDrop</span><span class="token punctuation">(</span><span class="token parameter">draggingNode<span class="token punctuation">,</span> dropNode<span class="token punctuation">,</span> dropType<span class="token punctuation">,</span> ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;handleDrop: &quot;</span><span class="token punctuation">,</span> draggingNode<span class="token punctuation">,</span> dropNode<span class="token punctuation">,</span> dropType<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//1ã€å½“å‰èŠ‚ç‚¹æœ€æ–°çš„çˆ¶èŠ‚ç‚¹id</span>
      <span class="token keyword">let</span> pCid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> siblings <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dropType <span class="token operator">==</span> <span class="token string">&quot;before&quot;</span> <span class="token operator">||</span> dropType <span class="token operator">==</span> <span class="token string">&quot;after&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pCid <span class="token operator">=</span>
          dropNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId <span class="token operator">==</span> <span class="token keyword">undefined</span>
            <span class="token operator">?</span> <span class="token number">0</span>
            <span class="token operator">:</span> dropNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">;</span>
        siblings <span class="token operator">=</span> dropNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        pCid <span class="token operator">=</span> dropNode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">;</span>
        siblings <span class="token operator">=</span> dropNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pCid<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pCid<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//2ã€å½“å‰æ‹–æ‹½èŠ‚ç‚¹çš„æœ€æ–°é¡ºåºï¼Œ</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> siblings<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId <span class="token operator">==</span> draggingNode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//å¦‚æœéå†çš„æ˜¯å½“å‰æ­£åœ¨æ‹–æ‹½çš„èŠ‚ç‚¹</span>
          <span class="token keyword">let</span> catLevel <span class="token operator">=</span> draggingNode<span class="token punctuation">.</span>level<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>level <span class="token operator">!=</span> draggingNode<span class="token punctuation">.</span>level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//å½“å‰èŠ‚ç‚¹çš„å±‚çº§å‘ç”Ÿå˜åŒ–</span>
            catLevel <span class="token operator">=</span> siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>level<span class="token punctuation">;</span>
            <span class="token comment">//ä¿®æ”¹ä»–å­èŠ‚ç‚¹çš„å±‚çº§</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateChildNodeLevel</span><span class="token punctuation">(</span>siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">catId</span><span class="token operator">:</span> siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">,</span>
            <span class="token literal-property property">sort</span><span class="token operator">:</span> i<span class="token punctuation">,</span>
            <span class="token literal-property property">parentCid</span><span class="token operator">:</span> pCid<span class="token punctuation">,</span>
            <span class="token literal-property property">catLevel</span><span class="token operator">:</span> catLevel
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">catId</span><span class="token operator">:</span> siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">,</span> <span class="token literal-property property">sort</span><span class="token operator">:</span> i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">//3ã€å½“å‰æ‹–æ‹½èŠ‚ç‚¹çš„æœ€æ–°å±‚çº§</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;updateNodes&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">updateChildNodeLevel</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> cNode <span class="token operator">=</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>updateNodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">catId</span><span class="token operator">:</span> cNode<span class="token punctuation">.</span>catId<span class="token punctuation">,</span>
            <span class="token literal-property property">catLevel</span><span class="token operator">:</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>level
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateChildNodeLevel</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">allowDrop</span><span class="token punctuation">(</span><span class="token parameter">draggingNode<span class="token punctuation">,</span> dropNode<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//1ã€è¢«æ‹–åŠ¨çš„å½“å‰èŠ‚ç‚¹ä»¥åŠæ‰€åœ¨çš„çˆ¶èŠ‚ç‚¹æ€»å±‚æ•°ä¸èƒ½å¤§äº3</span>

      <span class="token comment">//1ï¼‰ã€è¢«æ‹–åŠ¨çš„å½“å‰èŠ‚ç‚¹æ€»å±‚æ•°</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;allowDrop:&quot;</span><span class="token punctuation">,</span> draggingNode<span class="token punctuation">,</span> dropNode<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countNodeLevel</span><span class="token punctuation">(</span>draggingNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//å½“å‰æ­£åœ¨æ‹–åŠ¨çš„èŠ‚ç‚¹+çˆ¶èŠ‚ç‚¹æ‰€åœ¨çš„æ·±åº¦ä¸å¤§äº3å³å¯</span>
      <span class="token keyword">let</span> deep <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>maxLevel <span class="token operator">-</span> draggingNode<span class="token punctuation">.</span>level<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ·±åº¦ï¼š&quot;</span><span class="token punctuation">,</span> deep<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//   this.maxLevel</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;inner&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(</span>
        <span class="token comment">//   `this.maxLevelï¼š${this.maxLevel}ï¼›draggingNode.data.catLevelï¼š${draggingNode.data.catLevel}ï¼›dropNode.levelï¼š${dropNode.level}`</span>
        <span class="token comment">// );</span>
        <span class="token keyword">return</span> deep <span class="token operator">+</span> dropNode<span class="token punctuation">.</span>level <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> deep <span class="token operator">+</span> dropNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>level <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">countNodeLevel</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//æ‰¾åˆ°æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œæ±‚å‡ºæœ€å¤§æ·±åº¦</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>level <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>maxLevel <span class="token operator">=</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>level<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countNodeLevel</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">edit</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¦ä¿®æ”¹çš„æ•°æ®&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogType <span class="token operator">=</span> <span class="token string">&quot;edit&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;ä¿®æ”¹åˆ†ç±»&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

      <span class="token comment">//å‘é€è¯·æ±‚è·å–å½“å‰èŠ‚ç‚¹æœ€æ–°çš„æ•°æ®</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/product/category/info/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>catId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//è¯·æ±‚æˆåŠŸ</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¦å›æ˜¾çš„æ•°æ®&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>name <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>catId <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>icon <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>icon<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>productUnit <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>productUnit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>parentCid <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>parentCid<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>catLevel <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catLevel<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>sort <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>sort<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>showStatus <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>showStatus<span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**
         *         parentCid: 0,
         catLevel: 0,
         showStatus: 1,
         sort: 0,
         */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">append</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;append&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogType <span class="token operator">=</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;æ·»åŠ åˆ†ç±»&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>parentCid <span class="token operator">=</span> data<span class="token punctuation">.</span>catId<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>catLevel <span class="token operator">=</span> data<span class="token punctuation">.</span>catLevel <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>catId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>icon <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>productUnit <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>sort <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>showStatus <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">submitData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dialogType <span class="token operator">==</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dialogType <span class="token operator">==</span> <span class="token string">&quot;edit&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">editCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//ä¿®æ”¹ä¸‰çº§åˆ†ç±»æ•°æ®</span>
    <span class="token function">editCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> <span class="token punctuation">{</span>catId<span class="token punctuation">,</span> name<span class="token punctuation">,</span> icon<span class="token punctuation">,</span> productUnit<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/update&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>catId<span class="token punctuation">,</span> name<span class="token punctuation">,</span> icon<span class="token punctuation">,</span> productUnit<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;èœå•ä¿®æ”¹æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…³é—­å¯¹è¯æ¡†</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ·æ–°å‡ºæ–°çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®éœ€è¦é»˜è®¤å±•å¼€çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expandedKey <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>parentCid<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//æ·»åŠ ä¸‰çº§åˆ†ç±»</span>
    <span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æäº¤çš„ä¸‰çº§åˆ†ç±»æ•°æ®&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/save&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;èœå•ä¿å­˜æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…³é—­å¯¹è¯æ¡†</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ·æ–°å‡ºæ–°çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®éœ€è¦é»˜è®¤å±•å¼€çš„èœå•</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expandedKey <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">.</span>parentCid<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> ids <span class="token operator">=</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ˜¯å¦åˆ é™¤ã€</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ã€‘èœå•?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;æç¤º&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">&quot;ç¡®å®š&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cancelButtonText</span><span class="token operator">:</span> <span class="token string">&quot;å–æ¶ˆ&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/product/category/delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span>ids<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;èœå•åˆ é™¤æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆ·æ–°å‡ºæ–°çš„èœå•</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®éœ€è¦é»˜è®¤å±•å¼€çš„èœå•</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>expandedKey <span class="token operator">=</span> <span class="token punctuation">[</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - åˆ›å»ºå®Œæˆï¼ˆå¯ä»¥è®¿é—®å½“å‰thiså®ä¾‹ï¼‰</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - æŒ‚è½½å®Œæˆï¼ˆå¯ä»¥è®¿é—®DOMå…ƒç´ ï¼‰</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - åˆ›å»ºä¹‹å‰</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - æŒ‚è½½ä¹‹å‰</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - æ›´æ–°ä¹‹å‰</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - æ›´æ–°ä¹‹å</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - é”€æ¯ä¹‹å‰</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//ç”Ÿå‘½å‘¨æœŸ - é”€æ¯å®Œæˆ</span>
  <span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span> <span class="token comment">//å¦‚æœé¡µé¢æœ‰keep-aliveç¼“å­˜åŠŸèƒ½ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè§¦å‘</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gatewayé…ç½®" tabindex="-1"><a class="header-anchor" href="#gatewayé…ç½®" aria-hidden="true">#</a> GateWayé…ç½®</h2><h3 id="gatewayå›é¡¾" tabindex="-1"><a class="header-anchor" href="#gatewayå›é¡¾" aria-hidden="true">#</a> GateWayå›é¡¾</h3><p><strong>ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</strong></p><ol><li>Route(è·¯ç”±) - è·¯ç”±æ˜¯æ„å»ºç½‘å…³çš„åŸºæœ¬æ¨¡å—,å®ƒç”±ID,ç›®æ ‡URI,ä¸€ç³»åˆ—çš„æ–­è¨€å’Œè¿‡æ»¤å™¨ç»„æˆ,å¦‚æ–­è¨€ä¸ºtrueåˆ™åŒ¹é…è¯¥è·¯ç”±ï¼›</li><li>Predicate(æ–­è¨€) - å¼€å‘äººå‘˜å¯ä»¥åŒ¹é…HTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹(ä¾‹å¦‚è¯·æ±‚å¤´æˆ–è¯·æ±‚å‚æ•°),å¦‚æœè¯·æ±‚ä¸æ–­è¨€ç›¸åŒ¹é…åˆ™è¿›è¡Œè·¯ç”±ï¼›</li><li>Filter(è¿‡æ»¤) - æŒ‡çš„æ˜¯Springæ¡†æ¶ä¸­GatewayFilterçš„å®ä¾‹,ä½¿ç”¨è¿‡æ»¤å™¨,å¯ä»¥åœ¨è¯·æ±‚è¢«è·¯ç”±å‰æˆ–è€…ä¹‹åå¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ã€‚</li></ol><p>predicateå°±æ˜¯æˆ‘ä»¬çš„åŒ¹é…æ¡ä»¶ï¼›è€Œfliterï¼Œå°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ— æ‰€ä¸èƒ½çš„æ‹¦æˆªå™¨ã€‚æœ‰äº†è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œå†åŠ ä¸Šç›®æ ‡uriï¼Œå°±å¯ä»¥å®ç°ä¸€ä¸ªå…·ä½“çš„è·¯ç”±äº†</p><p><strong>å·¥ä½œæµç¨‹</strong></p><p>å®¢æˆ·ç«¯å‘ç½‘å…³å‘é€è¯·æ±‚ã€‚å¦‚æœ<code>GateWay Handler Mapping</code>ç¡®å®šè¯·æ±‚ä¸è·¯ç”±åŒ¹é…ï¼ˆè¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°predicateï¼‰ï¼Œåˆ™å°†è¿™ä¸ªè¯·æ±‚å‘é€ç»™<code>Gateway web handler</code>è¿›è¡Œå¤„ç†ã€‚å¦‚å›¾æ‰€ç¤ºGateway web handlerå¤„ç†è¯·æ±‚ä¼šç»è¿‡ä¸€äº›<code>filterï¼ˆè¿‡æ»¤å™¨ï¼‰</code>è¿‡æ»¤å™¨ä¹‹é—´ç”¨è™šçº¿åˆ†å¼€æ˜¯å› ä¸ºè¿‡æ»¤å™¨å¯èƒ½ä¼šåœ¨å‘é€ä»£ç†è¯·æ±‚ä¹‹å‰(â€œpreâ€)æˆ–ä¹‹å(â€œpost&quot;ï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</p><p><code>æ ¸å¿ƒçš„é€»è¾‘ï¼šè·¯ç”±è½¬å‘ + æ‰§è¡Œè¿‡æ»¤å™¨é“¾ã€‚</code></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731114052109.png" alt="image-20220731114052109" tabindex="0" loading="lazy"><figcaption>image-20220731114052109</figcaption></figure><h3 id="è·¨åŸŸé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è·¨åŸŸé—®é¢˜" aria-hidden="true">#</a> è·¨åŸŸé—®é¢˜</h3><p>è·¨åŸŸï¼šæŒ‡çš„æ˜¯æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬ã€‚å®ƒæ˜¯ç”±æµè§ˆå™¨çš„åŒæºç­–ç•¥é€ æˆçš„ï¼Œæ˜¯æµè§ˆå™¨å¯¹javascriptæ–½åŠ çš„å®‰å…¨é™åˆ¶ã€‚</p><p>ä¾‹å¦‚ï¼šaé¡µé¢æƒ³è·å–bé¡µé¢èµ„æºï¼Œå¦‚æœaã€bé¡µé¢çš„åè®®ã€åŸŸåã€ç«¯å£ã€å­åŸŸåä¸åŒï¼Œæ‰€è¿›è¡Œçš„è®¿é—®è¡ŒåŠ¨éƒ½æ˜¯è·¨åŸŸçš„ï¼Œè€Œæµè§ˆå™¨ä¸ºäº†å®‰å…¨é—®é¢˜ä¸€èˆ¬éƒ½é™åˆ¶äº†è·¨åŸŸè®¿é—®ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸è·¨åŸŸè¯·æ±‚èµ„æºã€‚æ³¨æ„ï¼šè·¨åŸŸé™åˆ¶è®¿é—®ï¼Œå…¶å®æ˜¯<strong>æµè§ˆå™¨çš„é™åˆ¶</strong>ã€‚ç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼ï¼ï¼</p><p>åŒæºç­–ç•¥ï¼šæ˜¯æŒ‡åè®®ï¼ŒåŸŸåï¼Œç«¯å£éƒ½è¦ç›¸åŒï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä¸åŒéƒ½ä¼šäº§ç”Ÿè·¨åŸŸ</p><p><strong>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ</strong></p><p>ç”±ä¹‹å‰çš„ä»‹ç»æˆ‘ä»¬å·²ç»çŸ¥é“é”™è¯¯çš„åŸå› ï¼Œæ—¢ç„¶è·¨åŸŸä¼šäº§ç”Ÿé—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸è·¨åŸŸä¸å°±å®Œäº†å˜›ï¼ï¼ï¼</p><p>1.æ³¨è§£@CrossOriginï¼Œåœ¨åç«¯æ¥å£åŠ ä¸Š@CrossOriginå³å¯è§£å†³è·¨åŸŸé—®é¢˜</p><p>2.ä½¿ç”¨ç½‘å…³è§£å†³ï¼Œé…ç½®è·¨åŸŸé…ç½®ç±»è¿›è¡Œè®¾ç½®</p><h3 id="å‰ç«¯é…ç½®ç»Ÿä¸€çš„è¯·æ±‚åœ°å€" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯é…ç½®ç»Ÿä¸€çš„è¯·æ±‚åœ°å€" aria-hidden="true">#</a> å‰ç«¯é…ç½®ç»Ÿä¸€çš„è¯·æ±‚åœ°å€</h3><p>window.SITE_CONFIG[&#39;baseUrl&#39;] = &#39;<a href="http://localhost:88/api" target="_blank" rel="noopener noreferrer">http://localhost:88/api<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&#39;;</p><p><strong>åç«¯çš„ç½‘å…³åœ°å€æ˜¯å¤šå°‘å°±å¡«å¤š</strong>å°‘ï¼Œè¿™æ ·æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå‘åˆ°<code>http://localhost:88/api</code>è¿™ä¸ªuri</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731110417031.png" alt="image-20220731110417031" tabindex="0" loading="lazy"><figcaption>image-20220731110417031</figcaption></figure><h3 id="å°†å¾®æœåŠ¡æ¥å…¥nacos" tabindex="-1"><a class="header-anchor" href="#å°†å¾®æœåŠ¡æ¥å…¥nacos" aria-hidden="true">#</a> å°†å¾®æœåŠ¡æ¥å…¥nacos</h3><p>è¿™é‡Œé€šè¿‡å¼•å…¥mall-commonæ¨¡å—è®©å…¶ä»–æ¨¡å—å¯ç¨‹å®ƒçš„ä¾èµ–</p><blockquote><p>è¿™é‡Œrenren-fastç‰ˆæœ¬è¦æ”¹æˆå’Œä½ Springbootç‰ˆæœ¬ä¸€æ ·ï¼Œå¦‚ä¸‹ï¼š</p><ol><li>springbootç‰ˆæœ¬å’Œsprincloudæœ‰ç‰ˆæœ¬å¯¹åº”ï¼Œmall-commonæ¨¡å—å¼•å…¥çš„cloudç‰ˆæœ¬éƒ½æ˜¯å¯¹åº”å¥½çš„</li><li>åŒ…çš„å†²çª</li></ol><p>å› ä¸ºrenren-fastæœ¬æ¥ç”¨çš„æ˜¯2.6.6ï¼Œå®ƒå’Œä½ç‰ˆæœ¬è¿˜æœ‰ä¸ªç‚¹ä¸åŒå°±æ˜¯é…ç½®è·¨åŸŸçš„é…ç½®æ–‡ä»¶æ—¶2.6.6ç”¨çš„æ˜¯<code>.allowedOriginPatterns</code></p><p>è€Œ2.4ç‰ˆæœ¬ä»¥ä¸‹çš„ç”¨çš„æ˜¯<code>.allowedOrigins</code>ï¼Œæ‰€ä»¥è¿›è¡Œæ›¿æ¢å³å¯å°†**.allowedOriginPatternsæ›¿æ¢ä¸º.allowedOrigins**</p><p>å¦‚æœè¿˜æœ‰å†²çªï¼Œå°±ç”¨maven helperæ’æŸ¥å³å¯</p><p><code>https://blog.csdn.net/kingwinstar/article/details/106916140?spm=1001.2014.3001.5506</code></p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731111240299.png" alt="image-20220731111240299" tabindex="0" loading="lazy"><figcaption>image-20220731111240299</figcaption></figure><p>é‚£ä¹ˆå°†å¾®æœåŠ¡å¼•å…¥nacosæ³¨å†Œä¸­å¿ƒåªè¦ä¸‰æ­¥</p><ol><li>å¼•å…¥ä¾èµ–ï¼ˆmall-commonï¼‰</li><li>æ·»åŠ æ³¨è§£ï¼ˆå¯åŠ¨ç±»æ·»åŠ @EnableDiscoveryClientï¼‰</li><li>é…ç½®æ–‡ä»¶ï¼ˆæŒ‡å®šnacosæ³¨å†Œä¸­å¿ƒåœ°å€å’Œå¾®æœåŠ¡åç§°ï¼‰</li></ol><p>renren-fastçš„devé…ç½®æ–‡ä»¶åŠ ä¸Šå¦‚ä¸‹å†…å®¹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> renren<span class="token punctuation">-</span>fast
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç½‘å…³çš„propertiesæ–‡ä»¶åŠ ä¸Šå¦‚ä¸‹å†…å®¹</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># åº”ç”¨åç§°</span>
<span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-gateway</span>
<span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">88</span>
<span class="token comment">#æœåŠ¡å‘ç°</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†ŒæˆåŠŸå¦‚ä¸‹</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731171048839.png" alt="image-20220731171048839" tabindex="0" loading="lazy"><figcaption>image-20220731171048839</figcaption></figure><h3 id="è®¾ç½®è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®è·¯ç”±" aria-hidden="true">#</a> è®¾ç½®è·¯ç”±</h3><blockquote><p>Spring Cloud Gateway è·¯å¾„é‡å†™æ­£åˆ™è¡¨è¾¾å¼çš„ç†è§£ï¼š<a href="https://blog.csdn.net/weixin_43199379/article/details/107768203" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_43199379/article/details/107768203<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>è¿™é‡Œæˆ‘åœ¨gatewayä¸­é…ç½®äº†å°†nacosä½œä¸ºé…ç½®ä¸­å¿ƒ</p><p>æ‰€ä»¥é€šè¿‡å†™bootstrap.propertiesæ–‡ä»¶æ¥æŒ‡å®šåœ°å€å’Œå‘½åç©ºé—´å³å¯</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">mall-gateway</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:8848</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">f1212912-c9f6-4323-b9f5-1a7d8d92c5b4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      	<span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//mall<span class="token punctuation">-</span>product
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/product/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
          <span class="token comment"># å°† https://ç½‘å…³ip/api/product/** è¿™ä¸ªè·¯å¾„é‡å†™ä¸º https://mall-productå¾®æœåŠ¡åœ°å€:ç«¯å£/**</span>
            <span class="token punctuation">-</span> RewritePath=/api/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
            
      
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> admin_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//renren<span class="token punctuation">-</span>fast
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
          <span class="token comment"># å°† https://ç½‘å…³ip/api/** è¿™ä¸ªè·¯å¾„é‡å†™ä¸º https://renren-fastå¾®æœåŠ¡åœ°å€:ç«¯å£/renren-fast**</span>
            <span class="token punctuation">-</span> RewritePath=/api/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/renren<span class="token punctuation">-</span>fast/$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#é…ç½®è·¨åŸŸ" aria-hidden="true">#</a> é…ç½®è·¨åŸŸ</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CrosConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsWebFilter</span> <span class="token function">corsWebFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ­¤å¤„ä½¿ç”¨å“åº”å¼åŒ…</span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CorsConfiguration</span> corsConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é…ç½®è·¨åŸŸ</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…è®¸å“ªäº›è¯·æ±‚æ¥æº</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ˜¯å¦å…è®¸æºå¸¦cookie</span>
        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> corsConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsWebFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>renren-fastæ¨¡å—åˆ é™¤è‡ªå¸¦çš„è·¨åŸŸé…ç½®</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731174131099.png" alt="image-20220731174131099" tabindex="0" loading="lazy"><figcaption>image-20220731174131099</figcaption></figure><h2 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•" aria-hidden="true">#</a> æµ‹è¯•</h2><p>è¿™é‡Œé…ç½®çš„è¿˜æœ‰é€»è¾‘åˆ é™¤ï¼Œåœ¨å®ä½“ç±»ä¸ŠåŠ </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@TableLogic</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>delval <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span>

<span class="token comment">//é…ç½®æ–‡ä»¶è¡¥å……</span>
mybatis<span class="token operator">-</span>plus<span class="token operator">:</span>
  mapper<span class="token operator">-</span>locations<span class="token operator">:</span> classpath<span class="token operator">:</span><span class="token operator">/</span>mapper<span class="token comment">/**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml
  global<span class="token operator">-</span>config<span class="token operator">:</span>
    db<span class="token operator">-</span>config<span class="token operator">:</span>
      id<span class="token operator">-</span>type<span class="token operator">:</span> auto
      logic<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">:</span> <span class="token number">1</span>
      logic<span class="token operator">-</span>not<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">:</span> <span class="token number">0</span>         
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731200200408.png" alt="image-20220731200200408" tabindex="0" loading="lazy"><figcaption>image-20220731200200408</figcaption></figure><h1 id="å“ç‰Œç®¡ç†" tabindex="-1"><a class="header-anchor" href="#å“ç‰Œç®¡ç†" aria-hidden="true">#</a> å“ç‰Œç®¡ç†</h1><h2 id="ç®€å•ä¸Šä¼ æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ç®€å•ä¸Šä¼ æµ‹è¯•" aria-hidden="true">#</a> ç®€å•ä¸Šä¼ æµ‹è¯•</h2><p>OSSæ˜¯å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼ŸæŠŠå›¾ç‰‡å­˜å‚¨åˆ°äº‘æœåŠ¡å™¨ä¸Šèƒ½è®©æ‰€æœ‰äººéƒ½è®¿é—®åˆ°ï¼</p><p>è¯¦ç»†æ“ä½œå¯æŸ¥å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹é¢åªå†™å…³é”®ä»£ç </p><p>[<a href="https://help.aliyun.com/document_detail/32006.html" target="_blank" rel="noopener noreferrer">SDKç¤ºä¾‹ (aliyun.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>](<a href="https://help.aliyun.com/document_detail/32008.html" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/document_detail/32008.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p><p><strong>ä¸€ã€åˆ›å»ºå­ç”¨æˆ·æµ‹è¯•ç”¨ä¾‹</strong></p><p>å®˜æ–¹æ¨èä½¿ç”¨å­è´¦æˆ·çš„AccessIDå’ŒSecurityIDï¼Œå› ä¸ºå¦‚æœç›´æ¥ç»™è´¦æˆ·çš„AccessIDå’ŒSecurityIDçš„è¯ï¼Œå¦‚æœä¸å°å¿ƒè¢«å…¶ä»–äººè·å–åˆ°äº†ï¼Œé‚£è´¦æˆ·å¯æ˜¯æœ‰å…¨éƒ¨æƒé™çš„ï¼ï¼ï¼</p><p>æ‰€ä»¥è¿™é‡Œé€šè¿‡å»ºç«‹å­è´¦æˆ·ï¼Œç»™å­è´¦æˆ·åˆ†é…éƒ¨åˆ†æƒé™å®ä¹ ã€‚</p><p>è¿™é‡Œé€šè¿‡å­è´¦æˆ·ç®¡ç†OSSçš„æ—¶å€™ï¼Œè¦ç»™å­è´¦æˆ·æ·»åŠ æ“æ§OSSèµ„æºçš„æƒé™ è¿™é‡Œæ˜¯å¿…é¡»è¦åšçš„ï¼Œå› ä¸ºå­è´¦æˆ·é»˜è®¤æ˜¯æ²¡æœ‰ä»»ä½•æƒé™çš„ï¼Œå¿…é¡»æ‰‹åŠ¨ç»™ä»–èµ‹äºˆæƒé™</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731223234229.png" alt="image-20220731223234229" tabindex="0" loading="lazy"><figcaption>image-20220731223234229</figcaption></figure><p><strong>äºŒã€å¼•å…¥ä¾èµ–</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æµ‹è¯•ç”¨ä¾‹</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">MallProductApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUploads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token comment">// Endpointä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>
        <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">&quot;https://oss-cn-hangzhou.aliyuncs.com&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// é˜¿é‡Œäº‘è´¦å·AccessKeyæ‹¥æœ‰æ‰€æœ‰APIçš„è®¿é—®æƒé™ï¼Œé£é™©å¾ˆé«˜ã€‚å¼ºçƒˆå»ºè®®æ‚¨åˆ›å»ºå¹¶ä½¿ç”¨RAMç”¨æˆ·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½•RAMæ§åˆ¶å°åˆ›å»ºRAMç”¨æˆ·ã€‚</span>
        <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">&quot;ã€‚ã€‚ã€‚&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">&quot;ã€‚ã€‚ã€‚&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// å¡«å†™Bucketåç§°ï¼Œä¾‹å¦‚examplebucketã€‚</span>
        <span class="token class-name">String</span> bucketName <span class="token operator">=</span> <span class="token string">&quot;pyy-mall&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ï¼Œä¾‹å¦‚exampledir/exampleobject.txtã€‚</span>
        <span class="token class-name">String</span> objectName <span class="token operator">=</span> <span class="token string">&quot;2022/testPhoto.txt&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// å¡«å†™æœ¬åœ°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚D:\\localpath\\examplefile.txtã€‚</span>
        <span class="token comment">// å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„ï¼Œåˆ™é»˜è®¤ä»ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
        <span class="token class-name">String</span> filePath<span class="token operator">=</span> <span class="token string">&quot;C:\\Users\\Jack\\Desktop\\R-C.jfif&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>
        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºPutObjectè¯·æ±‚ã€‚</span>
            ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OSSException</span> oe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Caught an OSSException, which means your request made it to OSS, &quot;</span>
                    <span class="token operator">+</span> <span class="token string">&quot;but was rejected with an error response for some reason.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error Message:&quot;</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error Code:&quot;</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Request ID:&quot;</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getRequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Host ID:&quot;</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getHostId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> ce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Caught an ClientException, which means the client encountered &quot;</span>
                    <span class="token operator">+</span> <span class="token string">&quot;a serious internal problem while trying to communicate with OSS, &quot;</span>
                    <span class="token operator">+</span> <span class="token string">&quot;such as not being able to access the network.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error Message:&quot;</span> <span class="token operator">+</span> ce<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ossClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220731223835859.png" alt="image-20220731223835859" tabindex="0" loading="lazy"><figcaption>image-20220731223835859</figcaption></figure><h2 id="aliyun-spring-boot-oss" tabindex="-1"><a class="header-anchor" href="#aliyun-spring-boot-oss" aria-hidden="true">#</a> Aliyun Spring Boot OSS</h2><p><a href="https://github.com/alibaba/aliyun-spring-boot/blob/master/aliyun-spring-boot-samples/aliyun-oss-spring-boot-sample/README-zh.md" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/aliyun-spring-boot/blob/master/aliyun-spring-boot-samples/aliyun-oss-spring-boot-sample/README-zh.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>ä¸€ã€å¼•å…¥ä¾èµ–</strong></p><p>æˆ‘ä»¬ä¸æ˜¯è¿›è¡Œä¾èµ–ç®¡ç†äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦æ˜¾ç¤ºå†™å‡º2.1.1ç‰ˆæœ¬</p><p>è¿™æ˜¯å› ä¸ºè¿™ä¸ªåŒ…æ²¡æœ‰æœ€æ–°çš„åŒ…ï¼Œåªæœ‰å’Œ2.1.1åŒ¹é…çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alicloud-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>äºŒã€åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® OSS æœåŠ¡å¯¹åº”çš„ accessKeyã€secretKey å’Œ endpoint</strong></p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">    alicloud</span><span class="token punctuation">:</span>
<span class="token key attr-name">      access-key</span><span class="token punctuation">:</span> <span class="token value attr-value">xxx</span>
<span class="token key attr-name">      secret-key</span><span class="token punctuation">:</span> <span class="token value attr-value">xxx</span>
<span class="token key attr-name">      oss</span><span class="token punctuation">:</span>
<span class="token key attr-name">        endpoint</span><span class="token punctuation">:</span> <span class="token value attr-value">oss-cn-hangzhou.aliyuncs.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æ³¨å…¥OSSClientæµ‹è¯•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>
<span class="token keyword">private</span> <span class="token class-name">OSSClient</span> ossClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUploads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\Jack\\Desktop\\LeetCode_Sharing.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token string">&quot;pyy-mall&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2022/testPhoto2.png&quot;</span><span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…³é—­OSSClientã€‚</span>
    ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šä¼ å®Œæˆ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220802215310630.png" alt="image-20220802215310630" tabindex="0" loading="lazy"><figcaption>image-20220802215310630</figcaption></figure><h2 id="æ–°æ¨¡å—mall-third-service" tabindex="-1"><a class="header-anchor" href="#æ–°æ¨¡å—mall-third-service" aria-hidden="true">#</a> æ–°æ¨¡å—mall-third-service</h2><p>æ–°æ¨¡å—å­˜æ”¾æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ŒåƒçŸ­ä¿¡æœåŠ¡ã€å›¾ç‰‡æœåŠ¡ã€è§†é¢‘æœåŠ¡ç­‰ç­‰</p><p>å¼•å…¥ä¾èµ–å¦‚ä¸‹ï¼š</p><blockquote><p>è¿™é‡Œå»é™¤äº†mpçš„ä¾èµ–ï¼Œå› ä¸ºå¼•å…¥mpå°±éœ€è¦é…ç½®æ•°æ®åº“æœåŠ¡å™¨åœ°å€</p></blockquote><h3 id="æ¥å£å¼€å‘" tabindex="-1"><a class="header-anchor" href="#æ¥å£å¼€å‘" aria-hidden="true">#</a> æ¥å£å¼€å‘</h3><p><strong>ä¸€ã€é…ç½®æ–‡ä»¶</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.caq.mall<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mall-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alicloud-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring-boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803164312380.png" alt="image-20220803164312380" tabindex="0" loading="lazy"><figcaption>image-20220803164312380</figcaption></figure><p><strong>äºŒã€å¯åŠ¨ç±»æ·»åŠ æ³¨è§£</strong></p><blockquote><p>å°†ç¬¬ä¸‰æ–¹çš„åŒ…ä¹Ÿæ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</p></blockquote><ul><li><p>ä¸»å¯åŠ¨ç±»@EnableDiscoveryClient</p></li><li><p>application.ymlé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><ul><li><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment">#ç”¨æ¥æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#nacosåœ°å€</span>
    <span class="token key atrule">alicloud</span><span class="token punctuation">:</span>
      <span class="token key atrule">access-key</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
      <span class="token key atrule">secret-key</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
      <span class="token key atrule">oss</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com
        <span class="token key atrule">bucket</span><span class="token punctuation">:</span> pyy<span class="token punctuation">-</span>mall
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>bootstrap.ymlæ–‡ä»¶æŒ‡å®šæ³¨å†Œä¸­å¿ƒ</p><ul><li><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment">#ç”¨æ¥æŒ‡å®šé…ç½®ä¸­å¿ƒåœ°å€</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> mall<span class="token punctuation">-</span>third<span class="token punctuation">-</span>service
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 2bbd2076<span class="token punctuation">-</span>36c8<span class="token punctuation">-</span>44b2<span class="token punctuation">-</span>9c2e<span class="token punctuation">-</span>17ce5406afb7
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml
        <span class="token key atrule">extension-configs</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> mall<span class="token punctuation">-</span>third<span class="token punctuation">-</span>service.yml
            <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP
            <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><p><strong>ä¸‰ã€æµ‹è¯•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">MallThirdServiceApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token class-name">OSSClient</span> ossClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>

        <span class="token comment">// ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\Jack\\Desktop\\LeetCode_Sharing.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token string">&quot;pyy-mall&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2022/testPhoto3.png&quot;</span><span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å…³é—­OSSClientã€‚</span>
        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šä¼ å®Œæˆ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ²¡é—®é¢˜ï¼</p><p><strong>å››ã€æ”¹å–„ä¸Šä¼ </strong></p><p>æœåŠ¡ç«¯ç­¾ååç›´ä¼ </p><blockquote><p>é‡‡ç”¨JavaScriptå®¢æˆ·ç«¯ç›´æ¥ç­¾åï¼ˆå‚è§JavaScriptå®¢æˆ·ç«¯ç­¾åç›´ä¼ ï¼‰æ—¶ï¼ŒAccessKeyIDå’ŒAcessKeySecretä¼šæš´éœ²åœ¨å‰ç«¯é¡µé¢ï¼Œå› æ­¤å­˜åœ¨ä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚</p><p>å› æ­¤ï¼ŒOSSæä¾›äº†æœåŠ¡ç«¯ç­¾ååç›´ä¼ çš„æ–¹æ¡ˆã€‚</p></blockquote><ul><li>å‘æœåŠ¡å™¨è·å–åˆ°ç­¾åï¼Œå†å»è¯·æ±‚ossæœåŠ¡å™¨</li></ul><p>controllerå¦‚ä¸‹ï¼š</p><blockquote><p>è¿™é‡Œå®šä¹‰è¿”å›ç±»ä¸ºRæ˜¯ä¸ºäº†ç»Ÿä¸€è¿”å›ç»“æœï¼Œåˆ°åé¢ä¹Ÿä¼šç”¨åˆ°</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>caq<span class="token punctuation">.</span>mall<span class="token punctuation">.</span>thirdservice<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;oss&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OssController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">OSS</span> ossClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${spring.cloud.alicloud.oss.endpoint}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${spring.cloud.alicloud.oss.bucket}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> bucket<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${spring.cloud.alicloud.access-key}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> accessId<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SimpleDateFormat</span> format <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/policy&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">getPolicy</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token string">&quot;https://&quot;</span> <span class="token operator">+</span> bucket <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> endpoint<span class="token punctuation">;</span> <span class="token comment">// hostçš„æ ¼å¼ä¸º bucketname.endpoint</span>
        <span class="token comment">// callbackUrlä¸ºä¸Šä¼ å›è°ƒæœåŠ¡å™¨çš„URLï¼Œè¯·å°†ä¸‹é¢çš„IPå’ŒPorté…ç½®ä¸ºæ‚¨è‡ªå·±çš„çœŸå®ä¿¡æ¯ã€‚</span>
        <span class="token comment">//        String callbackUrl = &quot;http://88.88.88.88:8888&quot;;</span>


        <span class="token class-name">String</span> dir <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶æ—¶æŒ‡å®šçš„å‰ç¼€ã€‚ä»¥æ—¥æœŸæ ¼å¼å­˜å‚¨</span>

        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> respMap<span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> expireTime <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> expireEndTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> expireTime <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
            <span class="token class-name">Date</span> expiration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expireEndTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// PostObjectè¯·æ±‚æœ€å¤§å¯æ”¯æŒçš„æ–‡ä»¶å¤§å°ä¸º5 GBï¼Œå³CONTENT_LENGTH_RANGEä¸º5*1024*1024*1024ã€‚</span>
            <span class="token class-name">PolicyConditions</span> policyConds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PolicyConditions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            policyConds<span class="token punctuation">.</span><span class="token function">addConditionItem</span><span class="token punctuation">(</span><span class="token class-name">PolicyConditions</span><span class="token punctuation">.</span><span class="token constant">COND_CONTENT_LENGTH_RANGE</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1048576000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            policyConds<span class="token punctuation">.</span><span class="token function">addConditionItem</span><span class="token punctuation">(</span><span class="token class-name">MatchMode<span class="token punctuation">.</span>StartWith</span><span class="token punctuation">,</span> <span class="token class-name">PolicyConditions</span><span class="token punctuation">.</span><span class="token constant">COND_KEY</span><span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> postPolicy <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">generatePostPolicy</span><span class="token punctuation">(</span>expiration<span class="token punctuation">,</span> policyConds<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”Ÿæˆåè®®ç§˜é’¥</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> binaryData <span class="token operator">=</span> postPolicy<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> encodedPolicy <span class="token operator">=</span> <span class="token class-name">BinaryUtil</span><span class="token punctuation">.</span><span class="token function">toBase64String</span><span class="token punctuation">(</span>binaryData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> postSignature <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">calculatePostSignature</span><span class="token punctuation">(</span>postPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span>

            respMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;accessid&quot;</span><span class="token punctuation">,</span> accessId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;policy&quot;</span><span class="token punctuation">,</span> encodedPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”Ÿæˆçš„åè®®ç§˜é’¥</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;signature&quot;</span><span class="token punctuation">,</span> postSignature<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;dir&quot;</span><span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;host&quot;</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;expire&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>expireEndTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// respMap.put(&quot;expire&quot;, formatISO8601Date(expiration));</span>


        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Assert.fail(e.getMessage());</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>respMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•è¿™ä¸ªè¯·æ±‚ï¼Œ<code>http://localhost:9988/oss/policy</code>ï¼ŒæˆåŠŸè·å–</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803165251881.png" alt="image-20220803165251881" tabindex="0" loading="lazy"><figcaption>image-20220803165251881</figcaption></figure><p><strong>äº”ã€è®¾ç½®ç½‘å…³ä»£ç†</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> mall<span class="token punctuation">-</span>third<span class="token punctuation">-</span>service
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//mall<span class="token punctuation">-</span>third<span class="token punctuation">-</span>service
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/thirdservice/<span class="token important">**</span>
  <span class="token key atrule">filters</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> RewritePath= /api/thirdservice/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•è¿™ä¸ªè¯·æ±‚ï¼Œ<code>http://localhost:88/api/thirdservice/oss/policy</code></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803164139979.png" alt="image-20220803164139979" tabindex="0" loading="lazy"><figcaption>image-20220803164139979</figcaption></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„åŠŸèƒ½éƒ½æ²¡é—®é¢˜äº†ï¼Œé‚£ä¹ˆç°åœ¨å°±æ¥å‰ç«¯çš„ä»£ç </p><h3 id="singleupload-vue" tabindex="-1"><a class="header-anchor" href="#singleupload-vue" aria-hidden="true">#</a> singleUpload.vue</h3><blockquote><p>å•æ–‡ä»¶ä¸Šä¼ ç»„ä»¶</p></blockquote><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-upload</span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://gulimall-hello.oss-cn-beijing.aliyuncs.com<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataObj<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">list-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>picture<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show-file-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showFileList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:file-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:before-upload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeUpload<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-remove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleRemove<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleUploadSuccess<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-preview</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handlePreview<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»ä¸Šä¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tip<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-upload__tip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åªèƒ½ä¸Šä¼ jpg/pngæ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡10MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-upload</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileList[0].url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">import</span> <span class="token punctuation">{</span>policy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./policy&#39;</span>
   <span class="token keyword">import</span> <span class="token punctuation">{</span> getUUID <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;singleUpload&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">imageUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">imageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">fileList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageName<span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageUrl
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">showFileList</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span><span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">!==</span><span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">dataObj</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">policy</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">signature</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">ossaccessKeyId</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          <span class="token comment">// callback:&#39;&#39;,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">dialogVisible</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">emitInput</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">handleRemove</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> fileList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitInput</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">handlePreview</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">beforeUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> _self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">policy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å“åº”çš„æ•°æ®&quot;</span><span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>policy <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>policy<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>signature <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>signature<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>ossaccessKeyId <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>accessid<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>key <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dir <span class="token operator">+</span><span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;_${filename}&#39;</span><span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>dir <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dir<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>host <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å“åº”çš„æ•°æ®222ã€‚ã€‚ã€‚&quot;</span><span class="token punctuation">,</span>_self<span class="token punctuation">.</span>dataObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">handleUploadSuccess</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šä¼ æˆåŠŸ...&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showFileList <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>host <span class="token operator">+</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;${filename}&quot;</span><span class="token punctuation">,</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitInput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="multiupload-vue" tabindex="-1"><a class="header-anchor" href="#multiupload-vue" aria-hidden="true">#</a> multiUpload.vue</h3><blockquote><p>å¤šæ–‡ä»¶ä¸Šä¼ ç»„ä»¶</p></blockquote><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-upload</span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://gulimall-hello.oss-cn-beijing.aliyuncs.com<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataObj<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:list-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listType<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:file-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:before-upload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeUpload<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-remove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleRemove<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleUploadSuccess<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-preview</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handlePreview<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:limit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxCount<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:on-exceed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleExceed<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:show-file-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showFile<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-icon-plus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-upload</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogImageUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> policy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./policy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUUID <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;multiUpload&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//å›¾ç‰‡å±æ€§æ•°ç»„</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
    <span class="token comment">//æœ€å¤§ä¸Šä¼ å›¾ç‰‡æ•°é‡</span>
    <span class="token literal-property property">maxCount</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">30</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">listType</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;picture-card&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">showFile</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">dataObj</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">policy</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">signature</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ossaccessKeyId</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">uuid</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dialogVisible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dialogImageUrl</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">fileList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> fileList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> fileList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">emitInput</span><span class="token punctuation">(</span><span class="token parameter">fileList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fileList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fileList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleRemove</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> fileList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitInput</span><span class="token punctuation">(</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handlePreview</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogImageUrl <span class="token operator">=</span> file<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> _self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">policy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯ä»€ä¹ˆ${filename}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>policy <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>policy<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>signature <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>signature<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>ossaccessKeyId <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>accessid<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>key <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dir <span class="token operator">+</span><span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;_${filename}&quot;</span><span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>dir <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dir<span class="token punctuation">;</span>
            _self<span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>host <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å‡ºé”™äº†...&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleUploadSuccess</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        <span class="token comment">// url: this.dataObj.host + &quot;/&quot; + this.dataObj.dir + &quot;/&quot; + file.nameï¼› æ›¿æ¢${filename}ä¸ºçœŸæ­£çš„æ–‡ä»¶å</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>host <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;${filename}&quot;</span><span class="token punctuation">,</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitInput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleExceed</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> fileList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;æœ€å¤šåªèƒ½ä¸Šä¼ &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount <span class="token operator">+</span> <span class="token string">&quot;å¼ å›¾ç‰‡&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1000</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="policy-js" tabindex="-1"><a class="header-anchor" href="#policy-js" aria-hidden="true">#</a> policy.js</h3><blockquote><p>æœåŠ¡ç«¯ç­¾å</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&#39;@/utils/httpRequest.js&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">policy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/third-party/oss/policy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">params</span><span class="token operator">:</span> http<span class="token punctuation">.</span><span class="token function">adornParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é˜¿é‡Œäº‘å¼€å¯è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#é˜¿é‡Œäº‘å¼€å¯è·¨åŸŸ" aria-hidden="true">#</a> é˜¿é‡Œäº‘å¼€å¯è·¨åŸŸ</h3><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803200723262.png" alt="image-20220803200723262" tabindex="0" loading="lazy"><figcaption>image-20220803200723262</figcaption></figure><h3 id="æµ‹è¯•-1" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-1" aria-hidden="true">#</a> æµ‹è¯•</h3><blockquote><p>å›¾ç‰‡å¯ä»¥æ­£å¸¸ä¸Šä¼ å’Œæ˜¾ç¤º</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803200620561.png" alt="image-20220803200620561" tabindex="0" loading="lazy"><figcaption>image-20220803200620561</figcaption></figure><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803200535023.png" alt="image-20220803200535023" tabindex="0" loading="lazy"><figcaption>image-20220803200535023</figcaption></figure><h2 id="æ•°æ®æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æ ¡éªŒ" aria-hidden="true">#</a> æ•°æ®æ ¡éªŒ</h2><h3 id="å‰ç«¯æ•°æ®æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯æ•°æ®æ ¡éªŒ" aria-hidden="true">#</a> å‰ç«¯æ•°æ®æ ¡éªŒ</h3><p>å°±æ˜¯è§„å®šæ·»åŠ çš„å±æ€§è¦ç¬¦åˆè§„å®šï¼Œä¸ç„¶ä¼šå‡ºç°æƒ³ä¸åˆ°çš„å¼‚å¸¸ï¼</p><p>ä¾‹å¦‚ï¼šæ·»åŠ å“ç‰Œé€‰é¡¹æ¡†ä¸­ï¼Œè®¾ç½®æ£€ç´¢é¦–å­—æ¯é‚£ä¹ˆæˆ‘ä»¬å°±è¦è§„å®šé¦–å­—æ¯ä¸èƒ½æ˜¯å¤šä¸ªå­—æ¯åªèƒ½æ˜¯a-zæˆ–A-Zä¹‹é—´çš„ä¸€ä¸ª</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™ä¸ªè¾“å…¥æ¡†è¿›è¡Œç»‘å®šï¼Œå¦‚ä¸‹</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803201346675.png" alt="image-20220803201346675" tabindex="0" loading="lazy"><figcaption>image-20220803201346675</figcaption></figure><p><strong>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220803201146001.png" alt="image-20220803201146001" tabindex="0" loading="lazy"><figcaption>image-20220803201146001</figcaption></figure><h3 id="jsr303æ•°æ®æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#jsr303æ•°æ®æ ¡éªŒ" aria-hidden="true">#</a> JSR303æ•°æ®æ ¡éªŒ</h3><p>åç«¯çš„å¤„ç†å‰ç«¯ä¼ æ¥çš„æ•°æ®æ—¶ï¼Œè™½ç„¶å‰ç«¯å·²åšé™åˆ¶ä½†æ˜¯è¿˜ä¸å¤Ÿä¸¥è°¨ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥è·³è¿‡é¡µé¢é€šè¿‡ä¸€äº›å·¥å…·ç›´æ¥å‘é€è¯·æ±‚ä¹Ÿå¯ä»¥å®Œæˆæ·»åŠ ç­‰æ“ä½œï¼Œæ‰€ä»¥åç«¯ä¹Ÿéœ€è¦åšæ•°æ®æ ¡éªŒï¼</p><p>javaä¸­ä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„æ ¡éªŒæ–¹å¼ï¼Œå®ƒè¿™äº›æ ¡éªŒæ–¹å¼åœ¨â€œjavax.validation.constraintsâ€åŒ…ä¸­ï¼Œ@Emailï¼Œ@NotNullç­‰æ³¨è§£ã€‚</p><p><strong>ä¸€ã€æ·»åŠ ä¾èµ–</strong></p><blockquote><p>åé¢å¯èƒ½å…¶ä»–æ¨¡å—ä¹Ÿèƒ½ç”¨åˆ°ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠä¾èµ–æ·»åŠ åˆ°commonæ¨¡å—</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--jsr3å‚æ•°æ ¡éªŒå™¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾èµ–æä¾›äº†NotNullï¼Œ@NotBlankå’Œ@NotEmptyè¿™äº›åˆ¤æ–­</p><p><strong>äºŒã€ç»™éœ€è¦æ ¡éªŒçš„beanæ·»åŠ æ³¨è§£</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å“ç‰Œ
 * 
 * <span class="token keyword">@author</span> xiaocai
 * <span class="token keyword">@email</span> mildcaq@gmail.com
 * <span class="token keyword">@date</span> 2022-07-27 21:05:30
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">&quot;pms_brand&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandEntity</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

   <span class="token doc-comment comment">/**
    * å“ç‰Œid
    */</span>
   <span class="token annotation punctuation">@TableId</span>
   <span class="token keyword">private</span> <span class="token class-name">Long</span> brandId<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * å“ç‰Œå
    */</span>
   <span class="token annotation punctuation">@NotBlank</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * å“ç‰Œlogoåœ°å€
    */</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> logo<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * ä»‹ç»
    */</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> descript<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]
    */</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * æ£€ç´¢é¦–å­—æ¯
    */</span>
   <span class="token annotation punctuation">@NotEmpty</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> firstLetter<span class="token punctuation">;</span>
   <span class="token doc-comment comment">/**
    * æ’åº
    */</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœªåœ¨æ§åˆ¶ç±»ä¸­æŒ‡å®šæ–¹æ³•å¼€å¯æ ¡éªŒæ—¶å¦‚ä¸‹ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805214722499.png" alt="image-20220805214722499" tabindex="0" loading="lazy"><figcaption>image-20220805214722499</figcaption></figure><p>controllerä¸­ç»™è¯·æ±‚æ–¹æ³•åŠ æ ¡éªŒæ³¨è§£<code>@Valid</code>ï¼Œå¼€å¯æ ¡éªŒï¼Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ä¿å­˜
 */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token annotation punctuation">@Valid</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">{</span>
    brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™é‡Œæˆ‘é”™è¯¯ä¿¡æ¯åªè¿”å›æ˜¯Bad Request</p><p>è§†é¢‘ä¸­è€å¸ˆæ‰€è®²çš„æ˜¯æœ‰è¯¦ç»†ä¿¡æ¯çš„ï¼Œè¿™ä¸ªå·®å¼‚åº”è¯¥æ˜¯ç‰ˆæœ¬åŸå› ä¸å½±å“ï¼</p></blockquote><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805214850184.png" alt="image-20220805214850184" tabindex="0" loading="lazy"><figcaption>image-20220805214850184</figcaption></figure><p>è¿™ç§è¿”å›çš„é”™è¯¯ç»“æœå¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡éœ€è¦ã€‚æˆ‘ä»¬æƒ³è®©æ•æ‰è¿™ä¸ªé”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿç»Ÿä¸€è¿”å›æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼</p><p><strong>ä¸‰ã€é€šè¿‡BindResultæ•è·æ ¡éªŒç»“æœ</strong></p><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">,</span><span class="token class-name">BindingResult</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> result<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.è·å–é”™è¯¯çš„æ ¡éªŒç»“æœ</span>
        result<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//è·å–å‘ç”Ÿé”™è¯¯æ—¶çš„message</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è·å–å‘ç”Ÿé”™è¯¯çš„å­—æ®µ</span>
            <span class="token class-name">String</span> field <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token string">&quot;æäº¤çš„æ•°æ®ä¸åˆæ³•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å†æ¬¡æµ‹è¯•</strong></p><p>å¥½å•¦ï¼Œè¿™ä¸‹æŠŠé”™è¯¯ä¿¡æ¯éƒ½æ•è·åˆ°å–½ï¼</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805215355999.png" alt="image-20220805215355999" tabindex="0" loading="lazy"><figcaption>image-20220805215355999</figcaption></figure><p>ä½†æ˜¯ï¼Œè¿™ç§æ˜¯é’ˆå¯¹äºè¯¥è¯·æ±‚è®¾ç½®äº†ä¸€ä¸ªå†…å®¹æ ¡éªŒï¼Œå¦‚æœé’ˆå¯¹äºæ¯ä¸ªè¯·æ±‚éƒ½å•ç‹¬è¿›è¡Œé…ç½®ï¼Œæ˜¾ç„¶ä¸æ˜¯å¤ªåˆé€‚ï¼Œå®é™…ä¸Šå¯ä»¥<code>ç»Ÿä¸€çš„å¯¹äºå¼‚å¸¸è¿›è¡Œå¤„ç†</code>ã€‚</p><p><strong>å››ã€ç»Ÿä¸€å¼‚å¸¸å¤„ç†</strong></p><p>å¯ä»¥ä½¿ç”¨SpringMvcæ‰€æä¾›çš„@ControllerAdviceï¼Œé€šè¿‡â€œbasePackagesâ€èƒ½å¤Ÿè¯´æ˜å¤„ç†å“ªäº›è·¯å¾„ä¸‹çš„å¼‚å¸¸ã€‚</p><p><strong>ï¼ˆ1ï¼‰æŠ½å–ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç±»</strong></p><blockquote><p>è¯¦ç»†ä¿¡æ¯éƒ½å†™åœ¨äº†æ³¨é‡Šé‡Œï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒï¼ï¼ï¼</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestControllerAdvice</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.caq.mall.product.controller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MallExceptionAdvice</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŒ‡å®šçš„åŒ…ä¸‹æ‰€æœ‰çš„æ ¡éªŒå¼‚å¸¸éƒ½ä¼šè¢«è¿™ä¸ªæ–¹æ³•æ•æ‰</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">handleValidException</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å®šä¹‰mapï¼Œå­˜æ”¾æ‰€æœ‰é”™è¯¯ä¿¡æ¯</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é€šè¿‡BindResultæ•è·æ ¡éªŒç»“æœ</span>
        <span class="token class-name">BindingResult</span> bindingResult <span class="token operator">=</span> exception<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//éå†æ ¡éªŒç»“æœä¸­æ‰€æœ‰å­—æ®µçš„é”™è¯¯ï¼Œå­—æ®µä¸ºkeyï¼Œé”™è¯¯ä¿¡æ¯ä¸ºvalueå­˜æ”¾åˆ°mapä¸­</span>
        bindingResult<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>fieldError <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> fieldError<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> field <span class="token operator">=</span> fieldError<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ•°æ®æ ¡éªŒå‡ºç°é—®é¢˜{},å¼‚å¸¸ç±»å‹{}&quot;</span><span class="token punctuation">,</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exception<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        è¿”å›é”™è¯¯ç»“æœï¼Œå¹¶æ˜¾ç¤ºæ‰€æœ‰é”™è¯¯çš„æ•°æ®</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&quot;æ•°æ®æ ¡éªŒå‡ºç°é—®é¢˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆ2ï¼‰æµ‹è¯•ï¼š <a href="http://localhost:88/api/product/brand/save" target="_blank" rel="noopener noreferrer">http://localhost:88/api/product/brand/save<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong></p><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬å»æ‰æˆ‘ä»¬æ§åˆ¶ç±»ä¸­saveæ–¹æ³•çš„æ ¡éªŒï¼Œçœ‹çœ‹ç»Ÿä¸€å¼‚å¸¸å¤„ç†èƒ½å¦ç”Ÿæ•ˆ</p></blockquote><p>è¿˜æ˜¯å¯ä»¥å“¦ï¼</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805221126581.png" alt="image-20220805221126581" tabindex="0" loading="lazy"><figcaption>image-20220805221126581</figcaption></figure><p><strong>ï¼ˆ3ï¼‰é”™è¯¯çŠ¶æ€ç </strong></p><p>æ­£è§„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé”™è¯¯çŠ¶æ€ç æœ‰ç€ä¸¥æ ¼çš„å®šä¹‰è§„åˆ™</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/***
 * é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯å®šä¹‰ç±»
 * 1. é”™è¯¯ç å®šä¹‰è§„åˆ™ä¸º5ä¸ºæ•°å­—
 * 2. å‰ä¸¤ä½è¡¨ç¤ºä¸šåŠ¡åœºæ™¯ï¼Œæœ€åä¸‰ä½è¡¨ç¤ºé”™è¯¯ç ã€‚ä¾‹å¦‚ï¼š100001ã€‚10:é€šç”¨ 001:ç³»ç»ŸæœªçŸ¥å¼‚å¸¸
 * 3. ç»´æŠ¤é”™è¯¯ç åéœ€è¦ç»´æŠ¤é”™è¯¯æè¿°ï¼Œå°†ä»–ä»¬å®šä¹‰ä¸ºæšä¸¾å½¢å¼
 * é”™è¯¯ç åˆ—è¡¨ï¼š
 *  10: é€šç”¨
 *      001ï¼šå‚æ•°æ ¼å¼æ ¡éªŒ
 *  11: å•†å“
 *  12: è®¢å•
 *  13: è´­ç‰©è½¦
 *  14: ç‰©æµ
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">BizCodeEnum</span> <span class="token punctuation">{</span>

    <span class="token function">UNKNOW_EXEPTION</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token string">&quot;ç³»ç»ŸæœªçŸ¥å¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">VALID_EXCEPTION</span><span class="token punctuation">(</span> <span class="token number">10001</span><span class="token punctuation">,</span><span class="token string">&quot;å‚æ•°æ ¼å¼æ ¡éªŒå¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>

    <span class="token class-name">BizCodeEnum</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆ4ï¼‰é»˜è®¤å¼‚å¸¸å¤„ç†</strong></p><p>ä¸Šé¢çš„ç»Ÿä¸€å¼‚å¸¸å¤„ç†åªæ˜¯é’ˆå¯¹äº†æ ¡éªŒç›¸å…³çš„é”™è¯¯ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯å…¶ä»–å¼‚å¸¸å‘¢ï¼Ÿ</p><p>é‚£å°±å†æ¥ä¸ªé»˜è®¤çš„å¼‚å¸¸å¤„ç†å‘—</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>   <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">Throwable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">handleException</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æœªçŸ¥å¼‚å¸¸{},å¼‚å¸¸ç±»å‹{}&quot;</span><span class="token punctuation">,</span>throwable<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>throwable<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span><span class="token constant">UNKNOW_EXEPTION</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span><span class="token constant">UNKNOW_EXEPTION</span><span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ†ç»„æ ¡éªŒåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#åˆ†ç»„æ ¡éªŒåŠŸèƒ½" aria-hidden="true">#</a> åˆ†ç»„æ ¡éªŒåŠŸèƒ½</h3><p><strong>ä¸€ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ</strong></p><p>å¦‚ï¼šæŒ‡å®šåœ¨æ›´æ–°å’Œæ·»åŠ çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è¿›è¡Œæ ¡éªŒï¼Œæˆ‘ä»¬å¯¹idè¿›è¡Œé™åˆ¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token doc-comment comment">/**
	 * å“ç‰Œid
	 */</span>
	<span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;ä¿®æ”¹å¿…é¡»æŒ‡å®šå“ç‰Œid&quot;</span><span class="token punctuation">,</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Null</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;æ–°å¢ä¸èƒ½æŒ‡å®šid&quot;</span><span class="token punctuation">,</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@TableId</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> brandId<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„UpdateGroupå’ŒAddGroupéƒ½éœ€è¦æ”¶åˆ°åˆ›å»ºä¸€ä¸‹ï¼Œä¸ºäº†æ¼”ç¤ºå¯ä»¥åªåˆ›å»ºä¸å†™å†…å®¹</p><p><strong>äºŒã€ä½¿ç”¨@Validatedæ³¨è§£</strong></p><blockquote><p>@Validated(AddGroup.class)æŒ‡å®šæ–°å¢çš„æ—¶å€™æ³¨è§£æ‰ä¼šç”Ÿæ•ˆ</p><p>å…¶ä»–çš„æ³¨è§£å­—æ®µï¼Œå³ä½¿æ ‡æ³¨æ ¡æ£€ä¹Ÿä¸ç”Ÿæ•ˆ</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ä¿å­˜
 */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">{</span>
    brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æµ‹è¯•</strong></p><p>å› ä¸ºæŒ‡å®šäº†æ–°å¢ä¸èƒ½æŒ‡å®šidï¼Œä½†æ˜¯æˆ‘ä»¬æµ‹è¯•çš„æ—¶å€™åŠ idäº†æ‰€ä»¥è¿”å›é”™è¯¯ä¿¡æ¯</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805230241988.png" alt="image-20220805230241988" tabindex="0" loading="lazy"><figcaption>image-20220805230241988</figcaption></figure><p>æµ‹è¯•å…¶ä»–å­—æ®µ</p><p>å¯ä»¥çœ‹åˆ°å³ä½¿nameå­—æ®µåŠ éç©ºäº†ï¼Œæˆ‘ä»¬æµ‹è¯•ç”¨ç©ºå€¼ä¹Ÿæ˜¯å¯ä»¥ç”Ÿæ•ˆçš„</p><p>è¯´æ˜åœ¨<strong>åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚</strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805230445826.png" alt="image-20220805230445826" tabindex="0" loading="lazy"><figcaption>image-20220805230445826</figcaption></figure><h3 id="è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½" aria-hidden="true">#</a> è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½</h3><p><strong>ä¸€ã€å¯¼å…¥ä¾èµ–</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>validation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>äºŒã€ç¼–å†™è‡ªå®šä¹‰æ³¨è§£</strong></p><p><strong>ï¼ˆ1ï¼‰æ³¨è§£çš„æ ¼å¼ä¸ä¼šå†™æ€ä¹ˆåŠï¼Ÿ</strong></p><p>ç›´æ¥å¤åˆ¶å…¶ä»–æ³¨è§£çš„å½¢å¼</p><p><strong>ï¼ˆ2ï¼‰ç‰¹åˆ«è¯´æ˜</strong></p><ul><li>@Targetçš„æ„æ€æ˜¯è¯´ï¼Œè¿™ä¸ªæ³¨è§£èƒ½æ ‡æ³¨åœ¨å“ªé‡Œï¼Œåé¢é€šè¿‡{}è¿›è¡ŒæŒ‡å®š</li><li>String message() default &quot;{com.caq.common.valid.ListValue.message}&quot;;è¿™ä¸ªæ„æ€æ˜¯æŒ‡ï¼Œ@ListValueæ³¨è§£çš„é”™è¯¯æç¤ºä¿¡æ¯ä¼šå»é…ç½®æ–‡ä»¶ä¸­æ‰¾è¿™ä¸ªmessageçš„å€¼å½“ä½œä¿¡æ¯</li><li>int[] vals() default {};è¿™é‡Œçš„å®šä¹‰æ˜¯å€¼@ListValueè¿™ä¸ªæ³¨è§£å¯ä»¥æœ‰å˜é‡åä¸ºvalsçš„intæ•°ç»„åšä¸ºå‚æ•°</li></ul><p><strong>ï¼ˆ3ï¼‰@Constraint( validatedBy = {})çš„è¯´æ˜</strong></p><p>validatedByæŒ‡å®šè¿™ä¸ªæ³¨è§£ç”±å“ªä¸€ä¸ªæ ¡éªŒå™¨æ ¡éªŒï¼Œè¯¦ç»†ä¿¡æ¯å¦‚å›¾ï¼š</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220805233440319.png" alt="image-20220805233440319" tabindex="0" loading="lazy"><figcaption>image-20220805233440319</figcaption></figure><p><strong>ï¼ˆ4ï¼‰é…ç½®æ³¨è§£é”™è¯¯è¿”å›ä¿¡æ¯</strong></p><p>åœ¨resourceæ–‡ä»¶ä¸‹åˆ›å»ºï¼šValidationMessages.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">com.zsy.common.valid.ListValue.message</span><span class="token punctuation">=</span><span class="token value attr-value">å¿…é¡»æäº¤æŒ‡å®šçš„å€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ï¼ˆ5ï¼‰è‡ªå®šä¹‰çš„æ ¡éªŒå™¨</strong></p><p>è¯¦ç»†ä¿¡æ¯è¿˜æ˜¯æ³¨æ„ä»£ç ä¸­çš„æ³¨é‡Š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListValueConstraintValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListValue</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * åˆå§‹åŒ–æ–¹æ³•
     * å‚æ•°ï¼šè‡ªå®šä¹‰æ³¨è§£çš„è¯¦ç»†ä¿¡æ¯
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">ListValue</span> constraintAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//constraintAnnotation.vals()æ„æ€æ˜¯è·å¾—ä½ æ³¨è§£é‡Œçš„å‚æ•°</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> constraintAnnotation<span class="token punctuation">.</span><span class="token function">vals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æŠŠè·å–åˆ°çš„å‚æ•°æ”¾åˆ°seté›†åˆé‡Œ</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v al <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åˆ¤æ–­æ˜¯å¦æ ¡éªŒæˆåŠŸ
     * <span class="token keyword">@param</span> <span class="token parameter">value</span>   éœ€è¦æ ¡éªŒçš„å€¼
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è¿™é‡Œçš„Integer valueå‚æ•°æ˜¯æŒ‡ä½ æ³¨è§£é‡Œæäº¤è¿‡æ¥çš„å‚æ•°</span>
        <span class="token comment">//ä¹‹ååˆ¤æ–­é›†åˆé‡Œæ˜¯å¦æœ‰è¿™ä¸ªä¼ è¿›æ¥çš„å€¼ï¼Œå¦‚æœæœ‰è¿”å›trueï¼Œæ²¡çš„è¯è¿”å›falseå¹¶è¿”å›é”™è¯¯ä¿¡æ¯</span>
        <span class="token keyword">return</span> set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆ6ï¼‰å…³è”è‡ªå®šä¹‰æ ¡éªŒå™¨</strong></p><p>é€šè¿‡validatedBy = {ListValueConstraintValidator.class}å»æŒ‡å®šå³å¯ï¼</p><p>é‚£å¦‚æœä»¥å@ListValueæ³¨è§£æ”¯æŒçš„å±æ€§ç±»å‹å˜ä¸ºdoubleäº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æŒ‡å®šæ–°çš„æ ¡éªŒå™¨å³å¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£ å£°æ˜å¯ä»¥å–é‚£äº›å€¼
 */</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">ListValueConstraintValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token constant">METHOD</span><span class="token punctuation">,</span> <span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">,</span> <span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span> <span class="token constant">PARAMETER</span><span class="token punctuation">,</span> <span class="token constant">TYPE_USE</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ListValue</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;{com.caq.common.validation.ListValue.message}&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">vals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‰ã€æµ‹è¯•</strong></p><p>æˆ‘ä»¬ç»™çŠ¶æ€å­—æ®µæŒ‡å®šåˆ†ç»„æ£€éªŒï¼Œè®©å®ƒå¢åŠ çš„æ—¶å€™æ‰è¿›è¡Œæ ¡éªŒ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]
     */</span>
    <span class="token annotation punctuation">@ListValue</span><span class="token punctuation">(</span>vals <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆ1ï¼‰è¯»å–propertiesæ–‡ä»¶å†…å®¹ä¹±ç </strong></p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220806001349906.png" alt="image-20220806001349906" tabindex="0" loading="lazy"><figcaption>image-20220806001349906</figcaption></figure><p>è®¾ç½®å¥½ï¼Œæ¸…ç†targetï¼Œé‡æ–°ç¼–è¯‘</p><p>å†æ¬¡æµ‹è¯•</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220806001259826.png" alt="image-20220806001259826" tabindex="0" loading="lazy"><figcaption>image-20220806001259826</figcaption></figure><h3 id="å®Œå–„ä»£ç " tabindex="-1"><a class="header-anchor" href="#å®Œå–„ä»£ç " aria-hidden="true">#</a> å®Œå–„ä»£ç </h3><p><strong>ï¼ˆ1ï¼‰åšæ£€éªŒçš„å­—æ®µ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å“ç‰Œ
 * <span class="token keyword">@author</span> xiaocai
 * <span class="token keyword">@email</span> mildcaq@gmail.com
 * <span class="token keyword">@date</span> 2022-07-27 21:05:30
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">&quot;pms_brand&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandEntity</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * å“ç‰Œid
     */</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;ä¿®æ”¹å¿…é¡»æŒ‡å®šå“ç‰Œid&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Null</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;æ–°å¢ä¸èƒ½æŒ‡å®šid&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@TableId</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> brandId<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * å“ç‰Œå
     */</span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;å“ç‰Œåå¿…é¡»æäº¤&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * å“ç‰Œlogoåœ°å€
     */</span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@URL</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;logoå¿…é¡»æ˜¯ä¸€ä¸ªåˆæ³•çš„urlåœ°å€&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> logo<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * ä»‹ç»
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> descript<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]
     */</span>
<span class="token comment">// @Pattern()</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateStatusGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ListValue</span><span class="token punctuation">(</span>vals <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateStatusGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * æ£€ç´¢é¦–å­—æ¯
     */</span>
    <span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;^[a-zA-Z]$&quot;</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;æ£€ç´¢é¦–å­—æ¯å¿…é¡»æ˜¯ä¸€ä¸ªå­—æ¯&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstLetter<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * æ’åº
     */</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;æ’åºå¿…é¡»å¤§äºç­‰äº0&quot;</span><span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆ2ï¼‰controllerä¸­å…±ä¸‰ä¸ªæ–¹æ³•åšäº†æ•°æ®æ ¡éªŒ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
   * ä¿å­˜
   */</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">{</span>
      brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/**
   * ä¿®æ”¹
   */</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">{</span>
brandService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update/status&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">updateStatus</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">UpdateStatusGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">{</span>
      brandService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ï¼ˆä¸‰ï¼‰æµ‹è¯•å‰åç«¯çš„æ ¡éªŒ</strong></p><p>æµ‹è¯•çŠ¶æ€ä¿®æ”¹</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220806002244394.png" alt="image-20220806002244394" tabindex="0" loading="lazy"><figcaption>image-20220806002244394</figcaption></figure><p>æµ‹è¯•ä¿®æ”¹</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220806002715222.png" alt="image-20220806002715222" tabindex="0" loading="lazy"><figcaption>image-20220806002715222</figcaption></figure><p>æµ‹è¯•æ–°å¢</p><figure><img src="https://typora-1259403628.cos.ap-nanjing.myqcloud.com/image-20220806003002793.png" alt="image-20220806003002793" tabindex="0" loading="lazy"><figcaption>image-20220806003002793</figcaption></figure></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/ssss/edit/main/demo/theme-docs/src/study-project/mall/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">Last update: </span><!----></div><div class="meta-item contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: mildcaq@163.com">xiaocai</span><!--]--><!--]--></div></footer><!----><div class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">NickName</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">E-Mail</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">Website</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="Write a comment here (Fill in the email address to receive an email notification when being replied)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>Preview:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="Emoji" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="GIF"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="Upload Image"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="Preview"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-text-number">0 <!--v-if--> Â Words</div><button type="button" class="wl-btn">Login</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->Submit<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="Search GIF"><div class="wl-gallery" style="gap:6px;"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> Comments</div><ul class="wl-sort"><!--[--><li class="active">Latest</li><li class="">Oldest</li><li class="">Hottest</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.14.4</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Copyright Â© 2022 å°è”¡coding</div><div class="copyright">Copyright Â© 2022 xiaocai</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-59753726.js" defer></script>
  </body>
</html>
